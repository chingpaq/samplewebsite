"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[209],{40317:function(e,t,n){n.r(t),n.d(t,{default:function(){return U},randomisedColor:function(){return D}});var i=n(93433),o=n(29439),a=n(67861),l=n(39518),r=n(23280),s=n(11577),c=n(10103),m=n(41771),u=n(71982),d=n(75105),p=n(96189),v=n(32588),f=n(40694),y=n(71871),g=n(63789),h=n(1413),x=(n(83381),n(73500)),_=n(79492),C=n.n(_),E=n(70847),Z=n(88374),S=n(34710),b=n(89293),I=n(67861),N=n(66918),w=(0,l.$j)((function(e){var t=e.flowReducer;return{inviteColleguesList:t.inviteColleguesList,companyPositionsArray:t.companyPositionsArray,companyData:t.companyData,companyUsersArray:t.companyUsersArray}}),(function(e){return{onSetInviteColleguesList:function(t){return e((0,Z.vj)(t))},onTutorialModalOpen:function(t){return e((0,u.ay)(t))}}}))((function(e){var t,n,i,r,s,m,u=e.closeButtonAction,v=e.onContinueButtonAction,f=e.onCancel,y=e.inviteColleguesList,g=e.companyPositionsArray,_=e.companyUsersArray,w=(0,a.useState)({companyEmail:"",firstName:"",lastName:"",position:"",position_id:""}),A=(0,o.Z)(w,2),k=A[0],T=A[1],F=(0,a.useState)({companyEmail:"",firstName:"",lastName:"",position:""}),D=(0,o.Z)(F,2),U=D[0],j=D[1],B=(0,a.useState)("Hongkong"),P=(0,o.Z)(B,2),H=P[0],M=P[1],z=(0,a.useState)(""),L=(0,o.Z)(z,2),W=L[0],O=L[1],V=(0,a.useState)(!1),X=(0,o.Z)(V,2),R=X[0],Y=X[1],q=(0,a.useState)(!1),J=(0,o.Z)(q,2),$=J[0],G=J[1],Q=(0,l.I0)();(0,a.useEffect)((function(){}),[y]),(0,a.useEffect)((function(){(0,S.hj)().subscribe({})}),[]);var K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&(j((0,h.Z)((0,h.Z)({},W),{},{companyEmail:""})),G(!0),(0,d.fu)({email:e}).pipe((0,c.q)(1)).subscribe({next:function(e){j((0,h.Z)((0,h.Z)({},W),{},{companyEmail:"Email already exists and being used. Please choose another email"})),G(!1)},error:function(e){G(!1),t()}}))},ee=(0,a.useCallback)((function(){var e,t,n;if(_.filter((function(e){return e.email===k.companyEmail})).length>0)j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists and being used."})}));else{j({companyEmail:"",firstName:"",lastName:"",position:""}),O("");var i=!0;if((0,E.isEmail)(k.companyEmail)||(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Invalid Company email"})}))),(null===(e=k.firstName)||void 0===e?void 0:e.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:"Invalid First name"})}))),(null===(t=k.lastName)||void 0===t?void 0:t.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:"Invalid Last name"})}))),(null===(n=k.position)||void 0===n?void 0:n.length)<2&&(i=!1,j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{position:"Position id is not considered valid"})}))),i){var o={email:k.companyEmail,first_name:k.firstName,last_name:k.lastName,position_id:k.position_id};G(!0),(0,S.x7)(o).subscribe({next:function(e){Q((0,Z.Xc)({show:!0,message:"You have successfully created an invitation to ".concat(k.firstName," "),top:"0"})),v()},error:function(e){var t,n,i,o,a,l,r,s,c;e&&j({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(a=o.errors)||void 0===a?void 0:a.first_name)||"",lastName:(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||""});O("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),G(!1)},complete:function(){return G(!1)}})}}}),[k]),te=function(){_.filter((function(e){return e.email===k.companyEmail})).length>0?j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:"Email already exists"})})):_.filter((function(e){return e.username===k.username})).length>0?j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{username:"Username already exists"})})):(Y(!0),(0,d.r4)({email:k.companyEmail,username:k.username,first_name:k.firstName,last_name:k.lastName,timezone:H,position_id:[k.position_id]}).subscribe({next:function(e){Q((0,Z.Xc)({show:!0,message:"You have successfully created ".concat(k.firstName,'. Default password is "P@ssw0rd"'),top:"0"})),v()},error:function(e){var t,n,i,o,a,l,r,s,c,m;e&&j({companyEmail:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i.email)||"",firstName:(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(a=o.errors)||void 0===a?void 0:a.first_name)||"",lastName:(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.errors)||void 0===r?void 0:r.last_name)||"",position:(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(c=s.errors)||void 0===c?void 0:c.position_id)||"",username:(null===e||void 0===e||null===(m=e.data)||void 0===m?void 0:m.errors.username)||""});O("status ".concat(null===e||void 0===e?void 0:e.status,": ").concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)),Y(!1)},complete:function(){return Y(!1)}}))};return I.createElement("div",{style:{width:"inherit",minWidth:"300px"}},I.createElement(p.U7,{scrollable:!0,shadowedContainerStyle:{width:x.tq?"100%":"30%",minWidth:"450px"},isOpen:e.modalVisible,modalClosed:f,blured:e.blured},I.createElement("div",{style:{position:"relative",display:"flex",height:"96%",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",margin:"2% 10% 2% 10%"}},I.createElement("div",{style:{margin:"0px 0 0px 0",alignSelf:"stretch",display:"flex",flexDirection:"row",width:"100%",justifyContent:e.headingCentered?"center":"flex-start",alignItems:e.headingCentered?"center":"stretch"}},e.headingImage&&I.createElement("img",{alt:"",src:e.headingImage,style:{alignSelf:"center",height:"30px",width:"32px"}}),I.createElement("h1",{style:{color:"#4A4A4A",fontFamily:"var(--app-text-main-font)",fontSize:"2em",lineHeight:"2em",margin:"0",padding:"0 0 0 10px",textAlign:"center",width:"100%"}},"Add Users")),I.createElement("div",{className:"subheadingContainer_IX"},I.createElement("p",{className:"subheading_IX"},"Fill the email, name and position of the user you\u2019d like to add. For invites, user will need to accept via email sent")),I.createElement("div",{style:{minHeight:"500px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"stretch"}},I.createElement(C(),null,I.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("div",{style:{marginRight:"10px",width:"100%",height:"100%",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",minHeight:"480px",minWidth:"351px",backgroundColor:"#FFFFFF"}},I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"comapny-name",className:"inputStyle_IX",placeholder:"Email",value:k.companyEmail,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{companyEmail:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{companyEmail:""})}))}}),(null===U||void 0===U||null===(t=U.companyEmail)||void 0===t?void 0:t.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===U||void 0===U?void 0:U.companyEmail)),(null===U||void 0===U||null===(n=U.username)||void 0===n?void 0:n.length)>0&&I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"user-name",className:"inputStyle_IX",placeholder:"Username",value:k.username,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{username:e.target.value})}))}}),(null===U||void 0===U||null===(i=U.username)||void 0===i?void 0:i.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===U||void 0===U?void 0:U.username)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement(p.Ld,{triggerType:"chevron",molclassname:"menuOverlayList_IX",moliclassname:"menuOverlayListItem_IX",title:"",placeholder:"Position",onChange:function(e){e&&T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{position:e.label,position_id:e.value})}))},items:g}),(null===U||void 0===U||null===(r=U.position)||void 0===r?void 0:r.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===U||void 0===U?void 0:U.position)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"first-name",className:"inputStyle_IX",placeholder:"First Name",value:k.firstName,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{firstName:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{firstName:""})}))}}),(null===U||void 0===U||null===(s=U.firstName)||void 0===s?void 0:s.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===U||void 0===U?void 0:U.firstName)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement("input",{type:"text",name:"last-name",className:"inputStyle_IX",placeholder:"Last Name",value:k.lastName,onChange:function(e){T((function(t){return(0,h.Z)((0,h.Z)({},t),{},{lastName:e.target.value})}))},onFocus:function(){j((function(e){return(0,h.Z)((0,h.Z)({},e),{},{lastName:""})}))}}),(null===U||void 0===U||null===(m=U.lastName)||void 0===m?void 0:m.length)>0&&I.createElement("p",{style:{margin:"1px 0 1px 2px ",fontFamily:"var(--app-text-main-font)",fontSize:"14px",color:"var(--app-color-error)"}},null===U||void 0===U?void 0:U.lastName)),I.createElement("div",{style:{margin:"10px 0px 0 0",dispay:"flex",width:"100%",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},I.createElement(p.Ld,{inputStyle:{pointerEvents:"none"},items:b.LY,defaultSelectedItem:N.find(N.propEq("value",H))(b.LY),triggerType:"chevron",placeholder:"Select timezone",onChange:function(e){M(null===e||void 0===e?void 0:e.value)}}))))),I.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"}},I.createElement(p.zx,{title:"Close",clicked:u,style:{width:"100px"}}),I.createElement(p.zx,{title:"Invite User",light:!0,disabled:!1,loading:$,clicked:function(){K(k.companyEmail,ee)},style:{width:"140px"}}),I.createElement(p.zx,{title:"Create User",light:!0,disabled:!1,loading:R,clicked:function(){return K(k.companyEmail,te)},style:{width:"140px"}}))))),I.createElement(p.I5,null))})),A=n(61616);document.title="Users | ".concat(b.iC);n(66918),n(84813);var k,T,F=String((k=10,T=245,k=Math.ceil(k),T=Math.floor(T),Math.floor(Math.random()*(T-k))+k)),D={color:"rgb(".concat(F,",").concat(F,",").concat(F,")")||0},U=(0,l.$j)((function(e){var t=e.authReducer.authenticatedUser.position,n=e.sessionReducer.user,i=e.flowReducer;return{companyData:i.companyData,companyPositionsArray:i.companyPositionsArray,position:t,allTasks:i.allTasks,allCompletedTasks:i.allCompletedTasks,allCompletedTasksPaginated:i.allCompletedTasksPaginated,user:n,companyUsersArray:i.companyUsersArray}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,u.DJ)(t))},onToggleModalVisibility:function(t){return e((0,u.$6)(t))}}}))((function(e){var t=(0,r.TH)(),n=e.user,u=e.onToggleModalVisibility,h=e.onSetOnBoardingVisible,x=e.companyUsersArray,_=e.profile,C=void 0!==_&&_,E=(0,a.useState)(!1),S=(0,o.Z)(E,2),b=S[0],I=S[1],N=(0,a.useState)(x),k=(0,o.Z)(N,2),T=k[0],F=k[1],D=(0,a.useState)([]),U=(0,o.Z)(D,2),j=(U[0],U[1]),B=(0,a.useState)(!1),P=(0,o.Z)(B,2),H=P[0],M=P[1],z=(0,a.useState)(!1),L=(0,o.Z)(z,2),W=L[0],O=L[1],V=(0,a.useState)(!1),X=(0,o.Z)(V,2),R=X[0],Y=X[1],q=(0,a.useState)(""),J=(0,o.Z)(q,2),$=J[0],G=(J[1],(0,a.useState)([])),Q=(0,o.Z)(G,2),K=(Q[0],Q[1]),ee=(0,a.useState)({filterActive:!1,departments_filteredIds:[],positions_filteredIds:[]}),te=(0,o.Z)(ee,2),ne=te[0],ie=(te[1],(0,a.useState)(!1)),oe=(0,o.Z)(ie,2),ae=(oe[0],oe[1],(0,a.useState)(!1)),le=(0,o.Z)(ae,2),re=le[0],se=le[1],ce=(0,l.I0)(),me=(0,r.s0)();(0,a.useEffect)((function(){I(!0),(0,d.pH)().pipe((0,s.P)()).subscribe({next:function(e){j(e)}}),ce((0,Z.IW)(!C)),0==x.length&&(se(!0),(0,d.AW)().pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length?(M(!0),se(!1)):(F((0,i.Z)(e)),se(!1))},error:function(e){se(!1)},complete:function(){se(!1)}}))}),[]),(0,a.useEffect)((function(){var e=null===T||void 0===T?void 0:T.find((function(e){return e.id==new URLSearchParams(null===t||void 0===t?void 0:t.search).get("userId")}));e&&ue(e)}),[null===t||void 0===t?void 0:t.search,T]),(0,a.useEffect)((function(){if(ne.filterActive){var e=[].concat((0,i.Z)(ne.departments_filteredIds),(0,i.Z)(ne.positions_filteredIds));(null===e||void 0===e?void 0:e.length)>0&&K((0,i.Z)(e))}}),[ne]);var ue=function(e){me("/user-profile",{state:{user:e}})};return a.createElement("div",{className:y.Z.usersHost},a.createElement("div",{style:{margin:"100px 0 0 0"}},a.createElement(A.Z,{headerTitle:C?"My Profile":"Users",targetProcessing:!1})),b&&a.createElement("span",{className:y.Z.loadingIndicator},a.createElement(p.$j,{type:"BallTriangle",color:"var(--app-color-gray-dark)",height:30,width:"".concat(30,"px")})),a.createElement("br",null),a.createElement("div",{style:{display:C?"none":"flex"}},a.createElement(f.Z,{title:"Add Users",clicked:function(){Y(!0)},style:{width:"150px"}}),a.createElement(f.Z,{light:!0,clicked:function(){se(!0),(0,d.AW)(!0).pipe((0,c.q)(1)).subscribe({next:function(e){0===e.length?(M(!0),se(!1)):(F((0,i.Z)(e)),se(!1))},error:function(e){se(!1)},complete:function(){se(!1)}})},icon:a.createElement("img",{src:m.Fdh}),loading:re})),a.createElement("br",null),H?a.createElement("div",{className:y.Z.noTeamMembers},a.createElement("img",{src:m.tfg,alt:""}),a.createElement("p",null,"There are currently no team members."),a.createElement(f.Z,{title:"Add Users",clicked:function(){u({eightModalVisible:!0,hideSkipBtn:!0}),h(!0),window.scrollTo(0,0)}})):a.createElement("div",{className:y.Z.colleaguesSection},a.createElement("div",{className:y.Z.rightSideContainer},C?a.createElement("div",{style:{padding:"10px"}},a.createElement(v.Z,{photo:n.photo,firstName:null===n||void 0===n?void 0:n.first_name,lastName:null===n||void 0===n?void 0:n.last_name,position:null===n||void 0===n?void 0:n.phone,email:null===n||void 0===n?void 0:n.email,cardClicked:function(){}})):(null===T||void 0===T?void 0:T.length)>0&&(null===T||void 0===T?void 0:T.map((function(e,t){var n,i;return a.createElement("div",{key:t,style:{padding:"10px"}},a.createElement(v.Z,{photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,position:null===e||void 0===e||null===(n=e.positions)||void 0===n||null===(i=n.slice(0,1))||void 0===i?void 0:i.map((function(e){return e.name})),email:null===e||void 0===e?void 0:e.email,cardClicked:function(){return ue(e)}}))}))))),W&&a.createElement(g.Z,{isVisible:W,activeItem:$,handleClose:function(){O(!1)},isAdmin:n.is_admin}),R&&a.createElement(w,{hasTutorial:!0,modalVisible:R,closeButtonAction:function(){return Y(!1)},backButtonAction:function(){return Y(!1)},shadowedContainerStyle:{minWidth:"1110px",minHeight:"725px"},modalWrapperStyle:{minWidth:"1110px",minHeight:"725px"},onContinueButtonAction:function(){Y(!1)},onCancel:function(){return Y(!1)}}))}))},71871:function(e,t){t.Z={companyHost:"Company_companyHost__1GYT8",usersHost:"Company_usersHost__p8GWh",bottomText:"Company_bottomText__zDv3N",topText:"Company_topText__vAlwF",textSection:"Company_textSection__DAJA1",noColleaguesBackground:"Company_noColleaguesBackground__g-5lD",noColleaguesContainer:"Company_noColleaguesContainer__J7xsh",noColleaguesInnerContainer:"Company_noColleaguesInnerContainer__Yk6up",noColleaguesSection:"Company_noColleaguesSection__M4I8S",bottomOrgTextContainer:"Company_bottomOrgTextContainer__qI5VQ",orgChartContainer:"Company_orgChartContainer__PyWaw",orgChartSection:"Company_orgChartSection__6rgj1",noTeamMembers:"Company_noTeamMembers__gl1Rb",colleaguesSection:"Company_colleaguesSection__FXaYO",leftSideContainer:"Company_leftSideContainer__opyjV",rightSideContainer:"Company_rightSideContainer__5J8j0",loadingIndicator:"Company_loadingIndicator__PkUK1",filterButton:"Company_filterButton__Q2REB",filterButtonIcon:"Company_filterButtonIcon__wBrgi",resetFilterButton:"Company_resetFilterButton__-4+z3",resetFilterButtonIcon:"Company_resetFilterButtonIcon__7RFA1",navbarSection:"Company_navbarSection__81sPj",logoUrlImg:"Company_logoUrlImg__GrM4O",logoUrlImgM:"Company_logoUrlImgM__PwIpA",banner:"Company_banner__+lHF-",banner2:"Company_banner2__joTvv",companyHome:"Company_companyHome__-zveT",centerDiv:"Company_centerDiv__tWVJO"}}}]);
//# sourceMappingURL=209.767967e7.chunk.js.map