"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[408],{46408:function(e,t,a){a.r(t),a.d(t,{LabeledContainer:function(){return P}});var l=a(1413),r=a(29439),n=a(67861),i=a(29118),o=a(39518),s=a(11577),d=a(43984),u=a(75105),c=a(89293),_=a(96189),m=a(61616),v=a(29),p=a(73500),f=a(88374),y=a(23280),P=function(e){var t=e.label,a=e.children,l=e.readOnly;return n.createElement("div",{className:v.Z.labeledContainerHost,style:{width:p.tq?"100%":"50%"},"app-readonly":l?"true":"false"},n.createElement("p",{className:v.Z.labeledContainerLabel},t),a)},b=function(e){var t=e.label,a=e.error,l=e.children,r=e.wrappedContent;return n.createElement("div",{className:v.Z.labeledFieldHost},n.createElement("label",{className:v.Z.labeledFieldLabel},t),r?n.createElement("div",{className:v.Z.labeledFieldChildrenContainer},l):l,(null===a||void 0===a?void 0:a.length)>0&&n.createElement("p",{className:v.Z.labeledFieldError},a))};t.default=(0,o.$j)((function(e){return{authenticatedUser:e.authReducer.authenticatedUser,user:e.sessionReducer.user,components:e.flowReducer.components}}),(function(e){return{onSetAuthenticatedUserPosition:function(t){return e((0,d.IF)(t))}}}))((function(e){var t,a,d,P,g=e.authenticatedUser,h=(0,n.useState)(""),C=(0,r.Z)(h,2)[1],E=(0,n.useState)(g),x=(0,r.Z)(E,2),Z=x[0],w=x[1],M=(0,n.useState)(""),F=(0,r.Z)(M,2),S=F[0],N=F[1],T=(0,n.useState)(""),k=(0,r.Z)(T,2),U=k[0],j=k[1],I=(0,n.useState)(""),D=(0,r.Z)(I,2),G=D[0],H=D[1],L=(0,n.useState)(""),O=(0,r.Z)(L,2),R=O[0],q=O[1],A=(0,n.useState)(""),W=(0,r.Z)(A,2),B=W[0],z=W[1],K=(0,n.useState)(!1),J=(0,r.Z)(K,2),V=J[0],X=J[1],Y=(0,n.useState)(!1),Q=(0,r.Z)(Y,2)[1],$=(0,n.useState)(!1),ee=(0,r.Z)($,2),te=ee[0],ae=ee[1],le=(0,y.TH)().state;document.title="My Profile | ".concat(c.iC);var re=(0,y.s0)(),ne=(0,o.I0)(),ie=(0,n.useCallback)((function(e){return e.forEach((function(e){var t,a;if(C(""),(null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.toString().indexOf("image/"))>-1&&["jpeg","jpg","png"].indexOf(null===e||void 0===e||null===(a=e.type)||void 0===a?void 0:a.toString().split("/")[1])>-1){var l=new FileReader;l.readAsDataURL(e),l.onloadend=function(t){(new FormData).append("avatar",e),(0,u.xx)(Z.id,e).subscribe({next:function(e){w(e)},error:function(e){C(null===e||void 0===e?void 0:e.data)}})}}}))}),[]),oe=(0,i.uI)({onDrop:ie}),se=(oe.getRootProps,oe.getInputProps,oe.isDragActive,(0,n.useState)("")),de=(0,r.Z)(se,2),ue=de[0],ce=de[1],_e=(0,n.useState)(""),me=(0,r.Z)(_e,2),ve=me[0],pe=me[1];(0,n.useEffect)((function(){var e;ce(""),(null===le||void 0===le||null===(e=le.user)||void 0===e?void 0:e.id.length)>0&&(w(le.user),ne((0,f.IW)(!1))),ne((0,f.tR)(!1))}),[]);var fe=(0,n.useState)({first_name:"",last_name:"",mobile:"",address:"",city:"",postal:""}),ye=(0,r.Z)(fe,2),Pe=ye[0],be=ye[1],ge=(0,n.useState)({first_name:!1,last_name:!1,mobile:!1,address:!1,city:!1,postal:!1}),he=(0,r.Z)(ge,2),Ce=he[0],Ee=he[1],xe=(0,n.useCallback)((function(){Object.values(Ce).some((function(e){return!0===e}))&&(be({first_name:"",last_name:"",mobile:"",address:"",city:"",postal:""}),pe(""),(0,u.TP)(Z.id,Z.first_name,Z.last_name,Z.phone,Z.address,Z.city,Z.postal).pipe((0,s.P)()).subscribe({next:function(){Ee({first_name:!1,last_name:!1,mobile:!1,address:!1,city:!1,postal:!1})},error:function(e){var t,a,r,n,i,o,s={first_name:"",last_name:"",mobile:"",address:"",city:"",postal:""};e.data.errors.first_name&&(s.first_name=null===(t=e.data.errors.first_name)||void 0===t?void 0:t.join("; "));e.data.errors.last_name&&(s.last_name=null===(a=e.data.errors.last_name)||void 0===a?void 0:a.join("; "));e.data.errors.mobile&&(s.mobile=null===(r=e.data.errors.mobile)||void 0===r?void 0:r.join("; "));e.data.errors.address&&(s.address=null===(n=e.data.errors.address)||void 0===n?void 0:n.join("; "));e.data.errors.city&&(s.city=null===(i=e.data.errors.city)||void 0===i?void 0:i.join("; "));e.data.errors.postal&&(s.postal=null===(o=e.data.errors.postal)||void 0===o?void 0:o.join("; "));"The given data was invalid."!==e.data.message&&pe(e.data.message),be((function(e){return(0,l.Z)((0,l.Z)({},e),s)}))}}))}),[Z,Ce]);return n.createElement("div",{id:"my-profile-settings",className:v.Z.host,style:{padding:p.tq?"10px":""}},(null===le||void 0===le||null===(t=le.user)||void 0===t||null===(a=t.id)||void 0===a?void 0:a.length)>0&&1==g.is_admin?n.createElement("div",{style:{width:"70%",display:"flex",justifyContent:"space-between"}},n.createElement(_.zx,{title:"Back",clicked:function(){return re("/users")},style:{width:"100px"}}),(null===le||void 0===le?void 0:le.user)&&n.createElement(_.zx,{title:"Show Tasks",loading:V,light:!0,clicked:function(){return Q(!0)}})):n.createElement("div",{style:{margin:"80px 0 0 0",display:p.tq?"none":""}},n.createElement(m.Z,{headerTitle:"Change Account Password",targetProcessing:!1})),n.createElement("div",{className:v.Z.labeledContainerHost,style:{width:p.tq?"100%":"50%"}},n.createElement("div",{className:v.Z.userDataWrapper},n.createElement(_.sm,{className:v.Z.userSettingsContainer,style:{padding:p.tq?"0":""},onClickOutside:xe},n.createElement("div",{style:{display:p.tq?"":"flex",gap:"24px",marginTop:"15px",width:"100%"}},n.createElement("div",{style:{flex:1}},n.createElement(b,{label:(null===le||void 0===le||null===(d=le.user)||void 0===d||null===(P=d.id)||void 0===P?void 0:P.length)>0&&1==g.is_admin?"Admin Password":"Old Password",error:Pe.first_name},n.createElement("input",{type:"password",name:"old-password",className:v.Z.inputField,value:S,onChange:function(e){return N(e.target.value)}}))),n.createElement("div",{style:{flex:1}},n.createElement(b,{label:"New Password",error:Pe.first_name},n.createElement("input",{type:"password",name:"new-password",className:v.Z.inputField,value:G,onChange:function(e){return H(e.target.value)}}))),n.createElement("div",{style:{flex:1}},n.createElement(b,{label:"Verify New Password",error:Pe.last_name},n.createElement("input",{type:"password",name:"verify-password",className:v.Z.inputField,value:R,onChange:function(e){return q(e.target.value)}})))),n.createElement("div",{style:{display:"flex"}},S.length>5&&G.length>5&&R.length>5&&n.createElement("div",{style:{display:"flex",gap:"24px",marginTop:"15px",maxWidth:"100%"}},n.createElement(_.zx,{title:"Update password",loading:V,lighter:!0,clicked:function(){if(X(!0),G!==R)return X(!1),z("Confirmation does not match");(0,u.N4)(S,G,R,Z.id).pipe((0,s.P)()).subscribe({next:function(){X(!1),ae(!0),j(""),z(""),ve(""),ue("")},error:function(e){var t,a,l,r;(console.log(e),null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(a=t.errors)&&void 0!==a&&a.old_password)&&j(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(r=l.errors)||void 0===r?void 0:r.old_password[0]);X(!1),ae(!1)},complete:function(){N(""),H(""),q("")}})}}))),n.createElement("div",null,te&&n.createElement("p",{className:v.Z.success},"Password Successfully changed")),n.createElement("div",null,(null===U||void 0===U?void 0:U.length)>0&&n.createElement("p",{className:v.Z.errorGeneralText},U)),n.createElement("div",null,(null===B||void 0===B?void 0:B.length)>0&&n.createElement("p",{className:v.Z.errorGeneralText},B)),n.createElement("div",null,(null===ue||void 0===ue?void 0:ue.length)>0&&n.createElement("p",{className:v.Z.errorGeneralText},ue)),n.createElement("div",null,(null===ve||void 0===ve?void 0:ve.length)>0&&n.createElement("p",{className:v.Z.errorGeneralText},ve))))))}))},29:function(e,t){t.Z={host:"MyProfile_host__Bnmii",labeledContainerHost:"MyProfile_labeledContainerHost__IQZCc",labeledContainerLabel:"MyProfile_labeledContainerLabel__Tg+ZM",avatarDragContainer:"MyProfile_avatarDragContainer__1jOhu",avatarUploadIcon:"MyProfile_avatarUploadIcon__sZ016",avatarUploadText:"MyProfile_avatarUploadText__9UN2K",avatarAcceptedFormatsText:"MyProfile_avatarAcceptedFormatsText__zXNGB",avatarUploadPictureContainer:"MyProfile_avatarUploadPictureContainer__jjcmU",avatarUploadPictureText:"MyProfile_avatarUploadPictureText__6Jnly",avatarDragInput:"MyProfile_avatarDragInput__90brU",avatarContentContainer:"MyProfile_avatarContentContainer__kqcIC",avatarUrlImg:"MyProfile_avatarUrlImg__yCO7Y",avatarErrorText:"MyProfile_avatarErrorText__nxaLE",labeledFieldHost:"MyProfile_labeledFieldHost__hKuOZ",labeledFieldLabel:"MyProfile_labeledFieldLabel__cdIoV",labeledFieldChildrenContainer:"MyProfile_labeledFieldChildrenContainer__sG4-y",labeledFieldError:"MyProfile_labeledFieldError__xG-9G",label:"MyProfile_label__efRly",inputField:"MyProfile_inputField__RqYBM",emailParagraph:"MyProfile_emailParagraph__XK4WI",positionsParagraph:"MyProfile_positionsParagraph__LuOSk",errorGeneralText:"MyProfile_errorGeneralText__JSHju",success:"MyProfile_success__f1kym",userDataWrapper:"MyProfile_userDataWrapper__k9v75",userSettingsContainer:"MyProfile_userSettingsContainer__lwFPb",deletePositionContainer:"MyProfile_deletePositionContainer__HGaAl",deletePosition_title:"MyProfile_deletePosition_title__3lF+T",deletePosition_description:"MyProfile_deletePosition_description__1MKdp",deletePosition_checkboxContainer:"MyProfile_deletePosition_checkboxContainer__8r2sD",deletePosition_buttonContainer:"MyProfile_deletePosition_buttonContainer__0eBDk"}}}]);
//# sourceMappingURL=408.99b5a349.chunk.js.map