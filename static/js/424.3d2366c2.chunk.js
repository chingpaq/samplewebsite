"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[424],{87424:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var n=a(74165),l=a(93433),r=a(15861),c=a(29439),i=a(67861),s=(a(60940),"CheckoutPage_checkoutPageHost__O6Y0r"),o="CheckoutPage_checkoutTop__a8Ke9",u="CheckoutPage_checkoutContent__jV+8M",m="CheckoutPage_checkoutLeftContainer__uCaxb",d="CheckoutPage_pageTitle__qI+QM",p="CheckoutPage_sectionTitle__5+HAr",v="CheckoutPage_inputRow__zQJ2Y",y="CheckoutPage_inputContainer__B0SjF",g="CheckoutPage_cardContainer__NY+g4",h="CheckoutPage_stripeCardNumberContainer__sjjAW",E="CheckoutPage_inputField__Wz1Ve",f="CheckoutPage_checkoutRightContainer__sSAwU",b="CheckoutPage_productsContainer__2SOt1",_="CheckoutPage_products__DuYZP",C="CheckoutPage_planContainer__fk9gT",N="CheckoutPage_planTitle__ymDCz",x="CheckoutPage_price__YeVwJ",P="CheckoutPage_planDetails__PYyTM",k="CheckoutPage_priceDetails__9FXhe",w="CheckoutPage_payButton__xJ0+0",S="CheckoutPage_planTitleBlue__wP0eR",Z="CheckoutPage_endingMessage__qtIa5",L="CheckoutPage_phoneIInput__sSySJ",D="CheckoutPage_phoneContainer__pnf9K",T=a(59565),Y=a(40694),A=a(23280),I=a(27658),q=a(34710),M=a(11577),R=a(96189),B=a(89293),j=a(66180),H=a.n(j),F=(a(33500),a(50981)),V=a.n(F),z=a(30994),J=a(88374),K=a(39518),W=a(73500),O=a(88827),U=function(e){var t,a,j,U,X,G,$=(0,A.s0)(),ee=e.onSuccess,te=e.onClose,ae=void 0===te?function(){return $("/billing-info")}:te,ne=e.subscriptionInfo,le=void 0===ne?{}:ne,re=e.companyData,ce=void 0===re?{email:""}:re,ie=e.paymentPath,se=void 0===ie?"payments":ie,oe=e.withBack,ue=void 0===oe||oe,me=e.label,de=void 0===me?"Plan":me,pe=e.onError,ve=void 0===pe?function(){}:pe,ye=(0,K.v9)((function(e){return e.flowReducer})),ge=ye.payable,he=(0,i.useRef)(),Ee=(0,K.I0)(),fe=(0,i.useState)(""),be=(0,c.Z)(fe,2),_e=be[0],Ce=be[1],Ne=(0,i.useState)(""),xe=(0,c.Z)(Ne,2),Pe=xe[0],ke=xe[1],we=(0,i.useState)(""),Se=(0,c.Z)(we,2),Ze=Se[0],Le=Se[1],De=(0,i.useState)(""),Te=(0,c.Z)(De,2),Ye=Te[0],Ae=Te[1],Ie=(0,i.useState)(""),qe=(0,c.Z)(Ie,2),Me=qe[0],Re=qe[1],Be=(0,i.useState)(""),je=(0,c.Z)(Be,2),He=je[0],Fe=je[1],Ve=(0,i.useState)(""),ze=(0,c.Z)(Ve,2),Je=ze[0],Ke=ze[1],We=(0,i.useState)(""),Oe=(0,c.Z)(We,2),Ue=Oe[0],Qe=Oe[1],Xe=(0,i.useState)(""),Ge=(0,c.Z)(Xe,2),$e=Ge[0],et=Ge[1],tt=(0,i.useState)(""),at=(0,c.Z)(tt,2),nt=at[0],lt=at[1],rt=(0,i.useState)("4343434343434345"),ct=(0,c.Z)(rt,2),it=ct[0],st=ct[1],ot=(0,i.useState)(""),ut=(0,c.Z)(ot,2),mt=ut[0],dt=ut[1],pt=(0,i.useState)(""),vt=(0,c.Z)(pt,2),yt=vt[0],gt=vt[1],ht=(0,i.useState)(""),Et=(0,c.Z)(ht,2),ft=Et[0],bt=Et[1],_t=(0,i.useState)(!1),Ct=(0,c.Z)(_t,2),Nt=Ct[0],xt=Ct[1],Pt=(0,i.useState)(""),kt=(0,c.Z)(Pt,2),wt=kt[0],St=kt[1],Zt=(0,i.useState)(!1),Lt=(0,c.Z)(Zt,2),Dt=Lt[0],Tt=Lt[1],Yt=(0,i.useState)(""),At=(0,c.Z)(Yt,2),It=At[0],qt=At[1],Mt=(0,i.useState)(!1),Rt=(0,c.Z)(Mt,1)[0],Bt=(0,T.useStripe)(),jt=(0,T.useElements)(),Ht=(0,A.TH)(),Ft=(0,i.useState)(null!==(t=null===Ht||void 0===Ht||null===(a=Ht.state)||void 0===a?void 0:a.subscriptionInfo)&&void 0!==t?t:le),Vt=(0,c.Z)(Ft,1)[0],zt=(0,i.useState)(null!==(j=null===Ht||void 0===Ht||null===(U=Ht.state)||void 0===U?void 0:U.companyData)&&void 0!==j?j:ce),Jt=(0,c.Z)(zt,1)[0],Kt=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r,c,s,o,u,m,d,p,v,y,g;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(St(""),""!==z.lw||""!==nt){e.next=4;break}return St("Please enter card owner name."),e.abrupt("return");case 4:if(t.preventDefault(),Bt&&jt){e.next=8;break}if(z.lw){e.next=8;break}return e.abrupt("return");case 8:if(xt(!0),St(""),a=[],""===_e&&a.push("first name"),""===Pe&&a.push("last name"),""===ft&&a.push("email"),""===Ze&&a.push("full address"),""===Ye&&a.push("city"),""===Me&&a.push("postal Code"),""===$e&&""===z.lw&&a.push("phone Number"),!(a.length>0)){e.next=24;break}return a=a.map((function(e,t){return i.createElement("li",{key:t},e)})),r=function(){return i.createElement(i.Fragment,null,i.createElement("span",null,"Please fill in all input fields:"),i.createElement("ul",null,a))},xt(!1),St(r),e.abrupt("return");case 24:if(c=function(){return Rt||""===_e&&""===Pe&&""===Ze&&""===Ye&&""===Me&&""===He&&""===Je&&""===Ue&&""===$e?{}:{name:_e+" "+Pe,address:{city:Ye,country:He,line1:Ze,postal_code:Me,state:Je},phone:$e,email:Jt.email}},""!==z.lw){e.next=37;break}return o={type:"card",card:jt.getElement(T.CardElement),billing_details:c()},e.next=29,Bt.createPaymentMethod(o);case 29:if(void 0===(u=e.sent).error){e.next=34;break}return xt(!1),St(null!==(m=null===(d=u.error)||void 0===d?void 0:d.message)&&void 0!==m?m:"Invalid card details"),e.abrupt("return");case 34:(0,I.AK)(null===Vt||void 0===Vt?void 0:Vt.billable_users.length,null===Vt||void 0===Vt?void 0:Vt.price_code,null===(s=u.paymentMethod)||void 0===s?void 0:s.id).pipe((0,M.P)()).subscribe({next:function(e){"Add Subscription successful"===e.message&&(qt(e.data.stripe_id),Tt(!0),(0,q.aK)().pipe((0,M.P)()).subscribe({}))},complete:function(){},error:function(e){void 0!=e.data?St(e.data.message.message):St("Payment error. Please check your card"),xt(!1)}}),e.next=40;break;case 37:g=null!==(p=null===le||void 0===le?void 0:le.ref)&&void 0!==p?p:(0,B.mR)(),Ee((0,J.zt)({id:g,subscriptionInfo:Vt})),(0,I.JE)('[{"amount":'.concat(100*(null===Vt||void 0===Vt?void 0:Vt.total),',"currency":"PHP","description":"').concat(null!==(v=null===Vt||void 0===Vt?void 0:Vt.plan)&&void 0!==v?v:"Subscription",'","name":"').concat(null!==(y=null===Vt||void 0===Vt?void 0:Vt.plan)&&void 0!==y?y:"Subscription",'","quantity":1}]'),'{"address":{"line1":"'.concat(Ze,'","city":"').concat(Ye,'","state":"').concat(Je,'","postal_code":"').concat(Me,'","country": "PH"},"name":"').concat(_e," ").concat(Pe,'","email":"').concat(ft,'"}'),'"'.concat(z.Hf,"#/").concat(se,"/").concat(g,'"'),'"'.concat(g,'"')).pipe((0,M.P)()).subscribe({next:function(e){var t;null!==(t=e.data)&&void 0!==t&&t.attributes&&(O.h.dispatch((0,J.Wy)([].concat((0,l.Z)(ge),[{user_id:Vt.user_id,amount:null===Vt||void 0===Vt?void 0:Vt.total,currency:"PHP",paymentID:g,id:null===Vt||void 0===Vt?void 0:Vt.id,product:null===Vt||void 0===Vt?void 0:Vt.plan}]))),window.location.replace(e.data.attributes.checkout_url))},complete:function(){},error:function(e){xt(!1),St("Payment error.Please contact your administrator"),ve("Payment error.Please contact your administrator")}});case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.createElement("div",{className:s},ue&&i.createElement("div",{className:o},i.createElement(Y.Z,{clicked:ae,title:"Back"})),i.createElement("div",{className:u,style:{padding:W.tq?"15px":""}},i.createElement("div",{className:m,style:{width:W.tq?"100%":"",display:Vt?"":"none"}},i.createElement("p",{className:d},"Complete your Purchase"),i.createElement("div",{style:{display:""===z.lw?"":"none"}},i.createElement("p",{className:p,style:{marginTop:"0px"}},"Payment Information"),i.createElement("div",{className:v},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Name on Card *"}),i.createElement("input",{value:nt,onChange:function(e){return lt(e.target.value)},type:"text",name:"state",className:E}))),i.createElement("div",{className:v},z.lw?i.createElement("div",{className:y,style:{display:"flex"}},i.createElement("div",{className:g},i.createElement(R.Lb,{title:"Card Number"}),i.createElement("input",{value:it,required:!0,minLength:16,maxLength:16,onChange:function(e){return st(e.target.value)},type:"text",name:"state",className:E})),i.createElement("div",{className:g,style:{width:"30%"}},i.createElement(R.Lb,{title:"Expiry"}),i.createElement("input",{value:mt,required:!0,placeholder:"MM / YY",onChange:function(e){return dt(e.target.value)},type:"month",name:"state",className:E})),i.createElement("div",{className:g,style:{width:"10%",marginRight:"0px"}},i.createElement(R.Lb,{title:"CVC"}),i.createElement("input",{value:yt,required:!0,minLength:3,maxLength:3,placeholder:"CVC",onChange:function(e){return gt(e.target.value)},type:"integer",name:"state",className:E}))):i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Card Number *"}),i.createElement(T.CardElement,{id:"cc-number",className:h})))),i.createElement("p",{className:p,style:{marginTop:"0px"}},"Payment Information"),i.createElement("form",{ref:he,style:{display:!0===Rt?"none":""}},i.createElement("div",{className:v,style:{flexDirection:W.tq?"column":"row"}},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"First Name"}),i.createElement("input",{value:_e,onChange:function(e){return Ce(e.target.value)},style:{marginRight:"30px"},type:"text",name:"first-name",className:E})),i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Last Name"}),i.createElement("input",{value:Pe,onChange:function(e){return ke(e.target.value)},type:"text",name:"last-name",className:E}))),i.createElement("div",{className:v,style:{flexDirection:W.tq?"column":"row"}},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Email"}),i.createElement("input",{value:ft,onChange:function(e){return bt(e.target.value)},style:{marginRight:"30px"},type:"text",name:"email",className:E}))),i.createElement("div",{className:v,style:{flexDirection:W.tq?"column":"row"}},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Full Address"}),i.createElement("input",{value:Ze,onChange:function(e){return Le(e.target.value)},style:{marginRight:"30px"},type:"text",name:"full-address",className:E}))),i.createElement("div",{className:v,style:{flexDirection:W.tq?"column":"row"}},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"City"}),i.createElement("input",{value:Ye,onChange:function(e){return Ae(e.target.value)},style:{marginRight:"30px"},type:"text",name:"city",className:E})),i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Postal Code"}),i.createElement("input",{value:Me,onChange:function(e){return Re(e.target.value)},type:"text",name:"postal-code",className:E}))),i.createElement("div",{className:v,style:{flexDirection:W.tq?"column":"row"}},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Country"}),i.createElement("input",{value:He,onChange:function(e){return Fe(e.target.value)},type:"text",name:"country",className:E})),i.createElement("div",{className:y},i.createElement(R.Lb,{title:"State"}),i.createElement("input",{value:Je,onChange:function(e){return Ke(e.target.value)},type:"text",name:"state",className:E}))),i.createElement("div",{className:v,style:{display:""===z.lw?"":"none"}},i.createElement("div",{className:y},i.createElement(R.Lb,{title:"VAT/TAX ID"}),i.createElement("input",{value:Ue,onChange:function(e){return Qe(e.target.value)},style:{marginRight:"30px"},type:"text",name:"vat",className:E})),i.createElement("div",{className:y},i.createElement(R.Lb,{title:"Phone"}),i.createElement("div",{className:D},i.createElement(H(),{country:"ph",value:$e,onChange:function(e){return et(e)},inputClass:L,specialLabel:"",placeholder:"Enter number here...",inputStyle:{border:"none",width:"100%"}})))))),i.createElement("div",{className:f},i.createElement("div",{className:b},i.createElement("p",{className:_},"Products"),i.createElement("div",{className:C},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"}},Vt?i.createElement("p",{className:N},null===Vt||void 0===Vt?void 0:Vt.plan):i.createElement("p",{className:N},Ht.state.price.description),Vt?i.createElement("p",{className:x},null===Vt||void 0===Vt?void 0:Vt.currency," ",null===Vt||void 0===Vt?void 0:Vt.plan_price):i.createElement("p",{className:x},Ht.state.price.currency," ",Ht.state.price.price)),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px",marginBottom:"5px"}},Vt&&i.createElement("p",{className:P},de),Vt&&i.createElement("p",{className:k},null===Vt||void 0===Vt?void 0:Vt.dlabel))),i.createElement("hr",{style:{borderTop:"1px solid #D2D2D2",margin:"5%"}}),i.createElement("div",{style:{display:void 0===(null===Vt||void 0===Vt||null===(X=Vt.billable_users)||void 0===X?void 0:X.length)?"none":"flex",justifyContent:"space-between",margin:"5%",marginBottom:"0px"}},i.createElement("p",{className:N},"Number of users to bill"),i.createElement("p",{className:x},null===Vt||void 0===Vt?void 0:Vt.billable_users.length)),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"5%",marginBottom:"20px"}},i.createElement("p",{className:S},"Total (due today)"),Vt?i.createElement("p",{className:S},null===Vt||void 0===Vt?void 0:Vt.currency," ",null===Vt||void 0===Vt?void 0:Vt.total):i.createElement("p",{className:S},Ht.state.price.currency," ",Ht.state.price.price)),i.createElement(Y.Z,{className:w,disabled:Nt,title:"Pay Now",clicked:Vt?Kt:function(){var e;St(""),xt(!0),(0,I.Ul)(Ht.state.service_name,Ht.state.price.price_code,null!==(e=Ht.state.price.duration)&&void 0!==e?e:null).pipe((0,M.P)()).subscribe({next:function(e){qt(e.data.stripe_id),Tt(!0),(0,q.aK)().pipe((0,M.P)()).subscribe({}),xt(!1)},error:function(e){void 0!=e.data?St(e.data.message.message):St("Payment error. Please check your card."),xt(!1)}})},loading:Nt,style:{backgroundColor:""!==_e&&""!==Pe&&""!==Ze&&""!==Ye&&""!==Me&&""!==He&&""!==Je?"":"black"}}),i.createElement("div",{className:Z,style:{display:void 0===(null===Vt||void 0===Vt||null===(G=Vt.billable_users)||void 0===G?void 0:G.length)?"none":"flex"}},i.createElement("p",null,""!==z.lw?"Payments by":"You can cancel your plan anytime. Your yearly recurrent payment starts on ".concat(V()(new Date((0,F.now)())).add(1,"years").format("MMMM Do, YYYY"),". You will be billed monthly for the number of Employees in your account.")),i.createElement("img",{src:"https://files.readme.io/7586db8-small-paymongo_api_white.png",style:{height:"40px",width:"160px"}})),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"5%",marginBottom:"0px",color:"red"}},wt&&i.createElement("div",null,wt))))),Dt&&i.createElement(Q,{message:It,onSuccess:ee}))},Q=function(e){var t=e.setCompletedModal,a=e.message,n=e.onSuccess;return i.createElement(R.U7,{isOpen:!0,shadowedContainerStyle:{width:"35%",minWidth:"500px",minHeight:"400px"},onClose:function(){return t(!1)},scrollable:!0,blured:!0},i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.createElement("p",{style:{marginTop:"50px",fontSize:"32px",color:"#4A4A4A",marginBottom:"5px",textAlign:"center"}},"Your subscription to ".concat(B.iC," was successful!")),i.createElement("p",{style:{width:"300px",fontFamily:"var(--app-text-main-font)",fontSize:"16px",color:"#4A4A4A",textAlign:"center",marginBottom:"20px"}},"Your payment reference is ".concat(a),i.createElement("br",null),i.createElement("br",null),"You can look for this in your invoices list in the billing page ",i.createElement("br",null),i.createElement("br",null),i.createElement("span",{style:{fontWeight:"700"}},"Thank you for your purchase!")),i.createElement(Y.Z,{style:{width:"200px"},clicked:function(){n(a)},title:"View Invoices"})))}}}]);
//# sourceMappingURL=424.3d2366c2.chunk.js.map