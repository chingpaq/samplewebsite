"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[193],{1193:function(n,e,o){o.r(e),o.d(e,{default:function(){return Z}});var t=o(1413),a=o(93433),i=o(29439),r=o(50981),u=o.n(r),s=o(67861),d=o(39518),l=o(11577),m=(o(60940),o(10103)),c=o(43984),y=o(88374),f=o(71982),p=o(75105),v=o(34710),_=o(89293),g=o(96189),h="CompanySettings_host__BUW5K";var Z=(0,d.$j)((function(n){var e=n.authReducer.authenticatedUser.position,o=n.flowReducer;return{companyData:o.companyData,companyPositionsArray:o.companyPositionsArray,position:e,companyUsersArray:o.companyUsersArray}}),(function(n){return{onSetCompanyDataField:function(e){return n((0,y.QK)(e))},onSetAuthenticatedUserPosition:function(e){return n((0,c.IF)(e))},onTutorialModalOpen:function(e){return n((0,f.ay)(e))}}}))((function(n){var e,o,r,d=n.companyUsersArray,c=n.companyData,y=n.position,f=(0,s.useState)(!0),Z=(0,i.Z)(f,2)[1],Y=(0,s.useState)((0,a.Z)(null!==(e=d.map((function(n){var e;return{id:n.id,first_name:n.first_name,last_name:n.last_name,email:n.email,position:"".concat(null===(e=n.positions)||void 0===e?void 0:e.map((function(n){return n.name})).join(", ")),is_admin:n.is_admin,photo:n.photo,timezone:n.timezone}})))&&void 0!==e?e:[])),D=(0,i.Z)(Y,2)[1],b=c.name,C=c.founding_date,S=c.employees_no,M=c.industry,A=(0,s.useState)({name:(null===c||void 0===c||null===(o=c.name)||void 0===o?void 0:o.length)>2,display_name:(null===c||void 0===c||null===(r=c.display_name)||void 0===r?void 0:r.length)>2,founding_date:u()(c.founding_date,"YYYY-MM-DD").diff(u()().format("YYYY-MM-DD"))<0,employees_no:_.rT.some((function(n){return n.value===c.employees_no})),industry:null===_.No||void 0===_.No?void 0:_.No.some((function(n){return n.label==c.industry}))}),N=(0,i.Z)(A,2),k=N[0],E=N[1],U=(0,s.useState)(""),w=(0,i.Z)(U,1)[0],P=(0,s.useState)({name:"",display_name:"",founding_date:"",employees_no:"",industry:""}),T=(0,i.Z)(P,2),R=T[0],j=T[1];(0,s.useEffect)((function(){(0,p.AW)().pipe((0,m.q)(1)).subscribe({next:function(n){D((0,a.Z)(null!==n&&void 0!==n?n:[]))},error:function(n){w(n.data)},complete:function(){}})}),[]);var z=(0,s.useCallback)((function(){var n,e,o,a,i;j({name:"",display_name:"",founding_date:"",employees_no:"",industry:"",misc_info:""});var r=!1;return(null===c||void 0===c||null===(n=c.name)||void 0===n?void 0:n.length)<2&&(j((function(n){return(0,t.Z)((0,t.Z)({},n),{},{name:"Company name must have at least 2 characters"})})),r=!0),(null===c||void 0===c||null===(e=c.display_name)||void 0===e?void 0:e.length)<2&&(j((function(n){return(0,t.Z)((0,t.Z)({},n),{},{display_name:"Company display name must have at least 2 characters"})})),r=!0),u()(c.founding_date,"YYYY-MM-DD").diff(u()().format("YYYY-MM-DD"))>0&&(j((function(n){return(0,t.Z)((0,t.Z)({},n),{},{founding_date:"Company's founding date is not a valid date"})})),r=!0),((null===c||void 0===c||null===(o=c.employees_no)||void 0===o?void 0:o.toString().length)<3||!_.rT.some((function(n){return n.value===c.employees_no})))&&(j((function(n){return(0,t.Z)((0,t.Z)({},n),{},{employees_no:"Employees' number is not valid. \nStored value (".concat(null===c||void 0===c?void 0:c.employees_no,") is not matching any selectable range")})})),r=!0),((null===c||void 0===c||null===(a=c.industry)||void 0===a?void 0:a.length)<3||null===_.No||void 0===_.No||!_.No.some((function(n){return n.label==c.industry})))&&(j((function(n){return(0,t.Z)((0,t.Z)({},n),{},{industry:"Industry field entry is not valid"})})),r=!0),(null===c||void 0===c||null===(i=c.name)||void 0===i?void 0:i.length)>0&&((null===b||void 0===b?void 0:b.length)>0?Z(!1):Z(!0)),r}),[c,C,S,M,k]);return(0,s.useEffect)((function(){k.industry&&z()}),[c,y]),s.createElement("div",{id:"company-settings",className:h},s.createElement(g.o4,{datePickerRC:!0,feValidation:(0,t.Z)({},R),sendCompanyDetails:function(n){(0,v.sy)(n).pipe((0,l.P)()).subscribe({error:function(n){var e={name:"",display_name:"",founding_date:"",employees_no:"",industry:""};n.data.errors.name&&(e.name=n.data.errors.name[0]),n.data.errors.display_name&&(e.display_name=n.data.errors.display_name[0]),n.data.errors.founding_date&&(e.founding_date=n.data.errors.founding_date[0]),n.data.errors.employees_no&&(e.employees_no=n.data.errors.employees_no[0]),n.data.errors.industry&&(e.industry=n.data.errors.industry[0]),j((function(n){return(0,t.Z)((0,t.Z)({},n),e)}))}})},setElementsTouched:E}))}))}}]);
//# sourceMappingURL=193.c4228023.chunk.js.map