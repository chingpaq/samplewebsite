"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[200],{82200:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var o=n(87462),i=n(1413),l=n(29439),r=n(67861),s="BeginModule_headerContainer__6l-gP",d="BeginModule_modalLabelHeader__EVne0",a="BeginModule_modalLabel__WZVSY",u="BeginModule_modalButtons__bAjdy",c="BeginModule_importArea__2hmJ7",p="BeginModule_importText__YhRY+",v=n(39518),f=n(10103),m=n(11577),h=n(65019),g=n(88550),x=n(93389);var y,E,b,w,_,Z,M,k,S=function(e,t){void 0===e&&(e=!0);var n=(0,r.useCallback)((function(n){if("function"!==typeof e||e())return n.preventDefault(),t&&(n.returnValue=t),t}),[e,t]);(0,r.useEffect)((function(){if(e)return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"beforeunload",n),function(){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"beforeunload",n)}}),[e,n])},C=n(88827),P=n(88374),I=n(20294),U=n(96189),O=n(73500),z=n(1542),A=n(6073),D=n(43984),L=n(75105),N=n(34665),q=n(23280),T=n(59401),B=n(29118),R=n(41771),Y=n(30168),j=n(43745),V=j.ZP.div(y||(y=(0,Y.Z)(["\n\twidth: 100%;\n\t\n\tmargin: 0 auto;\n\tpadding: 0 16px;\n\tpadding 0 8% 0 8%;\n"]))),F=j.ZP.div(E||(E=(0,Y.Z)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n\tmargin-top: 40px;\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: var(--app-color-gray-lighter);\n\t\theight: 4px;\n\t\twidth: 100%;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\topacity: 0.3;\n\t\tleft: 0;\n\t}\n\t:after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbackground: #4a154b;\n\t\theight: 4px;\n\t\twidth: ",";\n\t\ttop: 50%;\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t}\n"])),(function(e){return e.width})),J=j.ZP.div(b||(b=(0,Y.Z)(["\n\tposition: relative;\n\tz-index: 1;\n"]))),W=j.ZP.div(w||(w=(0,Y.Z)(["\n\twidth: 40px;\n\theight: 40px;\n\tborder-radius: 50%;\n\tbackground-color: #ffffff;\n\tborder: 3px solid ",";\n\ttransition: 0.4s ease;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"])),(function(e){return"completed"===e.step?"black":"var(--app-color-gray-dark)"})),X=j.ZP.span(_||(_=(0,Y.Z)(["\n\tfont-size: 19px;\n\tcolor: var(--app-color-gray-dark);\n\t@media (max-width: 600px) {\n\t\tfont-size: 16px;\n\t}\n"]))),H=j.ZP.div(Z||(Z=(0,Y.Z)(["\n\tposition: absolute;\n\twidth: 300px;\n\ttop: 66px;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]))),Q=j.ZP.span(M||(M=(0,Y.Z)(["\n\tfont-size: 10px;\n\tcolor: var(--app-color-gray-dark);\n\n\t@media (max-width: 800px) {\n\t\tfont-size: 16px;\n\t}\n\t@media (max-width: 600px) {\n\t\tfont-size: 8px;\n\t}\n"]))),$=j.ZP.div(k||(k=(0,Y.Z)(["\n\tfont-size: 26px;\n\tfont-weight: 600;\n\tcolor: #4a154b;\n\t-ms-transform: scaleX(-1) rotate(-46deg); /* IE 9 */\n\t-webkit-transform: scaleX(-1) rotate(-46deg); /* Chrome, Safari, Opera */\n\ttransform: scaleX(-1) rotate(-46deg);\n"]))),G=function(e){var t=e.steps,n=e.activeStep,o=void 0===n?1:n,i=t.length,l="".concat(100/(i-1)*(o-1),"%");return r.createElement(V,null,r.createElement(F,{width:l},t.map((function(e){var t=e.rank,n=e.name;return r.createElement(J,{key:t-1},r.createElement(W,{step:o>=t-1?"completed":"incomplete"},o>t-1?r.createElement($,null,"L"):r.createElement(X,null,t-1)),r.createElement(H,null,r.createElement(Q,{key:t-1},n)))}))))},K=(0,v.$j)((function(e){var t=e.flowReducer,n=t.begunModule,o=t.companyProcesses,i=t.cart;return{begunModule:n,user:e.sessionReducer.user,companyProcesses:o,cart:i}}),(function(e){return{onSetAuthenticatedUser:function(t){return e((0,D.IF)(t))}}}))((function(e){var t,n,v,y,E,b,w,_,Z,M,k,D,Y,j,V,F,J,W,X,H=e.begunModule,Q=e.user,$=e.companyProcesses,K=e.cart,ee=(0,r.useState)(""),te=(0,l.Z)(ee,2),ne=te[0],oe=te[1],ie=(0,r.useState)(!1),le=(0,l.Z)(ie,2),re=le[0],se=le[1],de=(0,r.useState)(!1),ae=(0,l.Z)(de,2),ue=ae[0],ce=ae[1],pe=(0,g.pQ)(),ve=(0,l.Z)(pe,2),fe=ve[0],me=ve[1],he=(0,r.useState)(!1),ge=(0,l.Z)(he,2),xe=ge[0],ye=ge[1],Ee=(0,r.useState)(!1),be=(0,l.Z)(Ee,2),we=be[0],_e=be[1],Ze=(0,q.UO)(),Me=Ze.moduleID,ke=Ze.paymentID,Se=(0,q.TH)(),Ce=(0,r.useCallback)((function(e){e.forEach((function(e){var t;if(-1!==["xls","xlsx","csv"].indexOf(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toString().split(".")[1])){var n=new FileReader;n.onabort=function(){},n.onerror=function(){},n.onload=function(e){},n.readAsBinaryString(e),n.onloadend=function(t){var n,o;_e(!0),(0,z._)(e,null===H||void 0===H||null===(n=H.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id).subscribe({next:function(){_e(!1),(0,A.OQ)(!1,!0).pipe((0,f.q)(1)).subscribe({})},complete:function(){_e(!1)},error:function(e){_e(!1)}})}}}))}),[null===H||void 0===H||null===(t=H.processModule)||void 0===t?void 0:t.module]),Pe=(0,B.uI)({onDrop:Ce}),Ie=Pe.getRootProps,Ue=Pe.getInputProps,Oe=Pe.isDragActive,ze=(0,q.s0)();(0,r.useEffect)((function(){var e,t;if(void 0===(null===H||void 0===H||null===(e=H.processModule)||void 0===e?void 0:e.isUpdating)){var n=$.find((function(e){return e.id===H.processModule.id}));if(n&&n.steps.length>0){var o,l=(0,i.Z)((0,i.Z)((0,i.Z)({},H.processModule),n),{},{completeSteps:n.steps,steps:n.steps.filter((function(e){var t,n,o,i,l;return void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)||1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(l=i.showOnly)||void 0===l?void 0:l.filter((function(e){return Q.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0})).map((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{rank:t+1})}))});C.h.dispatch((0,P.q4)(l)),me({action:g._U.setCurrentStep,value:l.steps[null!==(o=H.processModule.stepIndex)&&void 0!==o?o:0]})}else(0,x.zJ)(H.processModule.id).pipe((0,m.P)()).subscribe({next:function(e){var t,n=(0,i.Z)((0,i.Z)((0,i.Z)({},H.processModule),e),{},{completeSteps:e.steps,steps:e.steps.filter((function(e){var t,n,o,i,l;return void 0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.showStepAll)||1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(l=i.showOnly)||void 0===l?void 0:l.filter((function(e){return Q.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0}))});C.h.dispatch((0,P.q4)(n)),me({action:g._U.setCurrentStep,value:n.steps[null!==(t=H.processModule.stepIndex)&&void 0!==t?t:0]})},error:function(e){}})}else if(!0===(null===H||void 0===H||null===(t=H.processModule)||void 0===t?void 0:t.isUpdating)){var r;me({action:g._U.setCurrentStep,value:H.processModule.steps[null!==(r=H.processModule.stepIndex)&&void 0!==r?r:0]})}if(Me){var s=new URLSearchParams(null===Se||void 0===Se?void 0:Se.search);oe({key:s.get("key"),value:s.get("value")})}}),[]);return S(!0,"Are you sure want to leave this "),r.createElement(h.LN,null,r.createElement(T.sM,null,r.createElement("div",{className:s},r.createElement("div",null),!O.tq&&(null===fe||void 0===fe||null===(n=fe.currentStep)||void 0===n?void 0:n.rank)>1&&(null===(v=H.processModule.steps)||void 0===v?void 0:v.length)>2&&r.createElement("div",{className:d,style:{width:(null===(y=H.processModule.steps)||void 0===y?void 0:y.length)>4?"100%":"50%",paddingBottom:"20px"}},r.createElement(G,{steps:null===(E=H.processModule)||void 0===E||null===(b=E.steps)||void 0===b?void 0:b.slice(1),activeStep:null!==(w=(null===fe||void 0===fe||null===(_=fe.currentStep)||void 0===_?void 0:_.rank)-1)&&void 0!==w?w:0})),r.createElement("div",{style:{display:"flex",minWidth:"100px"}},r.createElement(U.j3,{permissions:[U.po.blueprints.process.create]},!0===(null===H||void 0===H||null===(Z=H.processModule)||void 0===Z||null===(M=Z.module)||void 0===M||null===(k=M.options)||void 0===k?void 0:k.allowImport)&&1==(null===fe||void 0===fe||null===(D=fe.currentStep)||void 0===D?void 0:D.rank)&&r.createElement(U.zx,{title:xe?"Hide":"Import",style:{marginLeft:"0px"},clicked:function(){return ye(!xe)}})),r.createElement(U.zx,{title:(null===Q||void 0===Q||null===(Y=Q.pinned_modules)||void 0===Y?void 0:Y.filter((function(e){return e.id===H.processModule.module_id})).length)>0?"Unpin":"Pin",loading:ue,style:{marginLeft:"0px",width:"100px",display:(null===fe||void 0===fe||null===(j=fe.currentStep)||void 0===j?void 0:j.rank)>1?"none":""},clicked:function(){var e;ce(!0),(null===Q||void 0===Q||null===(e=Q.pinned_modules)||void 0===e?void 0:e.filter((function(e){return e.id===H.processModule.module_id})).length)>0?(0,z.Ev)(H.processModule.module_id).pipe((0,m.P)()).subscribe({next:function(){(0,L.IC)().pipe((0,m.P)()).subscribe({next:function(e){N.Fc.saveUser((0,i.Z)({},e)),ce(!1)}})}}):(0,z.tq)(H.processModule.module_id).pipe((0,m.P)()).subscribe({next:function(){(0,L.IC)().pipe((0,m.P)()).subscribe({next:function(e){N.Fc.saveUser((0,i.Z)({},e)),ce(!1),C.h.dispatch((0,P.IW)(!0)),ze("/dashboard")}})}})}}),r.createElement(U.zx,{title:"Close",style:{marginLeft:"5px",width:"80px",display:(null===fe||void 0===fe||null===(V=fe.currentStep)||void 0===V?void 0:V.rank)>1?"none":""},clicked:function(){var e,t,n;(setTimeout((function(){C.h.dispatch((0,P.IW)(!0)),C.h.dispatch((0,P.Xc)({show:!1,message:""}))}),10),(null===fe||void 0===fe||null===(e=fe.items)||void 0===e?void 0:e.length)>0)?!0!==(null===(t=H.processModule.module)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.saveCart)||!1!==H.processModule.isUpdating&&void 0!==H.processModule.isUpdating?(ze("/dashboard"),C.h.dispatch((0,P.q4)(""))):se(!0):(ze("/dashboard"),C.h.dispatch((0,P.q4)("")))}}))),xe&&r.createElement("div",{className:c},r.createElement("div",Ie(),r.createElement("input",(0,o.Z)({},Ue(),{style:{display:"none",alignContent:"center",outline:"none"}})),Oe?r.createElement("div",{className:p},r.createElement("img",{alt:"",src:R.P8c}),r.createElement("p",null,"Drop the files here ...")):r.createElement("div",{className:p},!we&&r.createElement("img",{alt:"",src:R.P8c}),r.createElement("p",null,we?r.createElement(U.$j,{size:80,type:"ThreeDots"}):"Click or drag your file here to begin import. (ex .csv)")))),r.createElement(I.ZP,{navigateTo:ne,isEditing:!1,paymentID:ke}),r.createElement(U.U7,{id:"pending-component-modal",blured:!0,scrollable:!1,isOpen:re,shadowedContainerStyle:{width:O.tq?"100%":"30%"}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement("p",{className:d},"Are you working on a transaction?"),r.createElement("div",{className:a},"You can press ".concat((null===K||void 0===K||null===(F=K.items)||void 0===F?void 0:F.length)>0?"'Update Cart'":"'Add to Cart'"," to save any transaction you are working on without submitting it. You can resume it by clicking the cart icon on the menu bar. ").concat((null===K||void 0===K||null===(J=K.items)||void 0===J?void 0:J.length)>0?"Pressing 'Empty Cart' will clear previous contents of your cart, and exit":"")),r.createElement("div",{className:u},r.createElement(U.zx,{title:"Close only",style:{width:"120px"},clicked:function(){me({action:g._U.clearOngoingTransaction}),window.history.back(),C.h.dispatch((0,P.q4)(""))}}),r.createElement(U.zx,{title:(null===K||void 0===K||null===(W=K.items)||void 0===W?void 0:W.length)>0?"Update Cart":"Add to Cart",light:!0,style:{width:"130px"},clicked:function(){var e,t,n,o;fe.components.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),fe.newStepComponents.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).forEach((function(e){return e.value=void 0}))})),(null===H||void 0===H||null===(e=H.processModule)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)>0&&(null===H||void 0===H||null===(n=H.processModule)||void 0===n||null===(o=n.steps)||void 0===o||o.filter((function(e){var t;return null===e||void 0===e||null===(t=e.component_blueprints)||void 0===t?void 0:t.filter((function(e){return e.selected_fields.filter((function(e){return"ID"===e.data_type_name})).filter((function(e){return e.value=void 0}))}))})));var l=JSON.parse(JSON.stringify({components:fe.components,newStepComponents:fe.newStepComponents,items:fe.items,begunModule:(0,i.Z)((0,i.Z)({},H.processModule),{},{stepIndex:1})}));C.h.dispatch((0,P.RV)(l)),me({action:g._U.clearOngoingTransaction}),window.history.back(),C.h.dispatch((0,P.q4)(""))}}),r.createElement(U.zx,{title:"Empty Cart",light:!0,style:{width:"120px",display:(null===K||void 0===K||null===(X=K.items)||void 0===X?void 0:X.length)>0?"":"none"},clicked:function(){C.h.dispatch((0,P.RV)({})),me({action:g._U.clearOngoingTransaction}),window.history.back(),C.h.dispatch((0,P.q4)(""))}}))))))}))},59401:function(e,t,n){n.d(t,{sM:function(){return a}});var o=n(29439),i=n(1413),l=n(92957),r="SET_SELECTED_COMPONENT",s=(0,l.Z)((function(e,t){var n=t.action,o=t.value;return n===r?(0,i.Z)((0,i.Z)({},e),{},{selectedComponent:o}):(0,i.Z)({},e)}),{selectedComponent:[]}),d=(0,o.Z)(s,2),a=(d[0],d[1])}}]);
//# sourceMappingURL=200.d4cb6540.chunk.js.map