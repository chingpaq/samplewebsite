"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[827,246],{85508:function(e,n,o){o.r(n),o.d(n,{default:function(){return Y}});var l=o(4942),i=o(93433),t=o(1413),d=o(29439),a=o(67861),u=o(23280),r=o(40694),s=o(88374),v={host:"DashboardMobile_host__FXUjc",dashboardPanel:"DashboardMobile_dashboardPanel__lXz07",headerContainer:"DashboardMobile_headerContainer__JAcuY",title:"DashboardMobile_title__UJq7q",modalTitle:"DashboardMobile_modalTitle__yR3Zx",singleButton:"DashboardMobile_singleButton__h-dk5",fieldRowContainer:"DashboardMobile_fieldRowContainer__VvOwp",fieldTypeInput:"DashboardMobile_fieldTypeInput__Qmlee",dashboardCard:"DashboardMobile_dashboardCard__uJUtM",componentCard:"DashboardMobile_componentCard__9UsrE",imageCard:"DashboardMobile_imageCard__J6I0d",searchContainer:"DashboardMobile_searchContainer__nrcHL",searchInput:"DashboardMobile_searchInput__GQHtE",ongoingtx:"DashboardMobile_ongoingtx__tEDSh",dropdownSelectComponent:"DashboardMobile_dropdownSelectComponent__RUoXR",dropdownSelectMenuOverlayList:"DashboardMobile_dropdownSelectMenuOverlayList__T2zDR",dropdownSelectMenuOverlayListItem:"DashboardMobile_dropdownSelectMenuOverlayListItem__twu8t",dropdownInput:"DashboardMobile_dropdownInput__CB8Ta",dropdownClearControlsClassName:"DashboardMobile_dropdownClearControlsClassName__TMP-7",listContainer:"DashboardMobile_listContainer__ASOGR",dropdownListContainer:"DashboardMobile_dropdownListContainer__J4smE",dropDownButtonContainer:"DashboardMobile_dropDownButtonContainer__oeCll",searchResults:"DashboardMobile_searchResults__RB3VY",pageContainer:"DashboardMobile_pageContainer__ep2wY",emulatedFlexGap:"DashboardMobile_emulatedFlexGap__mHKc9",popup:"DashboardMobile_popup__wqxbT",profilepopup:"DashboardMobile_profilepopup__0SibL",userCardContainerTop:"DashboardMobile_userCardContainerTop__bT3XW",userCardInnerContainer:"DashboardMobile_userCardInnerContainer__u0yVs",avatarUrlImg:"DashboardMobile_avatarUrlImg__1MY4w",center:"DashboardMobile_center__wR7QQ",moduleTitle:"DashboardMobile_moduleTitle__itg2E",filtersContainer:"DashboardMobile_filtersContainer__Mz0UE",wallet:"DashboardMobile_wallet__QzTMZ",userPanelRows:"DashboardMobile_userPanelRows__XQVNr",actionsContainer:"DashboardMobile_actionsContainer__65lpT",appsTitle:"DashboardMobile_appsTitle__a80ai",stepTitle:"DashboardMobile_stepTitle__FV3ye"},c=o(93389),p=o(6073),m=o(89293),f=o(88827),_=o(10103),h=o(11577),y=o(1542),g=o(96189),b=o(88550),x=o(73500),E=o(39518),C=o(50981),w=o.n(C),M=o(43984),Z=o(52902),S=o(12075),k=o(63124),P=o(87424),I=o(27658),N=o(75105),D=o(91605),T=o(30994),L=o(28014),z=o(29304),A=o(87453),O=o(12308),U=o(41771),R=o(51481),B=o(34665),F=o(44408),W=o(23910),q=(o(60940),o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),o(143),o(66918)),Y=(0,E.$j)((function(e){var n=e.flowReducer,o=n.begunModule,l=n.allTasks,i=n.allCompletedTasks,t=n.allCompletedTasksPaginated,d=n.companyProcesses,a=n.allModules,u=n.components,r=n.companyData,s=n.companyUsersArray,v=n.blueprints,c=n.payable,p=n.lastUpdates,m=e.sessionReducer,f=m.user,_=m.authenticated;return{begunModule:o,allTasks:l,allCompletedTasks:i,allCompletedTasksPaginated:t,companyProcesses:d,allModules:a,components:u,companyData:r,companyUsersArray:s,user:f,authenticatedUser:e.authReducer.authenticatedUser,authenticated:_,blueprints:v,payable:c,lastUpdates:p}}),(function(e){return{onSetSelectedProcess:function(n){return e((0,s.Xu)(n))}}}))((function(e){var n,o,Y,H,j,G,J,V,Q,X,$,K,ee,ne,oe,le,ie,te,de,ae,ue,re,se,ve,ce,pe,me;(0,L.z2)();var fe=e.authenticated,_e=e.authenticatedUser,he=e.user,ye=e.companyProcesses,ge=e.allModules,be=e.components,xe=e.companyData,Ee=e.begunModule,Ce=e.blueprints,we=e.payable,Me=e.companyUsersArray,Ze=e.lastUpdates,Se=e.allTasks,ke=(0,a.useState)(!1),Pe=(0,d.Z)(ke,2),Ie=Pe[0],Ne=Pe[1],De=(0,a.useState)({}),Te=(0,d.Z)(De,2),Le=Te[0],ze=Te[1],Ae=(0,a.useState)(!1),Oe=(0,d.Z)(Ae,2),Ue=Oe[0],Re=Oe[1],Be=(0,a.useState)(!1),Fe=(0,d.Z)(Be,2),We=Fe[0],qe=Fe[1],Ye=(0,a.useState)(!1),He=(0,d.Z)(Ye,2),je=He[0],Ge=He[1],Je=(0,a.useState)(!1),Ve=(0,d.Z)(Je,2),Qe=Ve[0],Xe=Ve[1],$e=(0,a.useState)(),Ke=(0,d.Z)($e,2),en=Ke[0],nn=Ke[1],on=(0,a.useState)(!1),ln=(0,d.Z)(on,2),tn=(ln[0],ln[1]),dn=(0,a.useState)({}),an=(0,d.Z)(dn,2),un=an[0],rn=an[1],sn=(0,a.useState)(!1),vn=(0,d.Z)(sn,2),cn=vn[0],pn=vn[1],mn=(0,a.useState)({}),fn=(0,d.Z)(mn,2),_n=(fn[0],fn[1]),hn=(0,a.useState)(!1),yn=(0,d.Z)(hn,2),gn=yn[0],bn=yn[1],xn=(0,a.useState)(-1),En=(0,d.Z)(xn,2),Cn=En[0],wn=En[1],Mn=(0,a.useState)([]),Zn=(0,d.Z)(Mn,2),Sn=Zn[0],kn=Zn[1],Pn=(0,a.useState)(!1),In=(0,d.Z)(Pn,2),Nn=In[0],Dn=In[1],Tn=(0,a.useState)(!1),Ln=(0,d.Z)(Tn,2),zn=Ln[0],An=Ln[1],On=(0,b.pQ)(),Un=(0,d.Z)(On,2),Rn=Un[0],Bn=Un[1],Fn=(0,a.useState)(!(null===Ee||void 0===Ee||null===(n=Ee.processModule)||void 0===n||null===(o=n.module)||void 0===o||!o.id)&&(null===he||void 0===he||null===(Y=he.positions)||void 0===Y||null===(H=Y.filter((function(e){var n,o,l,i;return(null===Ee||void 0===Ee||null===(n=Ee.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.processors)||void 0===i?void 0:i.indexOf(e.id))>-1})))||void 0===H?void 0:H.length)>0),Wn=(0,d.Z)(Fn,2),qn=Wn[0],Yn=Wn[1],Hn=(0,E.I0)(),jn=(0,u.s0)(),Gn=(0,u.UO)(),Jn=Gn.paymentID,Vn=Gn.walletID;document.title="Dashboard | ".concat(m.iC," Mobile");var Qn=(0,a.useCallback)((function(e,n,o){var l=function(l){var i,d,a,u,r,v,c,h,g,x,E,w,M,Z,S,k,P,I=l.steps.filter((function(e){var n,o,l,i,t;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(t=i.showOnly)||void 0===t?void 0:t.filter((function(e){return _e.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0})).map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{rank:n+1})}));(f.h.dispatch((0,s.q4)(l)),f.h.dispatch((0,s.an)([l],m.Qc)),f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},l),{},{completeSteps:l.steps,steps:I,stepIndex:o?0:(null===l||void 0===l||null===(i=l.steps)||void 0===i?void 0:i.length)>0?(null===l||void 0===l||null===(d=l.steps[0])||void 0===d||null===(a=d.component_blueprints)||void 0===a?void 0:a.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?1:0:1,module_id:n.id,module:e.find((function(e){return e.id===n.id})),isUpdating:!1}))),Bn({action:b._U.setCurrentStep,value:null===l||void 0===l?void 0:l.steps[o?0:(null===l||void 0===l||null===(u=l.steps)||void 0===u?void 0:u.length)>0?(null===l||void 0===l||null===(r=l.steps[0])||void 0===r||null===(v=r.component_blueprints)||void 0===v?void 0:v.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?1:0:1]}),Bn({action:b._U.setModuleItems,value:Le.component_items}),Bn({action:b._U.setModuleNewStepComponents,value:[]}),Bn({action:b._U.setComponents,value:[]}),(null===Ee||void 0===Ee||null===(c=Ee.processModule)||void 0===c||null===(h=c.steps)||void 0===h?void 0:h.length)>0&&(null===Ee||void 0===Ee||null===(g=Ee.processModule)||void 0===g||null===(x=g.steps)||void 0===x||x.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),(0,y.vC)(n,m.Qc,m.M4,1,!1).pipe((0,_.q)(1)).subscribe({next:function(e){var o;Ne(!1),n.lastUpdate=0,n.count=null!==(o=null===e||void 0===e?void 0:e.total)&&void 0!==o?o:0,(0,p.OQ)(!0,!1).pipe((0,_.q)(1)).subscribe({complete:function(){(0,p.ew)().pipe((0,_.q)(1)).subscribe({})}})}}),null===n||void 0===n||null===(E=n.options)||void 0===E||null===(w=E.supporting)||void 0===w||w.filter((function(e,o){var l,i;(0,y.vC)({id:e,name:null!==(l="".concat(null===ge||void 0===ge||null===(i=ge.find((function(n){return n.id===e})))||void 0===i?void 0:i.name).concat(o))&&void 0!==l?l:"".concat(null===n||void 0===n?void 0:n.name).concat(o)},m.Qc,m.R6,1).pipe((0,_.q)(1)).subscribe({next:function(l){var i,t;Ze.componentsByModule[null!==(i="".concat(null===ge||void 0===ge||null===(t=ge.find((function(n){return n.id===e})))||void 0===t?void 0:t.name).concat(o))&&void 0!==i?i:"".concat(null===n||void 0===n?void 0:n.name).concat(o)]=(0,C.now)()}})})),(null===n||void 0===n||null===(M=n.options)||void 0===M||null===(Z=M.positions)||void 0===Z?void 0:Z.length)>0)&&(0,N.n0)(null===n||void 0===n||null===(k=n.options)||void 0===k?void 0:k.positions,5*(null===n||void 0===n||null===(P=n.options)||void 0===P?void 0:P.positions.length)).pipe((0,_.q)(1)).subscribe({});if(null!==n&&void 0!==n&&null!==(S=n.options)&&void 0!==S&&S.single){var D=localStorage.getItem(n.id);Kn(l,D?JSON.parse(D):be.find((function(e){return e.module_id===n.id})))}};ye.find((function(e){return e.id===n.procedure.id}))?l(ye.find((function(e){return e.id===n.procedure.id}))):(Ne(!0),(0,c.zJ)(n.procedure.id).pipe((0,h.P)()).subscribe({next:function(e){Ne(!1),l(e)},error:function(e){}}))}),[Ee]);(0,a.useEffect)((function(){history.pushState(null,null,location.href),window.onpopstate=function(e){history.go(1)},Hn((0,s.tR)(!1)),Hn((0,s.IW)(!1))}),[je]),(0,a.useEffect)((function(){if(fe){if("trial_ended"!==(null===xe||void 0===xe?void 0:xe.status)&&"inactive"!==(null===xe||void 0===xe?void 0:xe.status)&&(null===ge||void 0===ge?void 0:ge.length)>0){var e=null===ge||void 0===ge?void 0:ge.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}));if(1===(null===e||void 0===e?void 0:e.length)){var n,o,l=(null===he||void 0===he||null===(n=he.positions)||void 0===n||null===(o=n.filter((function(n){var o,l,i;return(null===(o=e[0])||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.processors)||void 0===i?void 0:i.indexOf(n.id))>-1})))||void 0===o?void 0:o.length)>0;Yn(l),Qn(ge,e[0],l)}else if((null===e||void 0===e?void 0:e.length)>0){var i,t,d,a,u=_e.positions.find((function(e){return"1"===e.standards})),r=u&&e.find((function(e){return e.name===u.name})),v=(null===he||void 0===he||null===(i=he.positions)||void 0===i||null===(t=i.filter((function(n){var o,l,i;return(null===(o=e[0])||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.processors)||void 0===i?void 0:i.indexOf(n.id))>-1})))||void 0===t?void 0:t.length)>0;if(r)v=(null===he||void 0===he||null===(d=he.positions)||void 0===d||null===(a=d.filter((function(e){var n,o;return(null===r||void 0===r||null===(n=r.options)||void 0===n||null===(o=n.processors)||void 0===o?void 0:o.indexOf(e.id))>-1})))||void 0===a?void 0:a.length)>0,Qn(ge,r,v);else Qn(ge,e[0],v);Yn(v),pn(!0)}}""===(null===he||void 0===he?void 0:he.id)&&(Hn((0,M.ci)()),Hn((0,s.mb)())),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){f.h.dispatch((0,s.Rb)({latitude:e.coords.latitude,longitude:e.coords.longitude}))}))}}),[fe,ge]),(0,a.useEffect)((function(){ge.length>0&&ge.filter((function(e){var n;return void 0===ye.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.procedure)||void 0===o?void 0:o.id)}))&&(0,c.zJ)(null===e||void 0===e||null===(n=e.procedure)||void 0===n?void 0:n.id).pipe((0,h.P)()).subscribe({next:function(){return window.scrollTo({top:-10})}})})),ge.length>0&&ge.filter((function(e){var n;return(w()((0,C.now)()).diff(w()(null!==(n=Ze.componentsByModule[e.name])&&void 0!==n?n:(0,C.now)()),"minutes")>10||void 0===Ze.componentsByModule[e.name]||0===be.filter((function(n){return n.module_id===e.id})).length)&&(0,y.vC)(e,m.Qc,m.Zp,1,!1).pipe((0,_.q)(1)).subscribe({next:function(n){Ze.componentsByModule[e.name]=(0,C.now)(),window.scrollTo({top:-10})}})}))}),[ge]),(0,a.useEffect)((function(){fe&&(null===we||void 0===we?void 0:we.length)>0&&void 0!==Vn&&void 0===Jn&&we.map((function(e,n){var o;Ne(!0),(0,I.e_)({user_id:null===e||void 0===e?void 0:e.user_id,id:null===e||void 0===e?void 0:e.id,total:Math.abs(+(null!==(o=null===e||void 0===e?void 0:e.amount)&&void 0!==o?o:0)),product:null===e||void 0===e?void 0:e.product,notes:"E-Payment",quantity:1}).pipe((0,h.P)()).subscribe({next:function(){if(Ne(!1),e.paymentID===Vn){var o,l,i;Ne(!0);var d=(null!==(o=null===he||void 0===he||null===(l=he.options)||void 0===l?void 0:l.credit)&&void 0!==o?o:0)+Math.abs(null!==(i=+(null===e||void 0===e?void 0:e.amount))&&void 0!==i?i:0);(0,N.Vy)(he,(0,t.Z)((0,t.Z)({},null===he||void 0===he?void 0:he.options),{},{credit:+d.toFixed(2)})).pipe((0,h.P)()).subscribe({next:function(e){he.options=e.options,Ne(!1)}})}n+1==we.length&&(f.h.dispatch((0,s.Wy)([])),jn("/mobile"))}})}))}),[Vn,fe]);var Xn=(0,a.useCallback)((function(e){var n,o,l,i;return a.createElement("div",{className:"tabbar-section"},e.children,a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,loading:Ie,clicked:function(){var e,n,o;f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},Ee.processModule),{},{stepIndex:qn||null!==(e=Ee.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(o=n.options)&&void 0!==o&&o.single?0:1,isUpdating:!1}))),ge.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)})).length>1&&pn(!0),Ge(!1),Xe(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(S.G,{icon:Z.J9Y,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Home")))),(null===he||void 0===he||null===(n=he.ui_permissions)||void 0===n?void 0:n.find((function(e){return"view-dashboard-task"===e})))&&a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){Xe(!0),Ge(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(S.G,{icon:Z.fT7,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Tasks")))),!(null!==Ee&&void 0!==Ee&&null!==(o=Ee.processModule)&&void 0!==o&&null!==(l=o.module)&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.single)&&a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},Ee.processModule),{},{stepIndex:0,isUpdating:!1}))),qe(!0),pn(!1),setTimeout((function(){return qe(!1)})),rn({}),tn(!0),Ge(!1),Xe(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(S.G,{icon:Z.Zrf,className:"tabbar-icon"}),a.createElement("br",null),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Transactions")))),a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){Ge(!0),Xe(!1)}},a.createElement("div",{style:{color:"var(--app-color-gray-dark)"}},a.createElement(S.G,{icon:Z.ILF,className:"tabbar-icon"}),a.createElement("div",{style:{fontSize:"10px",height:"14px"}},"Profile")))))}),[zn,Ie,Rn,be]),$n=(0,a.useCallback)((function(e){var n,o,l,i,d,u=function(){An(!zn)};return a.createElement("div",{className:"navbar-section"},e.children,a.createElement("div",{className:"mobile-nav"},a.createElement(r.Z,{clear:!0,clicked:function(){var e,n;Ne(!1),(null===Rn||void 0===Rn||null===(e=Rn.components)||void 0===e?void 0:e.length)>0||(null===Rn||void 0===Rn||null===(n=Rn.newStepComponents)||void 0===n?void 0:n.length)>0?_n({open:!0,handler:u}):u(),u()}},a.createElement(S.G,{icon:Z.Ljc,className:"hamb-icon"}))),a.createElement("div",{className:v.moduleTitle},a.createElement("div",{style:{width:"100%"}},"".concat((null!==(n=null===(o=Ee.processModule.module)||void 0===o?void 0:o.name)&&void 0!==n?n:"").toUpperCase()).concat(qn?"*":"")," "),a.createElement("div",{style:{width:"100%"}},(0,m.kf)("10px"))),a.createElement("div",{className:v.userCardContainerTop},fe&&ge.length>0&&ye.length>0?a.createElement(A.ZP,null,a.createElement(z.T$,null)):a.createElement(g.$j,{type:"BallTriangle",color:"black",height:20,width:"20px"})),a.createElement("div",{className:"mobile-navbar ".concat(zn?"open-nav":""),style:{width:"100%",backgroundColor:"transparent"}},a.createElement("div",{className:"mobile-navbar ".concat(zn?"open-nav":""),style:{height:"inherit",width:"60%",boxShadow:"0px 2px 20px 5px rgba(0, 0, 0, 0.1)"}},a.createElement("div",{onClick:u,className:"mobile-navbar-close"},a.createElement(S.G,{icon:Z.QQm,className:"hamb-icon"})),a.createElement("ul",{className:"mobile-navbar-links"},a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},Ee.processModule),{},{stepIndex:0,isUpdating:!1}))),qe(!0),pn(!1),setTimeout((function(){return qe(!1)})),rn({}),tn(!0),Xe(!1),Ge(!1),u()}},"TRANSACTIONS")),a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){Xe(!1),Ge(!0),u()}},"PROFILE")),(null===(l=Ee.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(d=i.options)||void 0===d?void 0:d.credits)&&a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){(0,N.IC)().pipe((0,h.P)()).subscribe({next:function(e){var n;_e.options=null===e||void 0===e?void 0:e.options,_e.departments=null===e||void 0===e?void 0:e.departments,_e.positions=null===e||void 0===e?void 0:e.positions,_e.pinned_modules=null===e||void 0===e?void 0:e.pinned_modules,null===B.Fc||void 0===B.Fc||null===(n=B.Fc.saveUser)||void 0===n||n.call(B.Fc,_e).then((function(){}))}}),Xe(!1),Ge(!1),bn(!0),u()}},"WALLET")),a.createElement("li",null,a.createElement("a",{style:{fontFamily:"Montserrat, serif"},onClick:function(){Re(!0),Ge(!1),u()}},"LOGOUT"))))))}),[zn,Ie,Rn,be]),Kn=function(e,n){var o,l;if(n){var d=[],a=0;(null===e||void 0===e||null===(o=e.steps)||void 0===o?void 0:o.length)>0&&(null===e||void 0===e||null===(l=e.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),q.uniqWith(q.eqProps("group"))(n.component_fields).map((function(e){d=[].concat((0,i.Z)(d),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:q.filter(q.propEq("group",e.group))(n.component_fields)}])})),e.steps.filter((function(e){e.component_blueprints.filter((function(o){o.selected_fields.filter((function(o){var l=n.component_fields.find((function(e){return e.field_name===o.field_name}));if("Status"===o.data_type_name&&void 0!==status&&(a=+e.rank-1),void 0!=l)o.value=l.value;else if("Record"===o.data_type_name){var i=n.component_fields.find((function(e){return e.field_name===o.options.name}));void 0!=i&&(o.value=i.value)}}))}))})),Bn({action:b._U.setComponents,value:d}),Bn({action:b._U.setModuleItems,value:n.component_items}),f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},e),{},{steps:e.steps,stepIndex:a,module_id:n.module_id,module:ge.find((function(e){return e.id===n.module_id})),isUpdating:!0,selectedComponent:n}))),ze(n)}},eo=(0,a.memo)((function(){var e;return a.createElement("div",{style:{padding:"0 5px"}},a.createElement("div",{style:{display:"flex",textAlign:"left"}},a.createElement("p",{className:v.stepTitle},"My Tasks"),a.createElement(r.Z,{light:!0,clicked:function(){Ne(!0),(0,R.km)(he.id,!0).pipe((0,_.q)(1)).subscribe({complete:function(){return Ne(!1)}})},icon:a.createElement("img",{src:U.Fdh})}),a.createElement(r.Z,{light:!0,style:{display:null!==he&&void 0!==he&&null!==(e=he.ui_permissions)&&void 0!==e&&e.find((function(e){return"view-dashboard-task"===e}))?"":"none"},clicked:function(){nn(!0)},icon:a.createElement("img",{src:U.IHx})})),a.createElement(O.default,{title:"",card:!0,className:v.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Status","Due"],list:Se.filter((function(e){return"Done"!==e.status})).map((function(e){var n,o,i,t,d,a,u,r,s,v,c;return c={Name:e.name,Description:e.description,Status:null!==(n=e.status)&&void 0!==n?n:"New",Due:w()(null===(o=e.add_info)||void 0===o?void 0:o.end).format("DD MMMM h:mm a")},(0,l.Z)(c,"Created By","".concat(null!==(i=null===(t=e.creator)||void 0===t?void 0:t.first_name)&&void 0!==i?i:""," ").concat(null!==(d=null===(a=e.creator)||void 0===a?void 0:a.last_name)&&void 0!==d?d:"")),(0,l.Z)(c,"Assigned To","".concat(null!==(u=null===(r=e.assignee)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===(v=e.assignee)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,l.Z)(c,"task",e),c})),onListItemClick:function(e){nn(e.task)}}))}));return a.createElement("div",{className:v.center,style:{flexDirection:"column",alignItems:"center"}},void 0==(null===Ee||void 0===Ee||null===(j=Ee.processModule)||void 0===j?void 0:j.stepIndex)||(null===Ee||void 0===Ee||null===(G=Ee.processModule)||void 0===G?void 0:G.stepIndex)<2?ge.length>0&&a.createElement($n,null):a.createElement("div",null),0!==(null===Ee||void 0===Ee||null===(J=Ee.processModule)||void 0===J?void 0:J.stepIndex)&&0===(null===ge||void 0===ge?void 0:ge.length)&&a.createElement($n,null),0!==(null===Ee||void 0===Ee||null===(V=Ee.processModule)||void 0===V?void 0:V.stepIndex)&&0===(null===ge||void 0===ge?void 0:ge.length)&&a.createElement("div",{style:{display:"flex",margin:"auto",width:"100%",height:"500px",alignContent:"center",alignItems:"center",justifyItems:"center",justifyContent:"center"}},(0,m.lh)("30px")),void 0==(null===Ee||void 0===Ee||null===(Q=Ee.processModule)||void 0===Q?void 0:Q.stepIndex)||(null===Ee||void 0===Ee||null===(X=Ee.processModule)||void 0===X?void 0:X.stepIndex)<2?ge.length>0&&!je&&!Qe&&function(e){var n=ge.length>0?function(){var e=[];if(ge.filter((function(e){var n,o;return e.id===(null===Ee||void 0===Ee||null===(n=Ee.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})).filter((function(n){return ye.filter((function(e){var o;return n.procedure.id===e.id&&e.steps.length>0&&(null===e||void 0===e||null===(o=e.steps)||void 0===o?void 0:o.filter((function(e){return e.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asDashboard)}))})))})).filter((function(o){return o.steps.filter((function(e){return e.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asDashboard)}))})).filter((function(l){return l.component_blueprints.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asDashboard)})).filter((function(l){return l.selected_fields.filter((function(e){return 1==e.visible&&"Formula"===e.data_type_name})).map((function(d){var a,u,r,s;e=(null===he||void 0===he||null===(a=he.positions)||void 0===a?void 0:a.filter((function(e){var n,o;return null===(n=l.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.includes(e.id)})).length)>0||0==(null===(u=l.options)||void 0===u||null===(r=u.showOnly)||void 0===r?void 0:r.length)||void 0===(null===(s=l.options)||void 0===s?void 0:s.showOnly)?[].concat((0,i.Z)(e),[(0,t.Z)((0,t.Z)({},d),{},{module_id:n.id,procedure:o,module:n})]):(0,i.Z)(e)}))}))}))}))})),e.length>0){1==x.tq&&(e=e.slice(0,2));var n=e.map((function(e,n){var o,l=null!==(o=e.value)&&void 0!==o?o:0;return"Formula"===e.data_type_name&&(l=(0,m.LV)(e.options,be,[],[],[])),a.createElement("div",{key:n,className:v.dashboardCard,style:{display:"flex",flexDirection:"column",justifyContent:"center"},"app-color-variant":"".concat(n%5+1),onClick:function(){var n,o,l;f.h.dispatch((0,s.IW)(!1)),f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},e.procedure),{},{stepIndex:0,module_id:e.module_id,module:e.module}))),"countdateocc"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.operator)?rn({module_id:e.module_id,key:e.options.list.length>0?e.options.list[0]:"Status",value:w()((0,m.Ob)(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.searchtext)).format("DD MMM YYYY")}):rn({module_id:e.module_id,key:e.options.list.length>0?e.options.list[0]:"Status",value:null!==(l=e.options.searchtext)&&void 0!==l?l:""}),f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},Ee.processModule),{},{stepIndex:0,isUpdating:!1}))),tn(!0),qe(!0),Xe(!1),Ge(!1),setTimeout((function(){return qe(!1)}))}},a.createElement("div",{style:{fontSize:"12px"}},"Dashboard"),a.createElement("h3",null,e.field_name),l)}));return null!==n&&void 0!==n?n:[]}}():[],o=e?function(e){return q.sortWith([q.descend(q.prop("created_date"))])(be.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){return"Status"===e.data_type_name&&!("Closed"===e.value||"Cancelled"===e.value)})).length)>0})).filter((function(e){return"Closed"!==(null===e||void 0===e?void 0:e.status)})).filter((function(n){var o,l,i,t;return!((null===(o=e.options)||void 0===o?void 0:o.activeFor)>0&&w()((0,C.now)()).diff(w()(n.created_date),"minutes")>+(null===(l=e.options)||void 0===l?void 0:l.activeFor))||!("New"===n.status||"Unassigned"===n.status)||(null===(i=n.assigned_to)||void 0===i?void 0:i.id)||(null===n||void 0===n||null===(t=n.payments)||void 0===t?void 0:t.id)})).map((function(n,o){var l,d,u,r=null===(l=n.component_fields)||void 0===l||null===(d=l.find((function(e){return"Status"===e.data_type_name})))||void 0===d?void 0:d.value,c=n.component_fields.find((function(e){return"Action Button"===e.data_type_name})),p=n.component_fields.find((function(e){return"Payments"===e.data_type_name})),_=Me.find((function(e){return e.id===(null===c||void 0===c?void 0:c.value)}));return a.createElement("div",{key:o,className:v.componentCard,style:{border:(null===Le||void 0===Le?void 0:Le.id)===n.id?"3px dashed black":"",fontWeight:"normal"},"app-color-variant":"".concat(o%5+1),onClick:function(){!function(){var o,l,d,a,u,v,c,p,_,y,g,x,E,C,w,M,Z,S,k,P,I,D,T,L,z,A,O=ye.find((function(n){return n.id===e.procedure.id}));ze(n),tn(!0),xe.start=!0;var U=[];(null===O||void 0===O||null===(o=O.steps)||void 0===o?void 0:o.length)>0&&(null===O||void 0===O||null===(l=O.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),q.uniqWith(q.eqProps("group"))(n.component_fields).map((function(e){U=[].concat((0,i.Z)(U),[{id:e.component_blueprint_id,temp_id:e.id,selected_fields:q.filter(q.propEq("group",e.group))(n.component_fields)}])})),O.steps.filter((function(e){e.component_blueprints.filter((function(e){e.selected_fields.filter((function(e){var o,l=null===(o=n.component_fields)||void 0===o?void 0:o.find((function(n){return n.field_name===e.field_name}));if(void 0!=l)e.value=l.value,e.group=l.group;else if("Record"===e.data_type_name){var i,t=null===(i=n.component_fields)||void 0===i?void 0:i.find((function(n){return n.field_name===e.options.name}));void 0!=t&&(e.value=t.value,e.group=t.group)}}))}))})),Bn({action:b._U.setComponents,value:U}),Bn({action:b._U.setModuleItems,value:JSON.parse(JSON.stringify(n.component_items))});var R,B,F,W=O.steps.filter((function(e){var n,o,l,i,t;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(t=i.showOnly)||void 0===t?void 0:t.filter((function(e){return _e.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0})).map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{rank:n+1})})),Y=(null===Ee||void 0===Ee||null===(d=Ee.processModule)||void 0===d||null===(a=d.steps)||void 0===a?void 0:a.length)>0?null===Ee||void 0===Ee||null===(u=Ee.processModule)||void 0===u||null===(v=u.steps)||void 0===v||null===(c=v.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})).length)>0})))||void 0===c||null===(p=c.component_blueprints)||void 0===p||null===(_=p.find((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name})).length>0})))||void 0===_||null===(y=_.options)||void 0===y?void 0:y.showOnly:[],H=(null===Ee||void 0===Ee||null===(g=Ee.processModule)||void 0===g||null===(x=g.steps)||void 0===x?void 0:x.length)>0?null===Ee||void 0===Ee||null===(E=Ee.processModule)||void 0===E||null===(C=E.steps)||void 0===C||null===(w=C.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===w||null===(M=w.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===M||null===(Z=M.options)||void 0===Z?void 0:Z.showOnly:[],j=void 0===r&&((null===he||void 0===he?void 0:he.id)===(null===O||void 0===O?void 0:O.user_id)||(null===Y||void 0===Y?void 0:Y.filter((function(e){var n;return(null===_e||void 0===_e||null===(n=_e.positions)||void 0===n?void 0:n.map((function(e){return e.id})).indexOf(e))>-1})).length)>0)||(void 0===r||"New"===r)&&(null===n||void 0===n||null===(S=n.created_by)||void 0===S?void 0:S.id)===(null===_e||void 0===_e?void 0:_e.id)||void 0!==r&&!("Closed"===r||r===(null===xe||void 0===xe||null===(k=xe.misc_info)||void 0===k?void 0:k.lock))&&(null===Y||void 0===Y?void 0:Y.filter((function(e){var n;return(null===_e||void 0===_e||null===(n=_e.positions)||void 0===n?void 0:n.map((function(e){return e.id})).indexOf(e))>-1})).length)>0&&(1!=(null===ge||void 0===ge||null===(P=ge.find((function(e){return e.id===n.module_id})))||void 0===P||null===(I=P.options)||void 0===I?void 0:I.strict)||(null===n||void 0===n||null===(D=n.created_by)||void 0===D?void 0:D.id)!==(null===he||void 0===he?void 0:he.id))||!1===(null===n||void 0===n?void 0:n.is_complete)&&(null===n||void 0===n||null===(T=n.created_by)||void 0===T?void 0:T.id)===(null===he||void 0===he?void 0:he.id),G=(0,m.cQ)(r,H,n,he,Ee,xe),J=null!==(L=null===(z=n.component_fields.find((function(e){return"Action Button"===e.data_type_name})))||void 0===z?void 0:z.value)&&void 0!==L?L:"";f.h.dispatch((0,s.q4)((0,t.Z)((0,t.Z)({},O),{},{completeSteps:O.steps,steps:W,stepIndex:1==j&&n.created_by.id===_e.id&&J||(!j||n.created_by.id!==_e.id&&O.user_id!==_e.id)&&(!G||J!==_e.id&&O.user_id!==_e.id)?0:1,canEdit:!(1==j&&n.created_by.id===_e.id&&J||(!j||n.created_by.id!==_e.id&&O.user_id!==_e.id)&&(!G||J!==_e.id&&O.user_id!==_e.id)),status:r,back_array:W.length>0?[W[0].id]:[],module_id:n.module_id,module:null===ge||void 0===ge?void 0:ge.find((function(e){return e.id===n.module_id})),isUpdating:!0,selectedComponent:n,showDetail:!0}))),qe(!0),null!==n&&void 0!==n&&null!==(A=n.assigned_to)&&void 0!==A&&A.id&&!Me.find((function(e){var o;return e.id===(null===n||void 0===n||null===(o=n.assigned_to)||void 0===o?void 0:o.id)}))?(0,N.VG)(Me.find((function(e){var o;return e.id===(null===(o=n.created_by)||void 0===o?void 0:o.id)}))?[null===n||void 0===n||null===(R=n.assigned_to)||void 0===R?void 0:R.id]:[null===n||void 0===n||null===(B=n.assigned_to)||void 0===B?void 0:B.id,null===n||void 0===n||null===(F=n.created_by)||void 0===F?void 0:F.id]).pipe((0,h.P)()).subscribe({next:function(e){f.h.dispatch((0,s.NY)(Me.concat(e))),setTimeout((function(){qe(!1),window.scrollTo({top:0,behavior:"smooth"})}))}}):setTimeout((function(){qe(!1),window.scrollTo({top:0,behavior:"smooth"})}))}()}},n.title.length>24?a.createElement("h5",null,n.title):a.createElement("h4",null,n.title),a.createElement("div",{style:{fontSize:"16px",marginBottom:"5px"}},"Unassigned"===n.status?n.status:"status"===(null===c||void 0===c||null===(u=c.options)||void 0===u?void 0:u.action)&&null!==c&&void 0!==c&&c.value?null===c||void 0===c?void 0:c.value:r?"New"===r&&c?"New (Assigned)":"".concat(r):"No Status"),a.createElement("div",{style:{fontSize:"12px"}},"New"===r?"".concat(p?null===p||void 0===p?void 0:p.value:""):n.created_by.id!==_e.id?"".concat(n.created_by.first_name," ").concat(n.created_by.last_name):_?"".concat(_.first_name," ").concat(_.last_name):"".concat(p?null===p||void 0===p?void 0:p.value:"")),w()(n.created_date).format("DD MMM YYYY"))}))}(e):[],l=ge.length>0?function(){var e=ge.find((function(e){var n;return 1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asGraphical)}));return void 0===e?[]:q.sortWith([q.descend(q.prop("created_date"))])(be.filter((function(n){return n.module_id===e.id}))).filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){var n;return"Status"===e.data_type_name&&!(e.value===(null===(n=xe.misc_info)||void 0===n?void 0:n.lock)||"Closed"===e.value||"Cancelled"===e.value)})).length)>0})).map((function(e,n){var o,l,i,t,d=e.component_fields.find((function(e){return"Link"===e.data_type_name}));return a.createElement("div",{key:n,className:v.imageCard},d&&((null===(o="".concat(null===d||void 0===d?void 0:d.value))||void 0===o?void 0:o.includes("jpg"))||(null===(l="".concat(null===d||void 0===d?void 0:d.value))||void 0===l?void 0:l.includes("jpeg"))||(null===(i="".concat(null===d||void 0===d?void 0:d.value))||void 0===i?void 0:i.includes("png"))||(null===d||void 0===d||null===(t=d.options)||void 0===t?void 0:t.image))&&a.createElement("img",{alt:"lg",src:null===d||void 0===d?void 0:d.value,style:{objectFit:"contain",height:"160px",borderRadius:"5px"}}))}))}():[];return a.createElement("div",{className:v.center,style:{height:(null===l||void 0===l?void 0:l.length)>0||(null===n||void 0===n?void 0:n.length)>0||(null===o||void 0===o?void 0:o.length)>0?"":"0px",width:"90%",minWidth:"360px",backgroundColor:"var(--app-color-gray-lightest)",flexDirection:"column"}},a.createElement(W.tq,{slidesPerView:"auto",centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[F.pt,F.tl],className:"mySwiper"},(null===l||void 0===l?void 0:l.length)>0&&l.map((function(e,n){return a.createElement(W.o5,{key:n,className:v.swiperslide},e)})),(null===n||void 0===n?void 0:n.length)>0&&n.map((function(e,n){return a.createElement(W.o5,{key:n,className:v.swiperslide},e)})),(null===o||void 0===o?void 0:o.length)>0&&o.map((function(e,n){return a.createElement(W.o5,{key:n,className:v.swiperslide},e)}))))}(null!==($=null===Ee||void 0===Ee||null===(K=Ee.processModule)||void 0===K?void 0:K.module)&&void 0!==$?$:null===ge||void 0===ge?void 0:ge.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}))):a.createElement("br",null),(null===Ee||void 0===Ee||null===(ee=Ee.processModule)||void 0===ee?void 0:ee.stepIndex)<2&&cn&&!je?function(){var e=ge.filter((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)}));return a.createElement("div",{className:v.center,style:{textAlign:"left",height:e.length>4?"".concat(52,"vh"):"20vh",padding:"0px 10px 0px 20px ",width:"100%",flexDirection:"column",marginTop:"10px"}},a.createElement(W.tq,{slidesPerView:e.length>4?4:e.length,grid:{rows:e.length>4?2:1},spaceBetween:1,pagination:{clickable:!0},modules:[F.rj,F.tl],style:{display:"flex",flexDirection:"column"}},e.map((function(e,n){var o;return a.createElement(W.o5,{key:n},a.createElement(r.Z,{clear:!0,clicked:function(){var n,o,l=(null===he||void 0===he||null===(n=he.positions)||void 0===n||null===(o=n.filter((function(n){var o,l;return(null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.processors)||void 0===l?void 0:l.indexOf(n.id))>-1})))||void 0===o?void 0:o.length)>0;Yn(l),Qn(ge,e,l),pn(!0),Ge(!1),Xe(!1)},style:{fontSize:"12px",fontFamily:"var(--app-text-mobile-font)",width:"100%",height:"16vh",flexDirection:"column"}},a.createElement("img",{alt:"lg",src:null===(o=e.options)||void 0===o?void 0:o.background,style:{objectFit:"contain",width:"10vh",height:"13vh",borderRadius:"5px"}}),e.name))}))))}(null!==(ne=null===Ee||void 0===Ee||null===(oe=Ee.processModule)||void 0===oe?void 0:oe.module)&&void 0!==ne||(null===ge||void 0===ge||ge.find((function(e){var n;return!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asMobileApp)})))):a.createElement("br",null),!(je||Qe)&&a.createElement("div",{className:v.host,style:{display:"inactive"===xe.status?"none":"",width:"100%"}},a.createElement("div",{className:v.dashboardPanel,style:{display:"flex",margin:"0px 0 0 0"}},(null===Ee||void 0===Ee||null===(le=Ee.processModule)||void 0===le||null===(ie=le.steps)||void 0===ie?void 0:ie.length)>0&&Ce.length>0&&!We?a.createElement(k.Z,{isProcessorOnly:qn,paymentID:Jn,navigateTo:un,selectedComponent:null!==Le&&void 0!==Le?Le:{},setSelectedComponent:ze,selectedProcess:Ee.processModule,onCancel:function(){tn(!1),qe(!0),setTimeout((function(){return qe(!1)}))}}):a.createElement(g.$j,{type:"BallTriangle",color:"black",height:40,width:"40px"}))),je&&a.createElement("div",{style:{width:"100%",padding:"0 40px"}},a.createElement(D.default,null)),Qe&&a.createElement("div",{style:{width:"100%",padding:"0 10px"}},a.createElement(eo,null)),(void 0==(null===Ee||void 0===Ee||null===(te=Ee.processModule)||void 0===te?void 0:te.stepIndex)||(null===Ee||void 0===Ee||null===(de=Ee.processModule)||void 0===de?void 0:de.stepIndex)<2)&&ge.length>0&&a.createElement("div",{style:{display:"flex",position:"fixed",bottom:"0",width:"100%"}},a.createElement(Xn,null)),gn&&a.createElement(g.U7,{hasCloseIcon:!0,isOpen:gn,onClose:function(){bn(!1),wn(-1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},a.createElement("div",{className:v.userPanelRows,style:{height:"auto",minHeight:"540px",marginTop:"20px",display:Cn>0?"none":""}},a.createElement(D.LabeledContainer,{label:"Billing & Payments"}),a.createElement("div",{className:v.wallet},a.createElement("div",{style:{color:"white",fontSize:"14px"}},"Reward Points:"),a.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 20px"}},null!==(ae=null===he||void 0===he||null===(ue=he.options)||void 0===ue||null===(re=ue.points)||void 0===re?void 0:re.toFixed(2))&&void 0!==ae?ae:"0.00"," Pts"),a.createElement("div",{style:{color:"white",fontSize:"14px"}},"Payments Wallet:"),a.createElement("div",{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"5px 0 80px"}},"Php ",null!==(se=null===_e||void 0===_e||null===(ve=_e.options)||void 0===ve||null===(ce=ve.credit)||void 0===ce?void 0:ce.toFixed(2))&&void 0!==se?se:"0.00"),a.createElement("div",{className:v.actionsContainer},a.createElement(r.Z,{clear:!0,title:"Top Up",clicked:function(){return wn(0)},style:{backgroundColor:"var(--app-color-blue)",color:"white",width:"140px",display:Cn>-1?"none":""}})),a.createElement("div",{style:{width:"inherit",display:-1===Cn?"none":""}},a.createElement("div",{style:{color:"white"},onClick:function(){return wn(-1)}},"Select your denomination:"),a.createElement(r.Z,{light:!0,title:"Php 500.00",clicked:function(){return wn(500)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 1000.00",clicked:function(){return wn(1e3)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 2000.00",clicked:function(){return wn(2e3)},style:{width:"100%"}}),a.createElement(r.Z,{light:!0,title:"Php 3000.00",clicked:function(){return wn(3e3)},style:{width:"100%"}}))),a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.createElement(r.Z,{loading:Ie,light:!0,title:Nn?"Hide":"Show Recent Payments",style:{marginRight:"40px"},clicked:function(){Nn?Dn(!1):(Ne(!0),(0,I.GP)().pipe((0,h.P)()).subscribe({next:function(e){Ne(!1),Dn(!0),kn(e.data)},error:function(){}}))}})),a.createElement("div",{style:{display:Nn?"":"none",padding:"20px 0px"}},"Recent Payments:",a.createElement("br",null),a.createElement("br",null),a.createElement(O.default,{title:"",card:!0,className:v.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:["Date","ID","Source","Amount"],list:Sn.map((function(e){var n;return{Date:"".concat(w()(e.starts_at).format("YY MMM DD h:mm a")),ID:"".concat(e.stripe_product),Source:"".concat(e.stripe_status),Amount:"".concat(null===(n=+e.stripe_price)||void 0===n?void 0:n.toFixed(2))}}))}))),Cn>0?a.createElement(P.default,{label:" ",withBack:!1,paymentPath:"wallet",onClose:function(){return bn(!1)},companyData:xe,subscriptionInfo:{user_id:_e.id,ref:_e.id,plan_price:Cn,currency:"PHP",plan:"Credits",total:Cn,billable_users:[he],duration:0,dlabel:"Flowhero",id:(0,m.mR)()},onError:function(){return bn(!1)}}):a.createElement(a.Fragment,null,a.createElement("p",{style:{fontSize:"10px"}},""!==T.lw?"Payments by":""),a.createElement("img",{src:"https://files.readme.io/7586db8-small-paymongo_api_white.png",style:{backgroundColor:"black",height:"30px",width:"140px"}}))),en&&a.createElement(k.p,{modalVisible:en,heading:"Task for ".concat(null===Ee||void 0===Ee||null===(pe=Ee.processModule)||void 0===pe||null===(me=pe.module)||void 0===me?void 0:me.name),task:!0===en?{}:en,isProcess:!0,blured:!0,shadowedContainerStyle:{width:"100%"},onClose:function(){return nn(!1)},isEdit:!0!==en,labels:{valueL:"Value"}}),Ue&&a.createElement(g.P9,{openModal:Ue,setOpenModal:Re,slug:null===xe||void 0===xe?void 0:xe.slug}))}))},63124:function(e,n,o){o.d(n,{p:function(){return nn},Z:function(){return tn}});var l=o(87462),i=o(45987),t=o(4942),d=o(93433),a=o(1413),u=o(29439),r=o(67861),s=o(39518),v=o(11577),c=o(10103),p=o(65019),m=o(88550),f=o(88827),_=o(88374),h=o(96189),y=o(73500),g=o(6073),b=o(43984),x=o(23280),E=o(59401),C=o(41771),w=o(93389),M=o(34710),Z=o(49119),S=o(12308),k=o(57297),P=o(27436),I=o(63864),N=o(10074),D=o(63077),T=o(79492),L=o.n(T),z=o(89293),A=o(4358),O=o(1542),U=(o(83381),o(66918)),R=o(49523),B=o(25403),F=o(4292),W=o(9204),q=o(32086),Y=o(53431),H=o(68218),j=o(84634),G=o(35606),J=o(79544),V=o(98032),Q=o(62169),X=o(13397),$=o(88346),K=o(8284),ee=o(74369),ne=o(3616),oe=o(90421),le=o(7538),ie=o(77802),te=o(97606),de=(o(67055),o(71901),o(50981)),ae=o.n(de),ue=o(87424),re=o(27658),se=o(52902),ve=o(12075),ce=o(44408),pe=o(23910),me=(o(56120),o(37704),o(72666),o(68623),o(3863),o(95361),{ProcessModuleContainer:"ProcessModule_ProcessModuleContainer__FsiP8",modalLabelHeader:"ProcessModule_modalLabelHeader__RSEXx",processStepHost:"ProcessModule_processStepHost__jnVYj",processModuleContainer:"ProcessModule_processModuleContainer__T-efO",renderComponentContainer:"ProcessModule_renderComponentContainer__MQMoJ",accordionModuleContainer:"ProcessModule_accordionModuleContainer__QQQn5",detailContainer:"ProcessModule_detailContainer__yrECc",leftCardMargin:"ProcessModule_leftCardMargin__+5cc+",centeredCardMargin:"ProcessModule_centeredCardMargin__8ns+o",centeredSpinner:"ProcessModule_centeredSpinner__T1+25",emptyElementsSection:"ProcessModule_emptyElementsSection__LP79x",stepCounter:"ProcessModule_stepCounter__BLQiH",clockIcon:"ProcessModule_clockIcon__Iq90d",stepTitle:"ProcessModule_stepTitle__92AhY",stepGuidanceSmaller:"ProcessModule_stepGuidanceSmaller__fbek+",stepTitleSmaller:"ProcessModule_stepTitleSmaller__o-RAS",stepGuidance:"ProcessModule_stepGuidance__VN9ID",inputContainer:"ProcessModule_inputContainer__ov5HE",selectInput:"ProcessModule_selectInput__gIlsq",multiselectWithSearch:"ProcessModule_multiselectWithSearch__HPDWF",smoMultiselectParent:"ProcessModule_smoMultiselectParent__XMpxu",selectMenuItem:"ProcessModule_selectMenuItem__D9YuM",inputClassName:"ProcessModule_inputClassName__FaizJ",toggleMenuInputButton:"ProcessModule_toggleMenuInputButton__u2LB6",goToNextStep:"ProcessModule_goToNextStep__5FEFk",nextStepsContainer:"ProcessModule_nextStepsContainer__0lDZ4",nextStepImageContainer:"ProcessModule_nextStepImageContainer__ESZoP",nextStepWrapper:"ProcessModule_nextStepWrapper__8aQAo",tasksTableHost:"ProcessModule_tasksTableHost__jF7kU",headerContainer:"ProcessModule_headerContainer__B9M39",content:"ProcessModule_content__TwxRx","react-grid-layout":"ProcessModule_react-grid-layout__kuSHy",layoutJSON:"ProcessModule_layoutJSON__swsUL",columns:"ProcessModule_columns__74Ypn","react-grid-item":"ProcessModule_react-grid-item__SV1zr","react-grid-placeholder":"ProcessModule_react-grid-placeholder__RsO19",resizing:"ProcessModule_resizing__lsJHw",static:"ProcessModule_static__fjtpd",text:"ProcessModule_text__JRaDx",minMax:"ProcessModule_minMax__n6Nqc",add:"ProcessModule_add__73-R8","react-grid-dragHandleExample":"ProcessModule_react-grid-dragHandleExample__ifaCX",cssTransforms:"ProcessModule_cssTransforms__Tj9J0","react-draggable-dragging":"ProcessModule_react-draggable-dragging__df7gg","react-resizable-handle":"ProcessModule_react-resizable-handle__HFiOI",singleButton:"ProcessModule_singleButton__VBAVx",menuRightButtons:"ProcessModule_menuRightButtons__YMGk1",menuButtons:"ProcessModule_menuButtons__t3peI",menuAccordionButtons:"ProcessModule_menuAccordionButtons__IwPeb",detailLabel:"ProcessModule_detailLabel__ujv54",subLabel:"ProcessModule_subLabel__ljjWe",modalHeaderTitle:"ProcessModule_modalHeaderTitle__20ZkP",p:"ProcessModule_p__fq5W3",itemsTable:"ProcessModule_itemsTable__Lhi8m",sharesTable:"ProcessModule_sharesTable__0LY0Q",peoplePositionsSelect:"ProcessModule_peoplePositionsSelect__3PUST",peoplePositionsSelectInput:"ProcessModule_peoplePositionsSelectInput__uW3vb",peoplePositionsSelectMenuOverlay:"ProcessModule_peoplePositionsSelectMenuOverlay__7WF9K",peoplePositionsSelectMenuOverlayItem:"ProcessModule_peoplePositionsSelectMenuOverlayItem__thx5T",deleteText:"ProcessModule_deleteText__LHcJR",deleteButton:"ProcessModule_deleteButton__Vd-mb",searchContainer:"ProcessModule_searchContainer__7U0ti",searchInput:"ProcessModule_searchInput__21v+N",emailInput:"ProcessModule_emailInput__OSseh",actionsContainer:"ProcessModule_actionsContainer__dN4VO",detailButton:"ProcessModule_detailButton__hsMZQ",detailButtonTitleContainer:"ProcessModule_detailButtonTitleContainer__9vGQV",fetchingLatestP:"ProcessModule_fetchingLatestP__w43Ah",modalTitle:"ProcessModule_modalTitle__ZzDzz",modalSubTitle:"ProcessModule_modalSubTitle__iCPup",dropdownSelectComponent:"ProcessModule_dropdownSelectComponent__fwabj",dropdownSelectComponentL:"ProcessModule_dropdownSelectComponentL__UjHu+",dropdownSelectOperation:"ProcessModule_dropdownSelectOperation__Z0sof",dropdownSelectReport:"ProcessModule_dropdownSelectReport__VhkMx",cardTitle:"ProcessModule_cardTitle__5UI1u",customButton:"ProcessModule_customButton__EmZ3f",fieldRowContainer:"ProcessModule_fieldRowContainer__w-2m5",templateInformation:"ProcessModule_templateInformation__diTyj",emulatedFlexGap:"ProcessModule_emulatedFlexGap__0zLFx",selectAndMultiselectHost:"ProcessModule_selectAndMultiselectHost__heH79",selectAndMultiselectHostTiles:"ProcessModule_selectAndMultiselectHostTiles__iC2AB",section:"ProcessModule_section__wECKG",accordionContainer:"ProcessModule_accordionContainer__ivI1e",active:"ProcessModule_active__krZBG",title:"ProcessModule_title__ePgXX",customTitleInput:"ProcessModule_customTitleInput__ONvpq",icon:"ProcessModule_icon__OW9E6",loaderContainer:"ProcessModule_loaderContainer__zN3G3",host:"ProcessModule_host__95lCJ",iconsContainer:"ProcessModule_iconsContainer__ktO+d",rotate:"ProcessModule_rotate__gwBr5",fieldTypeInput:"ProcessModule_fieldTypeInput__+x8RA",fieldMapInput:"ProcessModule_fieldMapInput__TyyrY",fieldTypeDate:"ProcessModule_fieldTypeDate__yjKi1",labelInput:"ProcessModule_labelInput__HMbSI",accordion:"ProcessModule_accordion__Er3uD",regularAccordion:"ProcessModule_regularAccordion__FpzQa",singleInputContainer:"ProcessModule_singleInputContainer__jGXcH",dateInputContainer:"ProcessModule_dateInputContainer__gXUmg",inputContainerClassName:"ProcessModule_inputContainerClassName__T8Rwy",phoneIInput:"ProcessModule_phoneIInput__DrOHj",currencySelectContainer:"ProcessModule_currencySelectContainer__w+Q8U",currencySymbol:"ProcessModule_currencySymbol__hnqlD",currencySelectComponent:"ProcessModule_currencySelectComponent__DiSZQ",currencySelectMenuOverlayList:"ProcessModule_currencySelectMenuOverlayList__eWmgR",currencySelectMenuOverlayListItem:"ProcessModule_currencySelectMenuOverlayListItem__HJNGm",currencySearchInput:"ProcessModule_currencySearchInput__QNuK3",currencyClearControlsClassName:"ProcessModule_currencyClearControlsClassName__cQ2JL",currencyInputContainerClassName:"ProcessModule_currencyInputContainerClassName__jjeME",currencyInput:"ProcessModule_currencyInput__ockL5",peopleContainer:"ProcessModule_peopleContainer__qhRGZ",peopleBooleansOptions:"ProcessModule_peopleBooleansOptions__1QKZY",peoplePositionSelectContainer:"ProcessModule_peoplePositionSelectContainer__Dek6h",unfocusableWrapper:"ProcessModule_unfocusableWrapper__lYnko",menuOverlayList:"ProcessModule_menuOverlayList__stXtG",menuOverlayListItem:"ProcessModule_menuOverlayListItem__q5Cp8",menuOverlayListItemInput:"ProcessModule_menuOverlayListItemInput__mGtmf",menuOverlayListItemInputContainerClassName:"ProcessModule_menuOverlayListItemInputContainerClassName__c2qiO",openSelectWithSearchHost:"ProcessModule_openSelectWithSearchHost__GVLkU",openSelectWithSearch:"ProcessModule_openSelectWithSearch__zQUZm",dropdownClassContainer:"ProcessModule_dropdownClassContainer__4rFl4",dropdownHeightClassContainer:"ProcessModule_dropdownHeightClassContainer__6Rqku",fieldTypeTextarea:"ProcessModule_fieldTypeTextarea__9rSMB",fullLengthTextarea:"ProcessModule_fullLengthTextarea__eYuTp",filtersContainer:"ProcessModule_filtersContainer__ZXr-v",filtersContainerII:"ProcessModule_filtersContainerII__7cIxb",customMenuOverlayListItemCheckboxCheckedMark:"ProcessModule_customMenuOverlayListItemCheckboxCheckedMark__vi6VV",customMenuOverlayListItemNormalCheckedMark:"ProcessModule_customMenuOverlayListItemNormalCheckedMark__U5+ho",checkbox:"ProcessModule_checkbox__iHQvz",listContainer:"ProcessModule_listContainer__gwweI",tableHostMobile:"ProcessModule_tableHostMobile__j-DPP",tableHostSimple:"ProcessModule_tableHostSimple__Vct0M",action:"ProcessModule_action__iCvd1",mobileTable_ii:"ProcessModule_mobileTable_ii__vrooR",centerDiv:"ProcessModule_centerDiv__DT2hU",calendar:"ProcessModule_calendar__dkHMo",multiselectComponent:"ProcessModule_multiselectComponent__nKtu7",multiselectComponentNoBorder:"ProcessModule_multiselectComponentNoBorder__E-5tg",infoTitle:"ProcessModule_infoTitle__ZuUto",mappopup:"ProcessModule_mappopup__jQF6G",popup:"ProcessModule_popup__UhrxE",ratingsDiv:"ProcessModule_ratingsDiv__CRzxP",slider:"ProcessModule_slider__Le7zs",ratingsInput:"ProcessModule_ratingsInput__TJzIX",swiperslide:"ProcessModule_swiperslide__rHvXl",dashboardCard:"ProcessModule_dashboardCard__8GAEl",buttonsContainer:"ProcessModule_buttonsContainer__IZ5YN"}),fe=o(58535),_e=o(9825),he=o.n(_e),ye=o(79633),ge=o(94667),be=o(47144),xe=o.n(be),Ee=o(75105),Ce=o(66180),we=o.n(Ce),Me=o(29960),Ze=o(13721),Se=o(20777),ke=o(91426),Pe=o(48630),Ie=o(32588),Ne=(o(68140),o(43077)),De=o(51481),Te=o(31266),Le=o(84952),ze=o(6978),Ae=o(36977),Oe=o(41757);e=o.hmd(e);var Ue=o(456),Re=["height","start","onClick"],Be=["height","start","onClick"],Fe=["height","start","onClick"],We=(0,r.memo)((function(e){var n,o,l,i,t,d=e.step,s=e.isMandatoryError,c=e.nextButtonClicked,p=e.setIsMandatoryError,m=e.begunModule,f=e.companyData,_=e.components,y=e.isEditing,g=e.companyUsersArray,b=e.products,x=e.selectedComponent,E=e.goToNextStep,C=e.authenticatedUser,M=(e.setIsCompleted,e.companyPositionsArray),S=e.blueprints,P=e.allModules,N=e.editMode,D=e.isProcessorOnly,T=((0,Z.WidthProvider)(Z.Responsive),(0,r.useState)(null===(n=null===x||void 0===x?void 0:x.is_complete)||void 0===n||n)),L=((0,u.Z)(T,1)[0],[]),z=(null===d||void 0===d||null===(o=d.component_blueprints)||void 0===o?void 0:o.length)>0?null===d||void 0===d?void 0:d.component_blueprints.map((function(e,n){var o=e.selected_fields.find((function(e){return"Template"===e.data_type_name&&1==e.visible})),l=e.selected_fields.find((function(e){return"Video"===e.data_type_name&&1==e.visible}));return o?r.createElement("div",{key:n,style:{padding:"10px"}},r.createElement(k.ZP,{templateName:o.field_name,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,component:e,companyData:f,components:_,products:b,selectedComponent:x})):e.selected_fields.filter((function(e){return 1==e.visible})).length>0?r.createElement("div",{key:n,className:me.renderComponentContainer},r.createElement(Ye,{editMode:N,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,blueprints:S,component:e,companyData:f,components:_,allModules:P,products:b,authenticatedUser:C,selectedComponent:x,companyUsersArray:g,companyPositionsArray:M,begunModule:m,isProcessorOnly:D}),(null===x||void 0===x?void 0:x.id)&&(null===l||void 0===l?void 0:l.value)&&ae()(null===l||void 0===l?void 0:l.value)<=(0,de.now)()&&(0,de.now)()<ae()(null===l||void 0===l?void 0:l.value).add("minutes",10)&&r.createElement(Ye,{editMode:N,nextButtonClicked:c,isMandatoryError:s,blueprintIndex:n,setIsMandatoryError:p,blueprints:S,component:(0,a.Z)((0,a.Z)({},e),{},{name:"Video Call",selected_fields:[(0,a.Z)((0,a.Z)({},l),{},{options:(0,a.Z)((0,a.Z)({},l.options),{},{start:!0})})]}),companyData:f,components:_,allModules:P,products:b,authenticatedUser:C,selectedComponent:x,companyUsersArray:g,companyPositionsArray:M,begunModule:m,shouldDisplay:!0,isEnabled:!0})):r.createElement("div",{key:n,className:me.emptyElementsSection})})):r.createElement("div",{className:me.emptyElementsSection}),A=(0,r.useState)({currentBreakpoint:"lg",compactType:"vertical",mounted:!1,layouts:{lg:d.options.layout},editing:y}),O=(0,u.Z)(A,2),U=O[0],R=O[1];return r.createElement("div",{style:{width:"inherit"}},r.createElement(h.j3,{permissions:[h.po.processes.create]},r.createElement("button",{onClick:function(){L=U.layouts.lg.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{static:!1})})),R((0,a.Z)((0,a.Z)({},U),{},{layouts:{lg:L},editing:!U.editing}))},hidden:!U.editing},"Edit Layout"),r.createElement("button",{onClick:function(){var e=L.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{static:!0})}));(0,w.T5)({options:(0,a.Z)((0,a.Z)({},d.options),{},{layout:e})},d.id,!0).pipe((0,v.P)()).subscribe({next:function(n){R((0,a.Z)((0,a.Z)({},U),{},{layouts:{lg:e},editing:!U.editing}))},error:function(e){R((0,a.Z)((0,a.Z)({},U),{},{layouts:{lg:d.options.layout},editing:!U.editing}))}})},hidden:!U.editing},"Save Layout")),z,(null===(l=m.processModule.module)||void 0===l?void 0:l.options.forSpecificUsers)&&(null===d||void 0===d?void 0:d.is_end)&&r.createElement("div",{style:{height:"100px"}}),(null===d||void 0===d||null===(i=d.pathway_steps)||void 0===i?void 0:i.length)>0&&function(){var e=d.pathway_steps.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=g.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return r.createElement("div",{className:me.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},r.createElement(I.Z,{visible:!0,mandatory:!1,items:e,onChange:function(e){E(e)},placeholder:"Continue to this step..."}))}(),(null===d||void 0===d||null===(t=d.pathway_processes)||void 0===t?void 0:t.length)>0&&function(){var e=d.pathway_processes.map((function(e){return{label:"".concat(e.name),value:e.id}})),n=g.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}));return r.createElement("div",{className:me.emptyElementsSection,style:{width:"60%",padding:"20px 20px 20px 20px",height:"".concat(n.length*n.length>4?70:200,"px")}},r.createElement(I.Z,{visible:!0,mandatory:!1,items:e,onChange:function(){},placeholder:"Continue to this process..."}))}(),e.children)})),qe=r.forwardRef((function(e,n){var o,l,i,s,v,c,p=e.begunModule,m=e.allModules,f=e.companyData,_=(e.setSelectedComponent,e.selectedComponent),h=e.companyUsersArray,g=e.companyPositionsArray,b=e.print,x=e.components,E=void 0===x?[]:x,C=(e.user,e.bypassCustom),w=void 0!==C&&C,M=(0,r.useState)([]),Z=(0,u.Z)(M,2),P=Z[0],I=Z[1];(0,r.useEffect)((function(){var o,l,i,t=[];if(H.Z(j.Z("group"))(null!==(o=null===_||void 0===_?void 0:_.component_fields)&&void 0!==o?o:[]).map((function(e){t=[].concat((0,d.Z)(t),[{id:e.component_blueprint_id,selected_fields:$.Z(K.Z("group",e.group))(_.component_fields)}])})),(null===p||void 0===p||null===(l=p.processModule)||void 0===l||null===(i=l.completeSteps)||void 0===i?void 0:i.length)>0){var u,s,v=[r.createElement("div",{key:0,style:{display:null!==e&&void 0!==e&&e.noHeader?"none":""}},b&&r.createElement("p",{className:me.detailLabel},f.display_name)),N()];if(p.processModule.completeSteps.map((function(e){e.component_blueprints.filter((function(e){var n,o;return 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.asModuleList)||void 0==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.asModuleList)})).map((function(n,o){var l,i,u,s,c,y,g=null!==(l=null===_||void 0===_||null===(i=_.component_fields)||void 0===i?void 0:i.filter((function(e){return e.component_blueprint_id===n.id})))&&void 0!==l?l:[],b=!(null===g||void 0===g||!g.find((function(e){return!(""===e.value||void 0===e.value||null===e.value)})));(null===g||void 0===g?void 0:g.length)>0&&(null===(u=n.selected_fields)||void 0===u?void 0:u.filter((function(e){return 1==e.visible})).length)>0&&(null!==n.options?!1!==n.options.allowMultipleInputs&&void 0!==n.options.allowMultipleInputs&&null!==n.options.allowMultipleInputs||(v=[].concat((0,d.Z)(v),[r.createElement("div",{key:v.length,style:{display:b?"":"none"}},r.createElement(Xe,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,a.Z)((0,a.Z)({},n),{},{created_date:_.created_date,values:null!==(s=null===(c=t.find((function(e){return e.id===n.id})))||void 0===c?void 0:c.selected_fields)&&void 0!==s?s:[]}),begunModule:p,allModules:m,companyData:f,components:t,allComponents:E,companyUsersArray:h,status:null===_||void 0===_?void 0:_.status,selectedComponent:_}))])):v=[].concat((0,d.Z)(v),[r.createElement("div",{key:v.length},r.createElement(Xe,{step:e,isInherited:!1,nextButtonClicked:function(){},isMandatoryError:!1,stepId:e.id,blueprintIndex:o,setIsMandatoryError:function(){},component:(0,a.Z)((0,a.Z)({},n),{},{created_date:_.created_date,values:null===(y=t.find((function(e){return e.id===n.id})))||void 0===y?void 0:y.selected_fields}),begunModule:p,allModules:m,companyData:f,components:t,allComponents:E,companyUsersArray:h,status:null===_||void 0===_?void 0:_.status,selectedComponent:_}))]))}))})),null!==p&&void 0!==p&&null!==(u=p.processModule)&&void 0!==u&&null!==(s=u.completeSteps)&&void 0!==s&&s.find((function(e){var n;return(null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Template"===e.data_type_name})).length>0})).length)>0&&0==w})))return void I(r.createElement(k.C6,{ref:n,begunModule:p,allModules:m,companyData:f,components:E,selectedComponent:_,companyUsersArray:h,companyPositionsArray:g},v,r.createElement(en,{component:_}),r.createElement(Ke,{component:_})));I([].concat((0,d.Z)(v),[r.createElement(en,{component:_,key:v.length+1}),r.createElement(Ke,{component:_,key:v.length+2})]))}}),[_]);var N=function(){var e,n,o,l,i,d,u,s,v,c,m,h,g,b,x,E,C=null===p||void 0===p||null===(e=p.processModule)||void 0===e||null===(n=e.completeSteps)||void 0===n?void 0:n.find((function(e){return e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"Transactions Field"===e.data_type_name||"Template"===e.data_type_name})).length)>0})).length>0})),w=null!==(o=null!==(l=null!==(i=null===C||void 0===C||null===(d=C.component_blueprints)||void 0===d?void 0:d.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))&&void 0!==i?i:null===C||void 0===C||null===(u=C.component_blueprints)||void 0===u?void 0:u.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Transactions Field"===e.data_type_name})).length)>0})))&&void 0!==l?l:null===C||void 0===C||null===(s=C.component_blueprints)||void 0===s?void 0:s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Template"===e.data_type_name})).length)>0})))&&void 0!==o?o:void 0,M=w?null===(v=w.selected_fields)||void 0===v||null===(c=v.find((function(e){return"Template"===e.data_type_name})))||void 0===c?void 0:c.field_name:"",Z=null===f||void 0===f||null===(m=f.misc_info)||void 0===m||null===(h=m.templatesData)||void 0===h?void 0:h.find((function(e){return e.name===M})),k=Z?(null===Z||void 0===Z||null===(g=Z.tlist)||void 0===g?void 0:g.length)>0?null===Z||void 0===Z?void 0:Z.tlist:null===(b=Z.config)||void 0===b?void 0:b.filter((function(e){return"Text"===e.value||"Number"===e.value||"Connector"===e.value})):w?w.selected_fields.filter((function(e){var n,o,l;return 1==e.visible&&!(""===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||void 0==(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||null==(null===(l=e.options)||void 0===l?void 0:l.mapToItem))})):[];return(null===_||void 0===_||null===(x=_.component_items)||void 0===x?void 0:x.length)>0&&r.createElement("div",{className:me.accordionContainer,style:{border:y.tq?"0":"",marginTop:"10px",padding:y.tq?"10px":"",backgroundColor:"var(--app-color-gray-lightest)"}},r.createElement(S.default,{modern:!0,className:me.listContainer,isReport:!1,"app-variant-is-mobile":"true",title:"Items",columns:k?k.map((function(e){return Z?e.label:e.field_name})):["Product ID","Quantity","Price"],list:null===_||void 0===_||null===(E=_.component_items)||void 0===E?void 0:E.map((function(e){var n,o,l,i,d,u,s,v,c,p,m,f,_,h,y,g,b,x,E,C,w,M,S,P,I,N,D,T,L;if((null===Z||void 0===Z||null===(n=Z.tlist)||void 0===n?void 0:n.length)>0){var z={};return Z.tlist.filter((function(n){z=(0,a.Z)((0,a.Z)({},z),{},(0,t.Z)({},null===n||void 0===n?void 0:n.label,e[null===n||void 0===n?void 0:n.key]))})),z}var A=e.item_code,O=e.quantity,U=null!==(o=e.alt_value)&&void 0!==o?o:0,R=null!==(l=e.value)&&void 0!==l?l:0,B=null!==(i=e.total)&&void 0!==i?i:0;return void 0!=Z?(y={},(0,t.Z)(y,null!==(d=null===(u=Z.config.find((function(e){return"item_code"===e.key})))||void 0===u?void 0:u.label)&&void 0!==d?d:"Item Code",r.createElement("div",{className:me.templateInformation},A)),(0,t.Z)(y,null!==(s=null===(v=Z.config.find((function(e){return"value"===e.key})))||void 0===v?void 0:v.label)&&void 0!==s?s:"Price",r.createElement("div",{className:me.templateInformation},R)),(0,t.Z)(y,null!==(c=null===(p=Z.config.find((function(e){return"total"===e.key})))||void 0===p?void 0:p.label)&&void 0!==c?c:"Total",r.createElement("div",{className:me.templateInformation},B)),(0,t.Z)(y,null!==(m=null===(f=Z.config.find((function(e){return"quantity"===e.key})))||void 0===f?void 0:f.label)&&void 0!==m?m:"Quantity",r.createElement("div",{className:me.templateInformation},O)),(0,t.Z)(y,null!==(_=null===(h=Z.config.find((function(e){return"alt_value"===e.key})))||void 0===h?void 0:h.label)&&void 0!==_?_:"Discount",r.createElement("div",{className:me.templateInformation},U)),(0,t.Z)(y,"id",e.id),y):null!==k&&void 0!==k&&k.find((function(e){var n,o,l,i,t;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)||"value"===(null===(o=e.options)||void 0===o?void 0:o.mapToItem)||"total"===(null===(l=e.options)||void 0===l?void 0:l.mapToItem)||"quantity"===(null===(i=e.options)||void 0===i?void 0:i.mapToItem)||"alt_value"===(null===(t=e.options)||void 0===t?void 0:t.mapToItem)}))?(T={},(0,t.Z)(T,null!==(g=null===(b=k.find((function(e){var n;return"item_code"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===b?void 0:b.field_name)&&void 0!==g?g:"Product ID",r.createElement("div",{className:me.templateInformation},A)),(0,t.Z)(T,null!==(x=null===(E=k.find((function(e){var n;return"value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===E?void 0:E.field_name)&&void 0!==x?x:"Price",r.createElement("div",{className:me.templateInformation},R)),(0,t.Z)(T,null!==(C=null===(w=k.find((function(e){var n;return"total"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===w?void 0:w.field_name)&&void 0!==C?C:"Total",r.createElement("div",{className:me.templateInformation},B)),(0,t.Z)(T,null!==(M=null===(S=k.find((function(e){var n;return"quantity"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===S?void 0:S.field_name)&&void 0!==M?M:"Quantity",r.createElement("div",{className:me.templateInformation},O)),(0,t.Z)(T,null!==(P=null===(I=k.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===I?void 0:I.field_name)&&void 0!==P?P:"Discount",r.createElement("div",{className:me.templateInformation},U)),(0,t.Z)(T,null!==(N=null===(D=k.find((function(e){var n;return"alt_value"===(null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||void 0===D?void 0:D.field_name)&&void 0!==N?N:"Actual",r.createElement("div",{className:me.templateInformation},U)),(0,t.Z)(T,"id",e.id),T):(L={},(0,t.Z)(L,"Product ID",A),(0,t.Z)(L,"Quantity",O),(0,t.Z)(L,"Price",R),L)})),onListItemClick:function(e){}}))},D=r.createElement("div",null,((null===_||void 0===_||null===(o=_.shared_users)||void 0===o?void 0:o.length)>0||(null===_||void 0===_||null===(l=_.shared_positions)||void 0===l?void 0:l.length)>0)&&r.createElement("div",{className:me.accordionContainer},r.createElement("p",{className:me.cardTitle},"Shares"),r.createElement("div",{style:{display:"flex"}},(null===_||void 0===_||null===(i=_.shared_positions)||void 0===i?void 0:i.length)>0&&r.createElement(S.default,{className:me.sharesTable,columns:["Position"],list:null===_||void 0===_||null===(s=_.shared_positions)||void 0===s?void 0:s.map((function(e){var n=g.find((function(n){return n.value===e.id}));return(0,t.Z)({},"Position",n.label)}))}),(null===_||void 0===_||null===(v=_.shared_users)||void 0===v?void 0:v.length)>0&&r.createElement(S.default,{className:me.sharesTable,columns:["User"],list:null===_||void 0===_||null===(c=_.shared_users)||void 0===c?void 0:c.map((function(e){var n=h.find((function(n){return n.id===e.id}));return(0,t.Z)({},"User","".concat(n.first_name," ").concat(n.last_name))}))}))));return r.createElement("div",{ref:n,style:{userSelect:"none",padding:b?"50px 120px 50px 100px":"50px 10px 10px 10px",alignSelf:"center",width:"100%"}},P,D)})),Ye=function(e){var n,o,l,i,t,s,v,c,p,f,_,g,b,x,E,w,M,Z,S,k,I,N,D,T=e.allModules,L=e.component,A=e.blueprintIndex,O=e.nextButtonClicked,U=e.setIsMandatoryError,R=e.companyUsersArray,B=e.companyData,F=e.components,W=e.products,Y=e.authenticatedUser,H=e.begunModule,j=e.blueprints,G=e.selectedComponent,J=e.companyPositionsArray,V=e.editMode,Q=e.isProcessorOnly,X=e.shouldDisplay,$=void 0===X?(!1===(null===(n=L.options)||void 0===n?void 0:n.useCustomTemplate)||void 0===(null===(o=L.options)||void 0===o?void 0:o.useCustomTemplate))&&(void 0===(null===(l=L.options)||void 0===l?void 0:l.showOnly)||(!((null===(i=L.options)||void 0===i||null===(t=i.showOnly)||void 0===t?void 0:t.length)>0)||(null===(s=L.options)||void 0===s||null===(v=s.showOnly)||void 0===v?void 0:v.filter((function(e){var n;return(null===Y||void 0===Y||null===(n=Y.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0)):X,ee=e.isEnabled,ne=void 0===ee?void 0===(null===G||void 0===G?void 0:G.id)||((null===G||void 0===G||null===(c=G.created_by)||void 0===c?void 0:c.id)===Y.id||(void 0===(null===H||void 0===H||null===(p=H.processModule)||void 0===p||null===(f=p.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.strict)||0==(null===H||void 0===H||null===(g=H.processModule)||void 0===g||null===(b=g.module)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.strict)||void 0!==(null===(E=L.options)||void 0===E?void 0:E.showOnly)&&((null===(w=L.options)||void 0===w||null===(M=w.showOnly)||void 0===M?void 0:M.length)>0&&(null===(Z=L.options)||void 0===Z||null===(S=Z.showOnly)||void 0===S?void 0:S.filter((function(e){var n;return(null===Y||void 0===Y||null===(n=Y.positions)||void 0===n?void 0:n.filter((function(n){return n.id===e})).length)>0})).length)>0))):ee,oe=(0,m.pQ)(),le=(0,u.Z)(oe,2),ie=le[0],te=le[1],de=(0,r.useState)(me.active),ae=(0,u.Z)(de,2),ue=ae[0],re=(ae[1],(0,r.useState)(!1)),se=(0,u.Z)(re,2),ve=se[0],ce=se[1],pe=(0,r.useState)(""),fe=(0,u.Z)(pe,2),_e=fe[0],he=fe[1],ye=(0,r.useRef)(null),ge=null===(k=ie.currentStep)||void 0===k?void 0:k.component_blueprints.findIndex((function(e){return e.id===L.id}));(0,r.useEffect)((function(){be()}),[O]);var be=function(){var e;null!==L&&void 0!==L&&null!==(e=L.selected_fields)&&void 0!==e&&e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))?U(!0):U(!1)},Ee=(0,r.useCallback)((function(){var e,n,o,l=(0,d.Z)(null!==(e=null===(n=ie.currentStep)||void 0===n?void 0:n.component_blueprints)&&void 0!==e?e:[]),i=null===(o=l[ge])||void 0===o?void 0:o.selected_fields;be(),l[ge].selected_fields=null===i||void 0===i?void 0:i.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{errors:!0!==e.mandatory||e.value?"":"Field is mandatory"})})),te({action:m._U.setComponentBlueprints,value:l}),te({action:m._U.setModuleNewStepComponents,value:l})}),[ie.currentStep]),Ce=function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n];"Number"===(null===a||void 0===a?void 0:a.data_type_name)?Number(+e)?a.value=e:""===e&&(a.value=""):null!==a&&void 0!==a&&a.data_type_name&&(a.value=e),null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),be(),te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t})},we=(0,r.useCallback)((function(e,n,o){var l,i,t,a=(0,d.Z)(null!==(l=null===(i=ie.currentStep)||void 0===i?void 0:i.component_blueprints)&&void 0!==l?l:[]),u=null===(t=a[ge])||void 0===t?void 0:t.selected_fields[n];u.options.country_code=null===e||void 0===e?void 0:e.countryCode,u.options.country_name=null===e||void 0===e?void 0:e.name,u.options.country_prefix="+".concat(null===e||void 0===e?void 0:e.dialCode),te({action:m._U.setComponentBlueprints,value:a}),te({action:m._U.setModuleNewStepComponents,value:a}),Ce(o,n)}),[ie]),Me=(0,r.useCallback)((function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n];a.options.currency_type=null===e||void 0===e?void 0:e.label,a.options.currency_value=null===e||void 0===e?void 0:e.value,a.options.symbol=null===e||void 0===e?void 0:e.symbol,te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t})}),[ie]),Ze=L.selected_fields.filter((function(e){return"Transaction List"===e.data_type_name||"Step List"===e.data_type_name})).length>0;return r.createElement("div",{id:"accordion",className:me.accordionModuleContainer,key:A,style:{width:Ze?"100%":"",border:Q&&ne?"4px solid var(--app-color-gray-lighter)":Ze?"0":"",boxShadow:y.tq?Ze?"0 var(--app-color-white-lightest)":"":1==(null===C.Nbs||void 0===C.Nbs||null===(I=C.Nbs.options)||void 0===I?void 0:I.popup)?"0 var(--app-color-white-lightest)":"",display:$?"":"none",pointerEvents:ne?"":"none"}},r.createElement("div",{className:xe()(me.accordionContainer,ue),"app-variant-has-error":_e?"error":"",style:{border:y.tq?"0":"",padding:y.tq?"0":"",margin:y.tq?"0":""}},r.createElement("div",{ref:ye,style:{maxHeight:ue===me.active?"":"0px",display:"flex"},className:me.content},r.createElement(Ge,{blueprints:j,component:L,selectedComponent:G,handleInputChange:Ce,handlePrefixChange:we,handleCurrencyChange:Me,checkIfAreMandatoryErrored:be,handleCheckbox:function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]),a=null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n];a&&(a.value=e,null!==a&&void 0!==a&&a.value&&a.mandatory&&(a.errors=""),te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t}),be())},isInherited:!1,indexInContextArray:ge,handleLocationChange:function(e,n){var o,l,i,t=(0,d.Z)(null!==(o=null===(l=ie.currentStep)||void 0===l?void 0:l.component_blueprints)&&void 0!==o?o:[]);(null===(i=t[ge])||void 0===i?void 0:i.selected_fields[n]).value="".concat(e.lat,", ").concat(e.lng),te({action:m._U.setComponentBlueprints,value:t}),te({action:m._U.setModuleNewStepComponents,value:t})},processTaskContext:ie,begunModule:H,setTaskProcessContext:te,companyData:B,companyUsersArray:R,companyPositionsArray:J,components:F,products:W,allModules:T,editMode:V})),r.createElement("div",{style:{paddingLeft:"10px"}},r.createElement("div",{onClick:function(){var e;if(Ee(),null===L||void 0===L||null===(e=L.selected_fields)||void 0===e||!e.some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)}))){var n={},o=L.selected_fields.map((function(e){var o,l;if("Formula"===e.data_type_name){var i,t,d,u,r=(0,z.LV)(e.options,L.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),ie.components,null!==(i=ie.items)&&void 0!==i?i:[],null!==(t=null===ie||void 0===ie?void 0:ie.newStepComponents)&&void 0!==t?t:[]);if(null!==e&&void 0!==e&&null!==(d=e.options)&&void 0!==d&&d.mapToItem)n[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.mapToItem]="".concat(r);return(0,a.Z)((0,a.Z)({},e),{},{value:"".concat(r)})}null!==e&&void 0!==e&&null!==(o=e.options)&&void 0!==o&&o.mapToItem&&(n[null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.mapToItem]="".concat(null===e||void 0===e?void 0:e.value));return e}));if(Object.keys(n).length>0){var l,i=null===(l=ie.items)||void 0===l?void 0:l.find((function(e){return e.item_code===n.item_code}));void 0===i?te({action:m._U.addModuleItems,value:(0,a.Z)((0,a.Z)({},n),{},{id:(0,z.mR)()})}):0==n.quantity?te({action:m._U.removeModuleItems,value:i}):te({action:m._U.updateModuleItems,value:(0,a.Z)((0,a.Z)({},i),n)})}else{var t=JSON.parse(JSON.stringify((0,a.Z)((0,a.Z)({},L),{},{temp_id:(0,z.mR)(),selected_fields:o})));te({action:m._U.addModuleComponents,value:t})}ce(!1),he(""),L.selected_fields.map((function(e,n){Ce("",n)})),te({action:m._U.setModuleNewStepComponents,value:(0,d.Z)(q.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),(0,d.Z)(q.Z(K.Z("id",L.id))(ie.newStepComponents))))})}},className:me.iconsContainer,style:{display:null===L.options?"none":!0===(null===L||void 0===L||null===(N=L.options)||void 0===N?void 0:N.allowMultipleInputs)?"":"none"}},ve?r.createElement("div",{className:me.loaderContainer},r.createElement(Se.Z,{type:y.G6?"Watch":"Puff",color:"var(--app-color-gray-dark)",secondaryColor:"gray",radius:32,height:32,width:"32px"})):r.createElement(h.zx,{light:!0},r.createElement(C.mm_,null))))),_e&&(null===_e||void 0===_e||null===(D=_e.errors)||void 0===D?void 0:D.title)&&r.createElement(P.Z,{message:_e.errors.title}),_e&&(null===_e||void 0===_e?void 0:_e.message)&&r.createElement(P.Z,{message:_e.message}))};function He(e){return null!==e&&void 0!==e&&e.country_prefix?null===e||void 0===e?void 0:e.country_prefix:null!==e&&void 0!==e&&e.currency_value?(null===e||void 0===e?void 0:e.currency_value)+" ":""}var je=function(e,n,o,l,i){var t,a,u,r=null===(u=(0,d.Z)(null!==(t=null===(a=i.currentStep)||void 0===a?void 0:a.component_blueprints)&&void 0!==t?t:[])[o])||void 0===u?void 0:u.selected_fields[l];switch(e){case"Link":!function(e){var n;try{n=new URL(e)}catch(o){return!1}return"http:"===n.protocol||"https:"===n.protocol}(n)?r.errors="This field should contain a link!":r.errors="";break;case"E-mail":case"Email":new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!";break;case"Phone":new RegExp(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im).test(n)?r.errors="":r.errors="This field should contain an valid phone number!";break;case"Email Recipient":new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(n)?r.errors="":r.errors="This field should contain an valid email address!"}},Ge=(0,r.memo)((function(e){var n,o,p,f,_,g=e.component,b=e.selectedComponent,x=e.handleInputChange,E=e.indexInContextArray,w=e.handleCheckbox,Z=e.processTaskContext,k=e.setTaskProcessContext,P=e.isInherited,D=e.checkIfAreMandatoryErrored,T=e.handlePrefixChange,L=e.handleCurrencyChange,O=e.handleLocationChange,U=e.companyData,W=e.components,Y=(e.products,e.begunModule),Q=e.blueprints,X=e.companyUsersArray,$=e.companyPositionsArray,K=e.allModules,te=e.editMode,ue=(0,r.useState)(X.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id,user:e}}))),re=(0,u.Z)(ue,2),_e=re[0],be=re[1],xe=(0,s.v9)((function(e){return e.authReducer})),Ce=xe.authenticatedUser,Se=(0,s.v9)((function(e){return e.sessionReducer})),Oe=Se.user,Ue=(0,s.v9)((function(e){return e.flowReducer})),We=Ue.currentLocation,qe=Ue.allTasks,Ye=(Ue.allCompletedTasksPaginated,(0,r.useState)(!1)),Ge=(0,u.Z)(Ye,2),Ve=Ge[0],Xe=Ge[1],$e=(0,r.useState)(new Date),Ke=(0,u.Z)($e,2),en=Ke[0],on=Ke[1],ln=(0,r.useState)([new Date,new Date(ae()().add(7,"days"))]),tn=(0,u.Z)(ln,2),dn=tn[0],an=tn[1],un=(0,u.Z)(dn,2),rn=un[0],sn=un[1],vn=(0,r.useState)(""),cn=(0,u.Z)(vn,2),pn=cn[0],mn=cn[1],fn=(0,r.useState)([{label:"",value:""}]),_n=(0,u.Z)(fn,2),hn=_n[0],yn=_n[1],gn=(0,r.useState)(!0),bn=(0,u.Z)(gn,2),xn=bn[0],En=bn[1],Cn=(0,r.useState)(!0),wn=(0,u.Z)(Cn,2),Mn=wn[0],Zn=wn[1],Sn=(0,r.useState)({source:!1,destination:!1}),kn=(0,u.Z)(Sn,2),Pn=kn[0],In=kn[1],Nn=(0,r.useState)("50px"),Dn=(0,u.Z)(Nn,2),Tn=Dn[0],Ln=Dn[1],zn=(0,r.useState)(Array(12).fill("")),An=(0,u.Z)(zn,2),On=An[0],Un=An[1],Rn=(0,r.useState)({candidates:[]}),Bn=(0,u.Z)(Rn,2),Fn=Bn[0],Wn=Bn[1],qn=(0,r.useState)(!1),Yn=(0,u.Z)(qn,2),Hn=Yn[0],jn=Yn[1],Gn=(0,r.useState)({}),Jn=(0,u.Z)(Gn,2),Vn=Jn[0],Qn=Jn[1],Xn=(0,r.useState)("day"),$n=(0,u.Z)(Xn,2),Kn=$n[0],eo=$n[1],no=(0,r.useState)({}),oo=(0,u.Z)(no,2),lo=oo[0],io=oo[1],to=((0,r.useRef)(),(0,r.useState)(!1)),ao=(0,u.Z)(to,2),uo=ao[0],ro=ao[1],so=function(){ro(!uo)},vo=function(e,n){on(e),x(e,n)},co=(0,r.useCallback)((function(e){void 0!==e&&(0==_e.length?Xe(!0):Xe(!1),(0,Ee.n0)(e).pipe((0,v.P)()).subscribe({next:function(e){be(e),Xe(!1)}}))}),[]),po=(0,r.useCallback)((function(){0==$.length?Xe(!0):Xe(!1),(0,M.hj)().pipe((0,v.P)(1)).subscribe({})}),[]),mo=(0,r.useCallback)((function(e){var n;if(0!=(null===e||void 0===e||null===(n=e.analyze)||void 0===n?void 0:n.length)&&void 0!=(null===e||void 0===e?void 0:e.analyze)){var o={role:"user",parts:[{text:e.analyze}]};1==(null===e||void 0===e?void 0:e.current)?o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:"Transaction",data:(0,a.Z)((0,a.Z)((0,a.Z)({},Z.components.map((function(e){var n={};return e.selected_fields.filter((function(e){return n=(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},e.field_name,e.value))})),n}))),Z.newStepComponents.map((function(e){var n={};return e.selected_fields.filter((function(e){return n=(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},e.field_name,e.value))})),n}))),{},{items:Z.items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})})}]):(void 0!==e.module_id&&(o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:K.find((function(n){return n.id===e.module_id})).name,data:W.filter((function(n){return n.module_id===e.module_id})).map((function(e){var n,o={};return e.component_fields.filter((function(e){return o=(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},o),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}])),void 0!==e.module2_id&&(o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:K.find((function(n){return n.id===e.module2_id})).name,data:W.filter((function(n){return n.module_id===e.module2_id})).map((function(e){var n,o={};return e.component_fields.filter((function(e){return o=(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},o),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}])),void 0!==e.module3_id&&(o.parts=[].concat((0,d.Z)(o.parts),[{text:JSON.stringify({table:K.find((function(n){return n.id===e.module3_id})).name,data:W.filter((function(n){return n.module_id===e.module3_id})).map((function(e){var n,o={};return e.component_fields.filter((function(e){return o=(0,a.Z)((0,a.Z)({},o),{},(0,t.Z)({},e.field_name,e.value))})),(0,a.Z)((0,a.Z)({},o),{},{created_date:e.created_date,created_by:null===(n=e.created_by)||void 0===n?void 0:n.id,items:null===e||void 0===e?void 0:e.component_items.map((function(e){return{item:e.item_code,quantity:+e.quantity,value:e.value}}))})}))})}]))),Wn({candidates:[]}),Xe(!0),(0,ge.hd)(JSON.stringify(o)).pipe((0,v.P)()).subscribe({next:function(e){Xe(!1),Wn(e)},error:function(e){Wn({candidates:[{content:{parts:[{text:JSON.stringify(e)}]}}]}),Xe(!1)}})}else Wn({candidates:[{content:{parts:[{text:"Enter a question that I could answer"}]}}]})}),[]),fo=function(e){var n;return null===Z||void 0===Z||null===(n=Z.items)||void 0===n?void 0:n.map((function(n){var o={};return Object.keys(e.map).map((function(l){var i;o=(0,a.Z)((0,a.Z)({},o),{},(i={},(0,t.Z)(i,e.map[l],n[l]),(0,t.Z)(i,"item",n),i))})),o}))},_o=function(e){var n=e.field_name;return g.selected_fields.findIndex((function(e){return e.field_name===n}))},ho=function(e){var n=g.selected_fields.filter((function(e){return"Info"===e.data_type_name})),o=W.find((function(n){return n.id===e}));n.map((function(n){var l;null===n||void 0===n||null===(l=n.options)||void 0===l||l.list.map((function(l){var i,t,d=null===(i=o.component_fields)||void 0===i?void 0:i.find((function(e){return e.field_name===l})),a=_o({field_name:l});-1!=a&&(null===(t=o.component_fields)||void 0===t?void 0:t.length)>0&&(g.selected_fields[a].value=d?d.value:"",n.value=e)}))})),g.selected_fields.filter((function(e){return"Global"===e.data_type_name&&1==e.visible})).map((function(e){var n,l,i=null===(n=o.component_fields)||void 0===n?void 0:n.find((function(n){return n.field_name===e.field_name})),t=_o({field_name:e.field_name});-1!=t&&(null===(l=o.component_fields)||void 0===l?void 0:l.length)>0&&i&&(g.selected_fields[t].value=null===i||void 0===i?void 0:i.value)}))},yo=function(e){var n,o,l,i,t,d,a,u=null===(n=Y.processModule.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.global;u||(u=null===(l=Z.components.find((function(n){return n.selected_fields.filter((function(n){var o,l;return"Global"===n.data_type_name&&1==n.visible&&n.field_name===(null===(o=g.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global)})).length>0})))||void 0===l||null===(i=l.selected_fields.find((function(e){return"Global"===e.data_type_name})))||void 0===i?void 0:i.value);u||(u=null===(t=R.Z(B.Z("component_blueprints"),F.Z)(Y.processModule.completeSteps).find((function(n){return n.selected_fields.filter((function(n){var o,l;return n.field_name===(null===(o=g.selected_fields.find((function(n){return n.data_type_name===e&&1==n.visible})))||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global)&&"Value"===n.data_type_name})).length>0})))||void 0===t||null===(d=t.selected_fields.find((function(e){return"Value"===e.data_type_name})))||void 0===d||null===(a=d.options)||void 0===a?void 0:a.value);return u?W.filter((function(n){return n.component_fields.filter((function(n){var o,l;return n.value===u&&n.field_name===(null===(o=g.selected_fields.find((function(n){return n.data_type_name===e})))||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global)})).length>0})):W},go=(null===g||void 0===g||null===(n=g.selected_fields)||void 0===n?void 0:n.length)>0&&(null===g||void 0===g||null===(o=g.selected_fields)||void 0===o?void 0:o.sort((function(e,n){return e.index-n.index})).map((function(e,n){var o,s,p,f,_,M,K,ue,re,ge,xe,Se,Ue,Ye,Ge,$e,Ke,ln,tn,dn,un,vn,cn,fn,_n,gn,bn,Cn,wn,Sn,kn,Nn,Dn,zn,An,Rn,Bn,qn,Yn,Gn,Jn,Xn,$n,no,oo,to,ao,ro,go,bo,xo,Eo,Co,wo,Mo,Zo,So,ko,Po,Io,No,Do="";if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(s=o.fieldToMatch)||void 0===s?void 0:s.length)>0){var To,Lo,zo,Ao,Oo,Uo,Ro,Bo,Fo,Wo,qo,Yo,Ho,jo,Go,Jo,Vo,Qo,Xo,$o,Ko,el,nl,ol,ll=g.selected_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.fieldToMatch)}));if(ll&&(null===e||void 0===e||null===(To=e.options)||void 0===To||null===(Lo=To.valueToMatch)||void 0===Lo?void 0:Lo.length)>0&&(null===e||void 0===e||null===(zo=e.options)||void 0===zo||null===(Ao=zo.actionToPerform)||void 0===Ao?void 0:Ao.length)>0&&(null===e||void 0===e||null===(Oo=e.options)||void 0===Oo||null===(Uo=Oo.initialState)||void 0===Uo?void 0:Uo.length)>0)if(null!==e&&void 0!==e&&null!==(Fo=e.options)&&void 0!==Fo&&null!==(Wo=Fo.valueToMatch)&&void 0!==Wo&&Wo.split(",").includes(null===ll||void 0===ll?void 0:ll.value))"hide"===(null===e||void 0===e||null===(qo=e.options)||void 0===qo?void 0:qo.actionToPerform)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Yo=e.options)||void 0===Yo?void 0:Yo.actionToPerform)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Ho=e.options)||void 0===Ho?void 0:Ho.actionToPerform)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(jo=e.options)||void 0===jo?void 0:jo.actionToPerform)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Go=e.options)||void 0===Go?void 0:Go.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(Jo=e.options)||void 0===Jo?void 0:Jo.actionToPerform)&&(Do="none");else"hidden"===(null===e||void 0===e||null===(Vo=e.options)||void 0===Vo?void 0:Vo.initialState)?e.visible=!1:"visible"===(null===e||void 0===e||null===(Qo=e.options)||void 0===Qo?void 0:Qo.initialState)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(Xo=e.options)||void 0===Xo?void 0:Xo.initialState)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===($o=e.options)||void 0===$o?void 0:$o.initialState)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(Ko=e.options)||void 0===Ko?void 0:Ko.actionToPerform)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(el=e.options)||void 0===el?void 0:el.actionToPerform)&&(Do="none");if(ll&&(null===e||void 0===e||null===(Ro=e.options)||void 0===Ro||null===(Bo=Ro.valueToMatch2)||void 0===Bo?void 0:Bo.length)>0)if(null!==e&&void 0!==e&&null!==(nl=e.options)&&void 0!==nl&&null!==(ol=nl.valueToMatch2)&&void 0!==ol&&ol.split(",").includes(null===ll||void 0===ll?void 0:ll.value)){var il,tl,dl,al,ul,rl,sl,vl,cl,pl,ml,fl;if((null===e||void 0===e||null===(il=e.options)||void 0===il||null===(tl=il.value)||void 0===tl?void 0:tl.length)>0)if("Text"===(null===e||void 0===e?void 0:e.data_type_name))e.value=null===e||void 0===e||null===(ul=e.options)||void 0===ul?void 0:ul.value;else if("Date"===(null===e||void 0===e?void 0:e.data_type_name)){var _l,hl,yl,gl,bl,xl;if(0==(null===e||void 0===e||null===(_l=e.value)||void 0===_l?void 0:_l.length)||void 0==(null===e||void 0===e?void 0:e.value))"today"===(null===e||void 0===e||null===(hl=e.options)||void 0===hl?void 0:hl.value)?e.value=new Date(ae()((0,de.now)())):"tomorrow"===(null===e||void 0===e||null===(yl=e.options)||void 0===yl?void 0:yl.value)?e.value=new Date(ae()((0,de.now)()).add(1,"days")):"week"===(null===e||void 0===e||null===(gl=e.options)||void 0===gl?void 0:gl.value)?e.value=new Date(ae()((0,de.now)()).add(1,"weeks")):"month"===(null===e||void 0===e||null===(bl=e.options)||void 0===bl?void 0:bl.value)&&(e.value=new Date(ae()((0,de.now)()).add(1,"months"))),"none"===(null===e||void 0===e||null===(xl=e.options)||void 0===xl?void 0:xl.value)&&(e.value=void 0)}if((null===e||void 0===e||null===(dl=e.options)||void 0===dl||null===(al=dl.actionToPerform2)||void 0===al?void 0:al.length)>0)"hide"===(null===e||void 0===e||null===(rl=e.options)||void 0===rl?void 0:rl.actionToPerform2)?e.visible=!1:"visible"===(null===e||void 0===e||null===(sl=e.options)||void 0===sl?void 0:sl.actionToPerform2)?e.visible=!0:"mandatory"===(null===e||void 0===e||null===(vl=e.options)||void 0===vl?void 0:vl.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"optional"===(null===e||void 0===e||null===(cl=e.options)||void 0===cl?void 0:cl.actionToPerform2)?(e.mandatory=!1,e.visible=!0):"visman"===(null===e||void 0===e||null===(pl=e.options)||void 0===pl?void 0:pl.actionToPerform2)?(e.mandatory=!0,e.visible=!0):"disable"===(null===e||void 0===e||null===(ml=e.options)||void 0===ml?void 0:ml.actionToPerform2)?Do="none":"enable"===(null===e||void 0===e||null===(fl=e.options)||void 0===fl?void 0:fl.actionToPerform2)&&(Do="")}}if("Record"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(p=e.options)||void 0===p||null===(f=p.component_id)||void 0===f?void 0:f.length)>0){var El,Cl,wl,Ml,Zl,Sl,kl,Pl,Il,Nl,Dl,Tl,Ll,zl,Al,Ol,Ul,Rl,Bl,Fl,Wl,ql,Yl,Hl,jl,Gl,Jl,Vl,Ql,Xl,$l,Kl,ei,ni,oi,li,ii,ti,di,ai,ui,ri,si=(null!==e&&void 0!==e&&null!==(El=e.options)&&void 0!==El&&El.global?yo(null===e||void 0===e?void 0:e.data_type_name):W).filter((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).length>0})),vi=si.map((function(n){var o,l,i,d,a="";return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.names)||void 0===l||l.map((function(e){var o,l;return a=""===a?null===(o=n.component_fields.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value:"".concat(a," ").concat(null===(l=n.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)})),(0,t.Z)({label:""===a?n.title:a,value:n.id,component:n},null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.output,null===(d=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})))||void 0===d?void 0:d.value)}));if((null===e||void 0===e||null===(Cl=e.options)||void 0===Cl||null===(wl=Cl.filters)||void 0===wl?void 0:wl.length)>0){if((null===si||void 0===si?void 0:si.length)>0)if(e.value){if(ri=si.find((function(n){return n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&n.value===e.value}))}))){var ci,pi,mi;ho(null===(ci=ri)||void 0===ci?void 0:ci.id);var fi=(0,d.Z)(null!==(pi=null===(mi=Z.currentStep)||void 0===mi?void 0:mi.component_blueprints)&&void 0!==pi?pi:[]);fi&&(Z.newStepComponents=fi)}}else if(1==vi.length&&(ri=si[0])){var _i,hi,yi;ho(null===(_i=ri)||void 0===_i?void 0:_i.id);var gi=(0,d.Z)(null!==(hi=null===(yi=Z.currentStep)||void 0===yi?void 0:yi.component_blueprints)&&void 0!==hi?hi:[]);gi&&(Z.newStepComponents=gi)}if(1==vi.length||e.value){var bi,xi,Ei,Ci;if((null===e||void 0===e||null===(bi=e.options)||void 0===bi?void 0:bi.filters.length)>0)hn[null===e||void 0===e||null===(Ei=e.options)||void 0===Ei?void 0:Ei.filters[0]]=H.Z(j.Z("value"))(si.map((function(n){var o=null===n||void 0===n?void 0:n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){var o;return(null===(o=n.component)||void 0===o?void 0:o.component_fields.filter((function(n){var o,l;return n.value===(null===(o=ri)||void 0===o||null===(l=o.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})))||void 0===l?void 0:l.value)})).length)>0})));if((null===e||void 0===e||null===(xi=e.options)||void 0===xi?void 0:xi.filters.length)>1)hn[null===e||void 0===e||null===(Ci=e.options)||void 0===Ci?void 0:Ci.filters[1]]=H.Z(j.Z("value"))(si.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){var o;return(null===(o=n.component)||void 0===o?void 0:o.component_fields.filter((function(n){var o,l;return n.value===(null===(o=ri)||void 0===o||null===(l=o.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})))||void 0===l?void 0:l.value)})).length)>0})))}}else if(vi.length>0)if(e.value){if(ri=null===vi||void 0===vi?void 0:vi.find((function(n){var o;return n[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]===e.value}))){var wi,Mi;ho(ri.value);var Zi=(0,d.Z)(null!==(wi=null===(Mi=Z.currentStep)||void 0===Mi?void 0:Mi.component_blueprints)&&void 0!==wi?wi:[]);Zi&&(Z.newStepComponents=Zi)}}else if(1==vi.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(ri=vi[0])){var Si,ki;ho(ri.value);var Pi=(0,d.Z)(null!==(Si=null===(ki=Z.currentStep)||void 0===ki?void 0:ki.component_blueprints)&&void 0!==Si?Si:[]);Pi&&(Z.newStepComponents=Pi)}return!ri&&null!==e&&void 0!==e&&e.value?r.createElement("div",{key:n},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):(null===e||void 0===e||null===(Ml=e.options)||void 0===Ml||null===(Zl=Ml.filters)||void 0===Zl?void 0:Zl.length)>0?r.createElement("div",{key:n,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Do,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",padding:"20px",marginBottom:"10px"}},null===Q||void 0===Q||null===(Sl=Q.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})))||void 0===Sl?void 0:Sl.name,r.createElement("br",null),r.createElement("br",null),(null===e||void 0===e||null===(kl=e.options)||void 0===kl||null===(Pl=kl.filters)||void 0===Pl?void 0:Pl.length)>0&&r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Il=e.options)||void 0===Il||null===(Nl=Il.filters)||void 0===Nl?void 0:Nl.length)&&(null===e||void 0===e?void 0:e.mandatory),items:H.Z(j.Z("value"))(si.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}}))),loading:Ve,error:1==(null===e||void 0===e||null===(Dl=e.options)||void 0===Dl||null===(Tl=Dl.filters)||void 0===Tl?void 0:Tl.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(o){var l,i,d,a,u;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>1?(w(void 0,n),Zn(!1),En(!1),setTimeout((function(){En(!0),Zn(!0)}),10),yn((0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],H.Z(j.Z("value"))(si.map((function(n){var l=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n,selected:o}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0})))))):(Ln("50px"),w(null!==(a=si.find((function(e){return e.value===o}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),ho(si.find((function(e){return e.value===o})).component.id))},fieldLabel:null===e||void 0===e||null===(Ll=e.options)||void 0===Ll?void 0:Ll.filters[0],value:ri?null===(zl=ri.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})))||void 0===zl?void 0:zl.value:""}),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Al=e.options)||void 0===Al||null===(Ol=Al.filters)||void 0===Ol?void 0:Ol.length)>1&&xn&&r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Ul=e.options)||void 0===Ul||null===(Rl=Ul.filters)||void 0===Rl?void 0:Rl.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Bl=hn[null===e||void 0===e||null===(Fl=e.options)||void 0===Fl?void 0:Fl.filters[0]])&&void 0!==Bl?Bl:[],loading:Ve,onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(o){var l,i,d,u,r,s,v,c,p;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>2?(Zn(!1),setTimeout((function(){return Zn(!0)}),10),yn((0,a.Z)((0,a.Z)({},hn),{},(0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1],null!==(u=H.Z(j.Z("value"))(si.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var o,l;return n.value===hn[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0}))))&&void 0!==u?u:[])))):(Ln("50px"),U.start=!0,w(null!==(r=null===(s=hn[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(v=s.find((function(e){return e.value===o})))||void 0===v?void 0:v.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==r?r:null,n),ho(hn[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find((function(e){return e.value===o})).component.id),Zn(!1),En(!1),setTimeout((function(){En(!0),Zn(!0)}),10))},fieldLabel:null===e||void 0===e||null===(Wl=e.options)||void 0===Wl?void 0:Wl.filters[1],value:ri?null===(ql=ri.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})))||void 0===ql?void 0:ql.value:""})),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Yl=e.options)||void 0===Yl||null===(Hl=Yl.filters)||void 0===Hl?void 0:Hl.length)>2&&Mn&&r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(jl=e.options)||void 0===jl||null===(Gl=jl.filters)||void 0===Gl?void 0:Gl.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Jl=hn[null===e||void 0===e||null===(Vl=e.options)||void 0===Vl?void 0:Vl.filters[1]])&&void 0!==Jl?Jl:[],loading:Ve,onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(o){var l,i,t,d,a;Ln("50px"),U.start=!0,w(null!==(l=null===(i=hn[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===i||null===(t=i.find((function(e){return e.value===o})))||void 0===t?void 0:t.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==l?l:null,n),ho(hn[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===o})).component.id)},fieldLabel:null===e||void 0===e||null===(Ql=e.options)||void 0===Ql?void 0:Ql.filters[2],value:ri?null===(Xl=ri.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])})))||void 0===Xl?void 0:Xl.value:""}))):"Tiles"===(null===e||void 0===e||null===($l=e.options)||void 0===$l?void 0:$l.selection)?r.createElement(ye.Z,{enabled:Do,width:"100%",style:{border:"0"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(Kl=e.errors)||void 0===Kl?void 0:Kl.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(ei=e.options)||void 0===ei?void 0:ei.notes},r.createElement("div",{style:{width:"100%"}},r.createElement(S.default,{rowStyleSelected:{border:"2px solid black"},initialSelected:vi.map((function(n){var o;return n[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output]})).indexOf(null===e||void 0===e?void 0:e.value),modern:!0,isReport:!1,className:me.listContainer,"app-variant-is-mobile":"true",columns:null===e||void 0===e||null===(ni=e.options)||void 0===ni?void 0:ni.names,list:vi.map((function(e){var n=e;return e.component.component_fields.filter((function(e){n[e.field_name]=e.value})),n})),onListItemClick:function(o){var l,i,t,d,a;o&&(null===e||void 0===e||null===(a=e.options)||void 0===a||a.list.map((function(e){var n,l,i=_o({field_name:e});-1!=i&&(g.selected_fields[i].value=null!==(n=null===(l=o.component.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==n?n:"",g.selected_fields[i].disabled=!0)})));so(),ho(o),w(null!==(l=null===vi||void 0===vi||null===(i=vi.find((function(e){return e.value===o.value})))||void 0===i||null===(t=i.component.component_fields)||void 0===t||null===(d=t.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})))||void 0===d?void 0:d.value)&&void 0!==l?l:null,n)}}))):r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:Q.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:(null===(oi=e.errors)||void 0===oi?void 0:oi.length)>0?"".concat(e.errors,". Try to select again"):"",notes:null===e||void 0===e||null===(li=e.options)||void 0===li?void 0:li.notes},r.createElement("div",{style:{width:"inherit"}},r.createElement(I.Z,{key:n,visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,items:vi,loading:Ve,error:"",className:me.dropdownClassContainer,onClicked:function(e){return Ln(e?"100px":"50px")},onChange:function(o){var l,i;U.start=!0,Ln("50px"),ho(o),w(null!==(l=null===vi||void 0===vi?void 0:vi.find((function(e){return e.value===o}))[null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.output])&&void 0!==l?l:null,n)},selectionType:(null===e||void 0===e||null===(ii=e.options)||void 0===ii?void 0:ii.selection.length)>0?null===e||void 0===e||null===(ti=e.options)||void 0===ti?void 0:ti.selection:null===e||void 0===e||null===(di=e.options)||void 0===di?void 0:di.type,value:null!==(ai=null===(ui=ri)||void 0===ui?void 0:ui.label)&&void 0!==ai?ai:""})))}if("Filters"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(_=e.options)||void 0===_||null===(M=_.component_id)||void 0===M?void 0:M.length)>0){var Ii,Ni,Di,Ti,Li,zi,Ai,Oi,Ui,Ri,Bi,Fi,Wi,qi,Yi,Hi,ji,Gi,Ji,Vi,Qi,Xi,$i,Ki,et,nt,ot,lt,it,tt,dt=(null!==e&&void 0!==e&&null!==(Ii=e.options)&&void 0!==Ii&&Ii.global?yo(null===e||void 0===e?void 0:e.data_type_name):W).filter((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).length>0})),at=dt.map((function(n){var o,l;return(0,t.Z)({label:n.title,value:n.id,component:n},null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output,null===(l=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})))||void 0===l?void 0:l.value)}));if(dt.length>0){if(e.value){if(tt=dt.find((function(n){return n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)&&n.value===e.value}))}))){var ut,rt,st;ho(null===(ut=tt)||void 0===ut?void 0:ut.id);var vt=(0,d.Z)(null!==(rt=null===(st=Z.currentStep)||void 0===st?void 0:st.component_blueprints)&&void 0!==rt?rt:[]);vt&&(Z.newStepComponents=vt)}}else if(1==at.length&&1==(null===e||void 0===e?void 0:e.mandatory)&&(tt=dt[0])){var ct,pt,mt;ho(null===(ct=tt)||void 0===ct?void 0:ct.id);var ft=(0,d.Z)(null!==(pt=null===(mt=Z.currentStep)||void 0===mt?void 0:mt.component_blueprints)&&void 0!==pt?pt:[]);ft&&(Z.newStepComponents=ft)}if(1==at.length||e.value){var _t,ht,yt,gt;if((null===e||void 0===e||null===(_t=e.options)||void 0===_t?void 0:_t.filters.length)>0)hn[null===e||void 0===e||null===(yt=e.options)||void 0===yt?void 0:yt.filters[0]]=H.Z(j.Z("value"))(dt.map((function(n){var o=null===n||void 0===n?void 0:n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})));if((null===e||void 0===e||null===(ht=e.options)||void 0===ht?void 0:ht.filters.length)>1)hn[null===e||void 0===e||null===(gt=e.options)||void 0===gt?void 0:gt.filters[1]]=H.Z(j.Z("value"))(dt.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})))}}return!tt&&null!==e&&void 0!==e&&e.value?r.createElement("div",{key:n},"A record ( ".concat(null===e||void 0===e?void 0:e.value," ) was previously selected but not found. Press the refresh button on the upper right side to retrieve the missing record. If record is still not found, please check with your admin.")):r.createElement("div",{key:n,style:{width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none",pointerEvents:Do,border:"1px dashed gray",fontSize:"16px",color:"var(--app-color-gray-dark)",marginBottom:"10px",padding:"20px"}},Q.find((function(n){var o;return n.id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)})).name,r.createElement("br",null),r.createElement("br",null),(null===e||void 0===e||null===(Ni=e.options)||void 0===Ni||null===(Di=Ni.filters)||void 0===Di?void 0:Di.length)>0&&r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:1==(null===e||void 0===e||null===(Ti=e.options)||void 0===Ti||null===(Li=Ti.filters)||void 0===Li?void 0:Li.length)&&(null===e||void 0===e?void 0:e.mandatory),items:H.Z(j.Z("value"))(dt.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}}))),loading:Ve,error:1==(null===e||void 0===e||null===(zi=e.options)||void 0===zi||null===(Ai=zi.filters)||void 0===Ai?void 0:Ai.length)?null===e||void 0===e?void 0:e.errors:"",onChange:function(o){var l,i,d,a,u;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>1?(w(void 0,n),Zn(!1),En(!1),setTimeout((function(){En(!0),Zn(!0)}),10),yn((0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[0],H.Z(j.Z("value"))(dt.map((function(n){var l=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])}));return{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.value,component:n,selected:o}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0})))))):(Ln("50px"),w(null!==(a=dt.find((function(e){return e.value===o}))[null===e||void 0===e||null===(u=e.options)||void 0===u?void 0:u.output])&&void 0!==a?a:null,n),ho(dt.find((function(e){return e.value===o})).component.id))},fieldLabel:null===e||void 0===e||null===(Oi=e.options)||void 0===Oi?void 0:Oi.filters[0],value:tt?null===(Ui=tt.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})))||void 0===Ui?void 0:Ui.value:""}),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Ri=e.options)||void 0===Ri||null===(Bi=Ri.filters)||void 0===Bi?void 0:Bi.length)>1&&xn&&r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:2==(null===e||void 0===e||null===(Fi=e.options)||void 0===Fi||null===(Wi=Fi.filters)||void 0===Wi?void 0:Wi.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(qi=hn[null===e||void 0===e||null===(Yi=e.options)||void 0===Yi?void 0:Yi.filters[0]])&&void 0!==qi?qi:[],loading:Ve,error:2==(null===e||void 0===e||null===(Hi=e.options)||void 0===Hi||null===(ji=Hi.filters)||void 0===ji?void 0:ji.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(o){var l,i,d,u,r,s,v,c,p;(null===e||void 0===e||null===(l=e.options)||void 0===l||null===(i=l.filters)||void 0===i?void 0:i.length)>2?(Zn(!1),setTimeout((function(){return Zn(!0)}),10),yn((0,a.Z)((0,a.Z)({},hn),{},(0,t.Z)({},null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1],null!==(u=H.Z(j.Z("value"))(dt.map((function(n){var o=n.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])}));return{label:null===o||void 0===o?void 0:o.value,value:null===o||void 0===o?void 0:o.value,component:n}})).filter((function(n){return n.component.component_fields.filter((function(n){var l;return n.value===o&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[1])})).length>0})).filter((function(n){return n.component.component_fields.filter((function(n){var o,l;return n.value===hn[null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0]][0].component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[0])})).value&&n.field_name===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.filters[0])})).length>0}))))&&void 0!==u?u:[])))):(so(),Ln("50px"),U.start=!0,w(null!==(r=null===(s=hn[null===e||void 0===e||null===(c=e.options)||void 0===c?void 0:c.filters[0]])||void 0===s||null===(v=s.find((function(e){return e.value===o})))||void 0===v?void 0:v.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==r?r:null,n),ho(hn[null===e||void 0===e||null===(p=e.options)||void 0===p?void 0:p.filters[0]].find((function(e){return e.value===o})).component.id))},fieldLabel:null===e||void 0===e||null===(Gi=e.options)||void 0===Gi?void 0:Gi.filters[1],value:tt?null===(Ji=tt.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[1])})))||void 0===Ji?void 0:Ji.value:""})),r.createElement("div",{style:{display:null!==e&&void 0!==e&&e.visible?"":"none",marginBottom:"10px"}},(null===e||void 0===e||null===(Vi=e.options)||void 0===Vi||null===(Qi=Vi.filters)||void 0===Qi?void 0:Qi.length)>2&&Mn&&r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)"},className:me.multiselectComponent,visible:null===e||void 0===e?void 0:e.visible,mandatory:3==(null===e||void 0===e||null===(Xi=e.options)||void 0===Xi||null===($i=Xi.filters)||void 0===$i?void 0:$i.length)&&(null===e||void 0===e?void 0:e.mandatory),items:null!==(Ki=hn[null===e||void 0===e||null===(et=e.options)||void 0===et?void 0:et.filters[1]])&&void 0!==Ki?Ki:[],loading:Ve,error:3==(null===e||void 0===e||null===(nt=e.options)||void 0===nt||null===(ot=nt.filters)||void 0===ot?void 0:ot.length)?null===e||void 0===e?void 0:e.errors:"",onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(o){var l,i,t,d,a;Ln("50px"),U.start=!0,w(null!==(l=null===(i=hn[null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.filters[1]])||void 0===i||null===(t=i.find((function(e){return e.value===o})))||void 0===t?void 0:t.component.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.output)})).value)&&void 0!==l?l:null,n),ho(hn[null===e||void 0===e||null===(a=e.options)||void 0===a?void 0:a.filters[1]].find((function(e){return e.value===o})).component.id)},fieldLabel:null===e||void 0===e||null===(lt=e.options)||void 0===lt?void 0:lt.filters[2],value:tt?null===(it=tt.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.filters[2])})))||void 0===it?void 0:it.value:""})))}if("Global"===(null===e||void 0===e?void 0:e.data_type_name)||"Connector"===(null===e||void 0===e?void 0:e.data_type_name)||"Emails"===(null===e||void 0===e?void 0:e.data_type_name)||"Template"===(null===e||void 0===e?void 0:e.data_type_name));else if("Action Button"!==(null===e||void 0===e?void 0:e.data_type_name)){var bt,xt,Et,Ct,wt,Mt,Zt,St,kt,Pt,It,Nt,Dt,Tt,Lt,zt,At,Ot,Ut,Rt,Bt,Ft,Wt,qt,Yt,Ht,jt,Gt,Jt,Vt,Qt,Xt,$t,Kt,ed,nd,od,ld,id,td,dd,ad,ud,rd,sd,vd,cd,pd,md,fd,_d,hd,yd,gd,bd,xd,Ed,Cd,wd;if("GoogleAI Assistant"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement("div",{key:n,style:{display:e.visible?"":"none",color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",flexDirection:"column",marginTop:"50px"}},r.createElement(ye.Z,{enabled:Do,width:null!==(bt=null===e||void 0===e||null===(xt=e.field_options)||void 0===xt?void 0:xt.width)&&void 0!==bt?bt:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:"".concat(null===e||void 0===e||null===(Et=e.options)||void 0===Et?void 0:Et.description),fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Ct=e.options)||void 0===Ct?void 0:Ct.notes},r.createElement("textarea",{className:me.fullLengthTextarea,type:e.data_type,onFocus:function(){},disabled:e.options.fixed,autoComplete:"none",onChange:function(e){x(e.target.value,n)},placeholder:"Enter your question here",value:1==e.options.fixed?null===e||void 0===e||null===(wt=e.options)||void 0===wt?void 0:wt.analyze:e.value})),r.createElement("div",{style:{display:"flex"}},r.createElement(h.zx,{light:!0,loading:Ve,title:"Ask",clicked:function(){0==e.options.fixed&&(e.options.analyze=e.value),mo(e.options)}},r.createElement("img",{src:"https://ai.google/static/images/share.png",height:"90px",width:"140px"})),(null===Fn||void 0===Fn?void 0:Fn.candidates.length)>0&&r.createElement(h.zx,{title:"Clear",clicked:function(){Wn({candidates:[]}),x(void 0,n)}})));if("Chart"===e.data_type_name)return r.createElement(ye.Z,{width:"100%",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:te,notes:null===e||void 0===e||null===(Mt=e.options)||void 0===Mt?void 0:Mt.notes,isProcess:!0,visible:e.visible,error:e.errors,customIconBgColor:"white"},r.createElement("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",style:{width:"inherit"}},"Line"===(null===e||void 0===e||null===(Zt=e.options)||void 0===Zt?void 0:Zt.orientation)&&r.createElement(Te.Z,{series:[{name:"Product One",data:[23,11,22,27,13,22,37,21,44,22,30,45]},{name:"Product Two",data:[30,25,36,30,45,35,64,52,59,36,39,51]}]}),"Column"===(null===e||void 0===e||null===(St=e.options)||void 0===St?void 0:St.orientation)&&r.createElement(Le.Z,{series:[{name:"Sales",data:[44,55,41,67,22,43,65]},{name:"Revenue",data:[13,23,20,8,13,27,15]}]}),"Donut"===(null===e||void 0===e||null===(kt=e.options)||void 0===kt?void 0:kt.orientation)&&r.createElement(ze.Z,{series:[65,34,12,56],labels:["Desktop","Tablet","Mobile","AI"]})));if("Info"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(K=e.options)||void 0===K||null===(ue=K.list)||void 0===ue?void 0:ue.length)>0&&(null===e||void 0===e||null===(re=e.options)||void 0===re||null===(ge=re.component_id)||void 0===ge?void 0:ge.length)>0){var Md,Zd,Sd,kd,Pd,Id,Nd,Dd,Td,Ld=W.find((function(n){return n.id===(null===e||void 0===e?void 0:e.value)})),zd={};if(Ld)null===e||void 0===e||null===(Td=e.options)||void 0===Td||Td.list.map((function(e,n){var o,l,i,t;if(0==Ld.component_fields.length)return r.createElement("div",{key:n});var d,a=Ld.component_fields.find((function(n){return n.field_name===e}));"Link"===(null===a||void 0===a?void 0:a.data_type_name)&&(null!==(o="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==o&&o.includes("jpg")||null!==a&&void 0!==a&&null!==(l=a.options)&&void 0!==l&&l.image||null!==(i="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==i&&i.includes("jpeg")||null!==(t="".concat(null===a||void 0===a?void 0:a.value))&&void 0!==t&&t.includes("png"))?zd[e]=r.createElement("div",{key:n,onClick:function(){return window.open(null===a||void 0===a?void 0:a.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===a||void 0===a?void 0:a.value,style:{width:"30px",height:"30px",cursor:"pointer"}})):zd[e]=null!==(d=null===a||void 0===a?void 0:a.value)&&void 0!==d?d:""}));return Ld&&("rows"===(null===e||void 0===e||null===(Md=e.options)||void 0===Md?void 0:Md.orientation)?r.createElement(ye.Z,{style:{border:"0"},width:"100%",key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Zd=e.options)||void 0===Zd?void 0:Zd.notes},r.createElement(N.Z,{className:me.mobileTable_ii,style:{width:"100%"},tableHostSimple:me.tableHostSimple,columns:null!==(Sd=null===e||void 0===e||null===(kd=e.options)||void 0===kd?void 0:kd.list)&&void 0!==Sd?Sd:[],list:[zd]})):r.createElement("div",{style:{width:"inherit"},key:n},Ld&&r.createElement(h.zx,{light:!0,title:"Show Information",style:{width:"100%",backgroundColor:"var(--app-color-blue)",color:"white"},clicked:function(){return so()}}),so&&r.createElement(Qe,{title:"Information:",nav:uo,openNav:so},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},Object.keys(zd).length>0&&(null===e||void 0===e||null===(Pd=e.options)||void 0===Pd?void 0:Pd.list.map((function(n,o){var l,i,t,d,a,u,s;if(0==Ld.component_fields.length)return r.createElement("div",{key:o});var v=Ld.component_fields.find((function(e){return e.field_name===n}));return o<3?r.createElement("div",{key:o},r.createElement("div",{className:me.actionsContainer,style:{fontSize:(n.length>10||v.value.length,"12px")}},r.createElement("div",null,n,":"),r.createElement("div",null,v?v.value:"")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})):r.createElement("div",{style:{border:"0"},key:o,fieldLabel:n,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.notes},"Link"===(null===v||void 0===v?void 0:v.data_type_name)&&(null!==(i="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==i&&i.includes("jpg")||null!==(t="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==t&&t.includes("jpeg")||null!==v&&void 0!==v&&null!==(d=v.options)&&void 0!==d&&d.image||null!==(a="".concat(null===v||void 0===v?void 0:v.value))&&void 0!==a&&a.includes("png"))?r.createElement("div",{onClick:function(){return window.open(null===v||void 0===v?void 0:v.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===v||void 0===v?void 0:v.value,style:{width:"50%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(u=e.value)&&void 0!==u&&u.includes("pdf")?r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===v||void 0===v?void 0:v.value,"_blank")}},r.createElement("embed",{src:"".concat(null===v||void 0===v?void 0:v.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):(null===v||void 0===v||null===(s=v.value)||void 0===s?void 0:s.length)<50||void 0===v?r.createElement("input",{onBlur:function(n){return je(e.data_type_name,n.target.value,E,o,Z)},type:e.data_type,value:v?v.value:"",autoComplete:"none",className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}):r.createElement("textarea",{className:me.fieldTypeTextarea,type:e.data_type,value:v?v.value:"",onFocus:function(){},autoComplete:"none",onChange:function(e){},disabled:!0,style:{backgroundColor:"rgba(234, 231, 231, 0.91)",height:"auto",fontSize:"18px"}}))}))),!0===(null===(Id=g.options)||void 0===Id?void 0:Id.allowMultipleInputs)&&(null===(Nd=Y.processModule.module.options)||void 0===Nd||null===(Dd=Nd.computes)||void 0===Dd?void 0:Dd.map((function(n,o){var l,i,t=null===W||void 0===W||null===(l=W.filter((function(e){return e.module_id===n.module_id})))||void 0===l?void 0:l.find((function(n){return n.component_fields.filter((function(n){var o,l;return n.value===(null!==(o=null===(l=Ld.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)})))||void 0===l?void 0:l.value)&&void 0!==o?o:"#$")})).length>0})),d=null===t||void 0===t?void 0:t.component_fields.find((function(e){return e.procedure_step_blueprint_field_id===n.field_id}));return r.createElement(ye.Z,{style:{display:d?"":"none",border:"0"},key:o,fieldLabel:null===d||void 0===d?void 0:d.field_name,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.notes},r.createElement("input",{onBlur:function(n){return je(e.data_type_name,n.target.value,E,o,Z)},type:e.data_type,value:null===d||void 0===d?void 0:d.value,autoComplete:"none",className:me.fieldTypeInput,name:e.field_name,disabled:!0,style:{border:"1px dashed rgba(234, 231, 231, 0.91)",height:"40px",fontSize:"18px",backgroundColor:"rgba(234, 231, 231, 0.91)"}}))}))),r.createElement("br",null),r.createElement(h.zx,{clicked:function(){return so()},title:"Close",style:{width:"100%",backgroundColor:"orange"}})))))}if("Lookup"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(xe=e.options)||void 0===xe||null===(Se=xe.list)||void 0===Se?void 0:Se.length)>0&&(null===e||void 0===e||null===(Ue=e.options)||void 0===Ue||null===(Ye=Ue.source_id)||void 0===Ye?void 0:Ye.length)>0&&null!==e&&void 0!==e&&null!==(Ge=e.options)&&void 0!==Ge&&null!==($e=Ge.target_id)&&void 0!==$e&&$e.length){var Ad,Od,Ud,Rd,Bd,Fd,Wd,qd,Yd,Hd,jd,Gd,Jd,Vd,Qd,Xd,$d,Kd,ea=function(e,n){var o,l,i,t,d,a,u,r=null===(o=Y.processModule.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.global;return r||(r=null===(i=Z.components.find((function(n){return n.selected_fields.filter((function(n){return 1==n.visible&&n.field_name===e})).length>0})))||void 0===i||null===(t=i.selected_fields.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value),r||(r=null===(d=R.Z(B.Z("component_blueprints"),F.Z)(Y.processModule.completeSteps).find((function(n){return n.selected_fields.filter((function(n){return n.field_name===e&&"Value"===n.data_type_name})).length>0})))||void 0===d||null===(a=d.selected_fields.find((function(n){return n.field_name===e})))||void 0===a||null===(u=a.options)||void 0===u?void 0:u.value),r?n.filter((function(n){return n[e]===r})):n}(null===e||void 0===e||null===(Ad=e.options)||void 0===Ad?void 0:Ad.global,function(e,n,o,l,i){var t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:W,r=u.filter((function(e){var n;return(null===(n=e.component_fields)||void 0===n?void 0:n.filter((function(e){return e.component_blueprint_id===o})).length)>0})),s=[];return u.filter((function(n){return n.component_fields.filter((function(n){return n.component_blueprint_id===e})).length>0})).map((function(e){var o={};l.map((function(n){var l;o[n]=null===(l=e.component_fields.find((function(e){return e.field_name===n})))||void 0===l?void 0:l.value}));var u=e.component_fields.find((function(e){return e.field_name===n}));void 0!==u&&r.filter((function(e){return e.component_fields.filter((function(e){return e.value===u.value&&e.field_name===n})).length>0})).map((function(n){var l,u,r,v=null!==(l=null===(u=n.component_fields.find((function(e){return-1!==t.indexOf(e.field_name)})))||void 0===u?void 0:u.value)&&void 0!==l?l:"",c={};t.length>0&&t.map((function(e){var o=n.component_fields.find((function(n){return n.field_name===e}));o&&(c[e]=o.value)}));var p={};i.length>0&&i.map((function(o){var l=n.component_fields.find((function(e){return e.field_name===o}));if(l)p[o]=l.value;else{var i=e.component_fields.find((function(e){return e.field_name===o}));i&&(p[o]=i.value)}})),s=[].concat((0,d.Z)(s),[(0,a.Z)((0,a.Z)((0,a.Z)({label:v,value:n.id,field:n,grouping:(null===(r=Object.values(o))||void 0===r?void 0:r.length)>0?Object.values(o)[0]:"Fields"},o),p),c)])}))})),s}(null===e||void 0===e||null===(Od=e.options)||void 0===Od?void 0:Od.source_id,null===e||void 0===e||null===(Ud=e.options)||void 0===Ud?void 0:Ud.common_field,null===e||void 0===e||null===(Rd=e.options)||void 0===Rd?void 0:Rd.target_id,null===e||void 0===e||null===(Bd=e.options)||void 0===Bd?void 0:Bd.sourceLabel,null===e||void 0===e||null===(Fd=e.options)||void 0===Fd?void 0:Fd.list,null!==(Wd=null===e||void 0===e||null===(qd=e.options)||void 0===qd?void 0:qd.rlist)&&void 0!==Wd?Wd:[]));return r.createElement(ye.Z,{enabled:Do,width:"100%",style:{border:"Tiles"===(null===e||void 0===e||null===(Yd=e.options)||void 0===Yd?void 0:Yd.selection)?"0":"1px dashed gray"},titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(Hd=e.options)||void 0===Hd?void 0:Hd.notes},r.createElement("div",{id:e.field_name,style:{width:"100%"}},"Dropdown"===(null===e||void 0===e||null===(jd=e.options)||void 0===jd?void 0:jd.selection)?r.createElement(A.yV,{items:ea,groupedBy:"grouping",groupname:"grouping",triggerType:"chevron",title:pn,className:me.dropdownClassContainer,inputClassName:me.peoplePositionsSelectInput,molclassname:me.peoplePositionsSelectMenuOverlay,moliclassname:me.peoplePositionsSelectMenuOverlayItem,notags:"true",onChange:function(o){var l;o.length>0&&(null===e||void 0===e||null===(l=e.options)||void 0===l||l.list.map((function(n){var l=_o({field_name:n});if(-1!=l){var i=W.find((function(e){return e.id===o[0].value})),t=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==t){var d=i.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)})),a=W.find((function(n){return n.component_fields.filter((function(n){var o;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[l].value=u.value,g.selected_fields[l].disabled=!0):g.selected_fields[l].value=""}else g.selected_fields[l].value=""}else g.selected_fields[l].value=t.value,g.selected_fields[l].disabled=!0}})),w("".concat(o[0].label,",").concat(o[0].value),n),mn("".concat(o[0].grouping)))}}):"Tiles"===(null===e||void 0===e||null===(Gd=e.options)||void 0===Gd?void 0:Gd.selection)?r.createElement(A.qq,{items:ea,columns:null===e||void 0===e||null===(Jd=e.options)||void 0===Jd?void 0:Jd.rlist,columnsG:null===e||void 0===e||null===(Vd=e.options)||void 0===Vd?void 0:Vd.sourceLabel,initialSelected:null===e||void 0===e?void 0:e.value,selectedItems:null!==e&&void 0!==e&&null!==(Qd=e.options)&&void 0!==Qd&&Qd.showAll?ea:hn,showAll:1==(null===e||void 0===e||null===(Xd=e.options)||void 0===Xd?void 0:Xd.showAll),groupedBy:"grouping",groupname:"grouping",className:me.peoplePositionsSelect,onGroupChange:function(e){yn(ea.filter((function(n){return n.grouping===e})))},onChange:function(o){var l;o&&(null===e||void 0===e||null===(l=e.options)||void 0===l||l.list.map((function(n){var l=_o({field_name:n});if(-1!=l){var i=W.find((function(e){return e.id===o.value})),t=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==t){var d=i.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)})),a=W.find((function(n){return n.component_fields.filter((function(n){var o;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[l].value=u.value,g.selected_fields[l].disabled=!0):g.selected_fields[l].value=""}else g.selected_fields[l].value=""}else g.selected_fields[l].value=t.value,g.selected_fields[l].disabled=!0}})),so(),w("".concat(o.label,",").concat(o.value),n))}}):r.createElement("div",{className:me.openSelectWithSearchHost},r.createElement(ke.Z,{title:null===e||void 0===e||null===($d=e.options)||void 0===$d?void 0:$d.sourceLabel,triggerType:"eyeglass",className:me.openSelectWithSearch,molclassname:me.menuOverlayList,moliclassname:me.menuOverlayListItem,inputClassName:me.menuOverlayListItemInput,inputContainerClassName:me.menuOverlayListItemInputContainerClassName,items:H.Z(j.Z("grouping"))(ea).map((function(e){return{label:e.grouping,value:e.grouping}})),onChange:function(n){document.getElementById(e.field_name).style.height="80px",yn(ea.filter((function(e){return e.grouping===n.value})))}}),r.createElement(ke.Z,{title:null===e||void 0===e||null===(Kd=e.options)||void 0===Kd?void 0:Kd.referenceLabel,triggerType:"eyeglass",className:me.openSelectWithSearch,molclassname:me.menuOverlayList,moliclassname:me.menuOverlayListItem,inputClassName:me.menuOverlayListItemInput,inputContainerClassName:me.menuOverlayListItemInputContainerClassName,items:hn,onChange:function(o){var l;(document.getElementById(e.field_name).style.height="80px",o)&&(null===e||void 0===e||null===(l=e.options)||void 0===l||l.list.map((function(n){var l=_o({field_name:n});if(-1!=l){var i=W.find((function(e){return e.id===o.value})),t=i.component_fields.find((function(e){return e.field_name===n}));if(void 0==t){var d=i.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.common_field)})),a=W.find((function(n){return n.component_fields.filter((function(n){var o;return n.value===d.value&&n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.source_id)})).length>0}));if(void 0!=a){var u=a.component_fields.find((function(e){return e.field_name===n}));void 0!=u?(g.selected_fields[l].value=u.value,g.selected_fields[l].disabled=!0):g.selected_fields[l].value=""}else g.selected_fields[l].value=""}else g.selected_fields[l].value=t.value,g.selected_fields[l].disabled=!0}})),w("".concat(o.label,",").concat(o.value),n))}}))))}if(("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name))&&(null===e||void 0===e||null===(Ke=e.options)||void 0===Ke||null===(ln=Ke.list)||void 0===ln?void 0:ln.length)>0&&(null===e||void 0===e||null===(tn=e.options)||void 0===tn||null===(dn=tn.component_id)||void 0===dn?void 0:dn.length)>0)return r.createElement("div",{key:n,style:{width:"100%",display:1==e.visible?"":"none"}},r.createElement(S.default,{columns:null===e||void 0===e||null===(Pt=e.options)||void 0===Pt?void 0:Pt.list,list:(No=null===e||void 0===e?void 0:e.options,Z.components.filter((function(e){return e.id===No.component_id})).map((function(e){var n={};return No.list.map((function(o){var l,i;n=(0,a.Z)((0,a.Z)({},n),{},(i={},(0,t.Z)(i,o,null===(l=e.selected_fields.find((function(e){return e.field_name===o})))||void 0===l?void 0:l.value),(0,t.Z)(i,"temp_id",e.temp_id),i))})),n}))),onListItemClick:function(e){k({action:m._U.removeModuleComponents,value:e.temp_id})}}));if("Checkbox"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:Do,border:{border:"0",paddingTop:"40px"},notes:null===e||void 0===e||null===(It=e.options)||void 0===It?void 0:It.notes,editMode:te,width:"100%",showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement(Pe.X,{defaultChecked:null!==(Nt=e.value)&&void 0!==Nt&&Nt,checkboxLabel:null===e||void 0===e||null===(Dt=e.options)||void 0===Dt?void 0:Dt.value,onChange:function(e){w(e.target.checked,n)}}));if("Transaction List"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(un=e.options)&&void 0!==un&&un.map){var na,oa,la,ia={item_code:null,quantity:null,value:null,alt_value:null,total:null},ta=Object.entries(Object.assign(ia,e.options.map)).reduce((function(e,n){var o=(0,u.Z)(n,2),l=o[0],i=o[1];return null===i||(e[l]=i),e}),{}),da=Object.entries(Object.assign(ia,e.options.map)).reduce((function(e,n){var o=(0,u.Z)(n,2),l=o[0],i=o[1];return null===i||(e[l]=i),e}),{});return Object.keys(ta).map((function(e){var n;"item_code"===e?da.item_code="Totals:":"quantity"===e?da[e]="".concat(ee.Z((function(n,o){var l;return null!==(l=+n+ +o[e])&&void 0!==l?l:0}),0,null!==(n=null===Z||void 0===Z?void 0:Z.items)&&void 0!==n?n:[])):("alt_value"===e||"value"===e||"total"===e)&&(da[e]="")})),r.createElement("div",{key:n,style:{width:"inherit"}},r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},enabled:Do,width:null!==(na=null===e||void 0===e||null===(oa=e.field_options)||void 0===oa?void 0:oa.width)&&void 0!==na?na:"inherit",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},style:{border:"0",padding:"0"},key:n,visible:e.visible,notes:null===e||void 0===e||null===(la=e.options)||void 0===la?void 0:la.notes},r.createElement(N.Z,{key:n,style:{width:(Object.values(e.options.map).length,"100%")},title:y.tq?"":e.field_name,tableHostSimple:me.tableHostMobile,columns:Object.values(ta),footer:Object.values(da),list:fo(e.options),onListItemClick:function(e){k({action:m._U.removeModuleItems,value:e.item})}})))}if("ID"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(vn=e.options)||void 0===vn||null===(cn=vn.id)||void 0===cn?void 0:cn.length)>0){var aa,ua,ra=void 0===e.value||null===e.value?"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===U||void 0===U?void 0:U.misc_info)?1:null!==(aa=null===U||void 0===U?void 0:U.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==aa?aa:1):e.value;return e.value=ra,Z.id=ra,r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,notes:null===e||void 0===e||null===(ua=e.options)||void 0===ua?void 0:ua.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("div",{className:me.fieldTypeInput,style:{border:"0"}},e.value))}if("Notes"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(fn=e.options)||void 0===fn||null===(_n=fn.value)||void 0===_n?void 0:_n.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:!1,error:e.errors},r.createElement("label",{key:n,className:me.labelInput,style:{display:e.visible?"":"none"}},"".concat(e.field_name,": ").concat(null===e||void 0===e||null===(Tt=e.options)||void 0===Tt?void 0:Tt.value)));if("List Filter"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(gn=e.options)||void 0===gn||null===(bn=gn.value)||void 0===bn?void 0:bn.length)>0)return r.createElement(r.Fragment,null);if("Ratings"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(r.Fragment,null);if("Value"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Cn=e.options)||void 0===Cn||null===(wn=Cn.module_id)||void 0===wn?void 0:wn.length)>0&&(null===e||void 0===e||null===(Sn=e.options)||void 0===Sn||null===(kn=Sn.component_id)||void 0===kn?void 0:kn.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},width:"100%",style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},notes:null===e||void 0===e||null===(Lt=e.options)||void 0===Lt?void 0:Lt.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("input",{value:null===e||void 0===e||null===(zt=e.options)||void 0===zt?void 0:zt.value,className:me.fieldTypeInput,name:e.field_name,disabled:!0}));if("URL"===e.data_type_name)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},border:{border:"0"},width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,notes:null===e||void 0===e||null===(At=e.options)||void 0===At?void 0:At.notes,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},null!==e&&void 0!==e&&null!==(Ot=e.options.value)&&void 0!==Ot&&Ot.includes("jpg")||null!==e&&void 0!==e&&null!==(Ut=e.options.value)&&void 0!==Ut&&Ut.includes("jpeg")||null!==e&&void 0!==e&&null!==(Rt=e.options)&&void 0!==Rt&&Rt.image||null!==e&&void 0!==e&&null!==(Bt=e.options.value)&&void 0!==Bt&&Bt.includes("png")?r.createElement("div",{onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("img",{alt:"lg",src:null===e||void 0===e?void 0:e.options.value,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==e&&void 0!==e&&null!==(Ft=e.options.value)&&void 0!==Ft&&Ft.includes("pdf")?r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("embed",{src:"".concat(null===e||void 0===e?void 0:e.options.value,"#toolbar=0&navpanes=0&scrollbar=0&zoom=100%"),width:"100%",height:"1000px"})):r.createElement("div",{style:{width:"inherit"},onClick:function(){return window.open(null===e||void 0===e?void 0:e.options.value,"_blank")}},r.createElement("textarea",{disabled:!0,onChange:function(){},autoComplete:"none",value:null===(null===e||void 0===e?void 0:e.options.value)?"":null===e||void 0===e?void 0:e.options.value,className:me.fieldTypeInput,style:{height:"auto",width:"inherit",cursor:"pointer"},name:e.field_name})));if("Formula"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Nn=e.options)||void 0===Nn||null===(Dn=Nn.operator)||void 0===Dn?void 0:Dn.length)>0){var sa,va,ca=Z.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)})),pa=(0,z.LV)(null===e||void 0===e?void 0:e.options,g.selected_fields.filter((function(n){return e.options.list.includes(n.field_name)})),[].concat((0,d.Z)(Z.components.filter((function(e){return ca.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(q.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),ca))),null!==(sa=null===Z||void 0===Z?void 0:Z.items)&&void 0!==sa?sa:[],null!==(va=null===Z||void 0===Z?void 0:Z.newStepComponents)&&void 0!==va?va:[]);return void 0!==pa&&0!==pa&&(e.value=pa),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},width:"100%",style:{border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement("div",{style:{flexDirection:"column",width:"inherit"},key:n},r.createElement("input",{value:pa||0,className:me.fieldTypeInput,name:e.field_name,readOnly:!0,style:{border:"0"}}),uo&&pa>0&&r.createElement(Qe,{title:"",nav:uo,openNav:so},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"20px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{fontWeight:"bolder"}},pa)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),r.createElement("br",null),r.createElement(h.zx,{clicked:function(){return so()},title:"Continue",style:{width:"100%"}})))))}if("Dropdown"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(zn=e.options)||void 0===zn||null===(An=zn.list)||void 0===An?void 0:An.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Wt=e.options)||void 0===Wt?void 0:Wt.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},key:n,visible:e.visible,mandatory:e.mandatory,items:null===e||void 0===e||null===(qt=e.options)||void 0===qt?void 0:qt.list.map((function(e){return{label:e,value:e}})),className:me.dropdownClassContainer,error:e.errors,onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(e){Ln("50px"),w(e,n)},selectionType:null===e||void 0===e||null===(Yt=e.options)||void 0===Yt?void 0:Yt.type,fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value})));if("Payments"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Rn=e.options)||void 0===Rn||null===(Bn=Rn.list)||void 0===Bn?void 0:Bn.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ht=e.options)||void 0===Ht?void 0:Ht.notes,fieldIcon:e.icon,isProcess:!0,visible:!0,mandatory:e.mandatory,error:On[n]},r.createElement("div",{style:{width:"100%",pointerEvents:!0===(null===Y||void 0===Y||null===(jt=Y.processModule)||void 0===jt?void 0:jt.isUpdating)?"none":""}},null!==b&&void 0!==b&&null!==(Gt=b.payments)&&void 0!==Gt&&Gt.stripe_id?r.createElement("div",{style:{padding:"10px 5px 10px 5px",width:"100%",border:"0px solid var(--app-color-gray-lighter)"}},"".concat(null===e||void 0===e?void 0:e.value,", ").concat(null===b||void 0===b||null===(ed=b.payments)||void 0===ed?void 0:ed.stripe_id.slice(0,6))):r.createElement(I.Z,{key:n,visible:e.visible,mandatory:e.mandatory,items:!0===(null===(Jt=Y.processModule)||void 0===Jt||null===(Vt=Jt.module)||void 0===Vt||null===(Qt=Vt.options)||void 0===Qt?void 0:Qt.credits)?[].concat((0,d.Z)(null!==(Xt=null===e||void 0===e||null===($t=e.options)||void 0===$t?void 0:$t.list.map((function(e){return{label:e,value:e}})))&&void 0!==Xt?Xt:[]),[{label:"Wallet",value:"Wallet"}]):null===e||void 0===e||null===(Kt=e.options)||void 0===Kt?void 0:Kt.list.map((function(e){return{label:e,value:e}})),className:me.dropdownClassContainer,error:e.errors,onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(o){if(o){var l,i,t,d,a,u,r,s,v,c,p,m,f,_,h,y,g,b,x,E=null===(l=Z.newStepComponents.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})).length>0})))||void 0===l||null===(i=l.selected_fields)||void 0===i?void 0:i.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})),C=null===(t=Z.components.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})).length>0})))||void 0===t||null===(d=t.selected_fields)||void 0===d?void 0:d.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)})),M=null===(a=Z.currentStep)||void 0===a||null===(u=a.component_blueprints)||void 0===u||null===(r=u.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}))})))||void 0===r||null===(s=r.selected_fields)||void 0===s?void 0:s.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}));if(On[n]="",+(null!==(v=null===E||void 0===E?void 0:E.value)&&void 0!==v?v:0)>0)Z.total=E.value,Z.plan=E.value;else if(+(null!==(c=null===C||void 0===C?void 0:C.value)&&void 0!==c?c:0)>0)Z.total=C.value,Z.plan=C.value;else{if(!(+(null!==(p=null===M||void 0===M?void 0:M.value)&&void 0!==p?p:0)>0))return On[n]="Please enter a payment amount in the designated field",Un([]),void setTimeout((function(){return Un(On)}));Z.total=M.value,Z.plan=M.value}if(1==(null===(m=Y.processModule)||void 0===m||null===(f=m.module)||void 0===f||null===(_=f.options)||void 0===_?void 0:_.credits)&&"Wallet"===o){if(+(null!==(b=null===(x=Oe.options)||void 0===x?void 0:x.credit)&&void 0!==b?b:0)<+Z.total)return On[n]="Insufficient wallet balance",Un([]),void setTimeout((function(){return Un(On)}))}else if(1==(null===(h=Y.processModule)||void 0===h||null===(y=h.module)||void 0===y||null===(g=y.options)||void 0===g?void 0:g.credits)&&"Points"===o){var S,k;if(+(null!==(S=null===(k=Oe.options)||void 0===k?void 0:k.points)&&void 0!==S?S:0)<+Z.total)return On[n]="Insufficient points balance",Un([]),void setTimeout((function(){return Un(On)}))}On[n]="",Un([]),setTimeout((function(){return Un(On)})),Ln("50px"),w(o,n)}},selectionType:"Dropdown",fieldIcon:e.icon,value:void 0===e.value||null===e.value?"":e.value,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&"multiple"===(null===e||void 0===e||null===(qn=e.options)||void 0===qn?void 0:qn.type))return r.createElement(ye.Z,{enabled:Do,style:{height:"".concat((null===e||void 0===e||null===(nd=e.value)||void 0===nd?void 0:nd.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:te,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(od=e.options)||void 0===od?void 0:od.notes},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(I.Z,{onOpen:function(e){Ln("50px"===Tn?"180px":"50px")},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:me.dropdownClassContainer,items:$.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.value)})),value:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(e){w(e,n)},selectionType:"multiple",fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:""})));if("Positions"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Yn=e.options)&&void 0!==Yn&&Yn.calendar){var ma,fa,_a,ha,ya,ga,ba,xa,Ea,Ca,wa,Ma,Za,Sa,ka,Pa,Ia=JSON.parse(null!==(ma=null===e||void 0===e?void 0:e.value)&&void 0!==ma?ma:JSON.stringify({user:0})),Na=qe.find((function(e){return e.id===(null===Ia||void 0===Ia?void 0:Ia.task)})),Da=null===qe||void 0===qe?void 0:qe.filter((function(e){var n,o,l,i;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(o=Y.processModule)||void 0===o?void 0:o.module_id)&&e.creator.id===(null===Ia||void 0===Ia?void 0:Ia.user)&&!(null!==e&&void 0!==e&&null!==(l=e.assignee)&&void 0!==l&&l.id)&&ae()((0,de.now)()).diff(ae()(null===e||void 0===e||null===(i=e.add_info)||void 0===i?void 0:i.start),"seconds")<0}));return r.createElement(ye.Z,{enabled:Do,style:{marginBottom:"50px"},width:"100%",editMode:te,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(fa=e.options)||void 0===fa?void 0:fa.notes},r.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(I.Z,{onFocus:function(){return 0==$.length&&po()},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(_a=e.options)||void 0===_a?void 0:_a.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,value:null===(ha=$.find((function(e){return e.value===(null===Ia||void 0===Ia?void 0:Ia.pos)})))||void 0===ha?void 0:ha.label,loading:Ve,items:$.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.value)})),error:null===e||void 0===e?void 0:e.errors,onChange:function(e){e.length>0&&(Ia.pos=void 0,Ia.user=void 0,w(JSON.stringify(Ia),n),(0,Ee.n0)([e]).pipe((0,c.q)(1)).subscribe({next:function(o){be(o),setTimeout((function(){Ia.pos=e,w(JSON.stringify(Ia),n)}),0)}}))},selectionType:null===e||void 0===e||null===(ya=e.options)||void 0===ya?void 0:ya.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),r.createElement("div",{style:{width:"100%"}},0==(null===_e||void 0===_e?void 0:_e.length)&&r.createElement("p",null,"No ".concat(e.field_name," found")),!Na&&r.createElement(S.default,{initialSelected:null!==e&&void 0!==e&&e.value?_e.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(e){return(null===Ia||void 0===Ia?void 0:Ia.pos)===(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){return e.value})).indexOf(null===Ia||void 0===Ia?void 0:Ia.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About"].concat((0,d.Z)(null!==(ga=null===U||void 0===U||null===(ba=U.misc_info)||void 0===ba?void 0:ba.profile)&&void 0!==ga?ga:["Rate"]),["Location","Photo","Ratings"]),list:_e.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(e){return(null===Ia||void 0===Ia?void 0:Ia.pos)===(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){var n,o,l,i,t,d,u,s,v,c,p,m,f,_=null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.ratings)||void 0===o?void 0:o.map((function(e){return+e.ratings}));return(0,a.Z)((0,a.Z)({},null!==(l=null===(i=e.user)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.add_info)&&void 0!==l?l:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:r.createElement("div",{style:{marginTop:"10px"}},null===(d=e.user)||void 0===d?void 0:d.city),About:null!==(u=null===(s=e.user.options)||void 0===s?void 0:s.info)&&void 0!==u?u:null===(v=e.user)||void 0===v?void 0:v.positions.map((function(e){return e.name})).toString().replace(",",", "),id:e.user.id,Photo:null!==(c=null===(p=e.user)||void 0===p?void 0:p.photo)&&void 0!==c?c:null===Y||void 0===Y||null===(m=Y.processModule.module)||void 0===m||null===(f=m.options)||void 0===f?void 0:f.background,Ratings:(null===_||void 0===_?void 0:_.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(_))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(_))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})})))})})),onListItemClick:function(e){if(e){var o=_e.find((function(n){return n.value===e.id}));Ia.user=null===o||void 0===o?void 0:o.value,w(JSON.stringify(Ia),n),(0,De.Mk)(null===o||void 0===o?void 0:o.value,!0).pipe((0,c.q)(1)).subscribe({})}}},(null===Da||void 0===Da?void 0:Da.length)>0&&r.createElement("p",null,"Schedules"),(null===Da||void 0===Da?void 0:Da.length)>0&&r.createElement(pe.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:5,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ce.pt,ce.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===Da||void 0===Da?void 0:Da.length)>0?"":"none"}},null===Da||void 0===Da?void 0:Da.map((function(e,n){return r.createElement(pe.o5,{key:n+100,className:me.swiperslide},r.createElement("div",{className:me.dashboardCard,onClick:function(){jn(!0),Qn(e)}},r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.end)).format("h:mm a")),r.createElement("hr",{style:{border:"0.8px dashed gray"}}),r.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("MMM")),r.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("DD"))))})))),Na&&r.createElement(S.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(xa=null===e||void 0===e||null===(Ea=e.options)||void 0===Ea?void 0:Ea.header)&&void 0!==xa?xa:"Name",null!==(Ca=null===e||void 0===e||null===(wa=e.options)||void 0===wa?void 0:wa.start)&&void 0!==Ca?Ca:"Date","Photo"],list:[Na].map((function(n){var o,l,i,d,a,u,r;return r={},(0,t.Z)(r,null!==(o=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.header)&&void 0!==o?o:"Name",n.name),(0,t.Z)(r,null!==(i=null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.start)&&void 0!==i?i:"Date",ae()(new Date(null===(a=n.add_info)||void 0===a?void 0:a.start)).format("MMM DD h:mm a")),(0,t.Z)(r,"Responsible","".concat(n.creator.first_name," ").concat(n.creator.last_name)),(0,t.Z)(r,"Photo",null===(u=n.creator)||void 0===u?void 0:u.photo),r})),onListItemClick:function(e){e&&(jn(!0),Qn(Na))}}),Hn&&r.createElement(nn,{save:!1,modalVisible:Hn,heading:null!==(Ma=null===e||void 0===e||null===(Za=e.options)||void 0===Za?void 0:Za.header)&&void 0!==Ma?Ma:Vn?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Vn,isProcess:!0,blured:!1,onClose:function(){return jn(!1)},isEdit:!!Vn,statuses:null===e||void 0===e||null===(Sa=e.options)||void 0===Sa?void 0:Sa.list,priority:null===e||void 0===e||null===(ka=e.options)||void 0===ka?void 0:ka.priority,span:null===e||void 0===e||null===(Pa=e.options)||void 0===Pa?void 0:Pa.span,start_date:en,onUpdate:function(o){if(o.creator.id!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null===o||void 0===o?void 0:o.assignee_id)===(null===Ce||void 0===Ce?void 0:Ce.id)){var l;if(Z.assigned_to=o.creator.id,Ia.task=null===o||void 0===o?void 0:o.id,null!==o&&void 0!==o&&null!==(l=o.add_info)&&void 0!==l&&l.value){var i,t,d,a,u,r,s,v,c;Ia.value=null===o||void 0===o||null===(i=o.add_info)||void 0===i?void 0:i.value;var p,m=null===(t=Z.components.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===t?void 0:t.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(m)m.value=null===o||void 0===o||null===(p=o.add_info)||void 0===p?void 0:p.value;var f,_=null===(d=Z.newStepComponents.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===d?void 0:d.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(_)_.value=null===o||void 0===o||null===(f=o.add_info)||void 0===f?void 0:f.value;var h,y=null===(a=Y.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(n){var o;return null===(o=n.component_blueprints)||void 0===o?void 0:o.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))}))})))||void 0===r||null===(s=r.component_blueprints)||void 0===s||null===(v=s.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(y)y.value=null===o||void 0===o||null===(h=o.add_info)||void 0===h?void 0:h.value}w(JSON.stringify(Ia),n)}}}))))}if("Positions"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{enabled:Do,style:{height:"".concat((null===e||void 0===e||null===(ld=e.value)||void 0===ld?void 0:ld.split(",").length)>2?"160":"45","px"),marginBottom:"50px"},width:"100%",editMode:te,key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(id=e.options)||void 0===id?void 0:id.notes},r.createElement("div",{style:{width:"100%",border:"1px solid var(--app-color-gray-dark)"}},r.createElement(I.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(td=e.options)||void 0===td?void 0:td.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:$.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.value)})),value:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(e){w(e,n)},selectionType:null===e||void 0===e||null===(dd=e.options)||void 0===dd?void 0:dd.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("Value Button"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{width:"100%",editMode:te,key:n,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},r.createElement(S.default,{rowStyleSelected:{border:null!==e&&void 0!==e&&e.value?"2px solid black":"1px dashed black"},initialSelected:(null===(ad=e.options)||void 0===ad?void 0:ad.value)===(null===e||void 0===e?void 0:e.value)?0:void 0,modern:!0,isReport:!1,filtersContainer:me.filtersContainerII,"app-variant-is-mobile":"true",columns:["Type","Description","Image"],list:[{Type:null===(ud=e.options)||void 0===ud?void 0:ud.label,Description:null!==(rd=null===e||void 0===e||null===(sd=e.options)||void 0===sd?void 0:sd.notes)&&void 0!==rd?rd:e.field_name,Image:null===(vd=e.options)||void 0===vd?void 0:vd.image}],onListItemClick:function(){var o;null!==e&&void 0!==e&&e.value?x(void 0,n):(null===g||void 0===g||null===(o=g.selected_fields)||void 0===o||o.filter((function(e){return"Value Button"===(null===e||void 0===e?void 0:e.data_type_name)})).map((function(e){e.value=void 0})),x(e.options.value,n))}}));if("Calendar"===(null===e||void 0===e?void 0:e.data_type_name))return r.createElement(ye.Z,{enabled:Do,width:"100%",style:{width:"100%"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,notes:null===e||void 0===e||null===(cd=e.options)||void 0===cd?void 0:cd.notes},r.createElement("div",{id:e.field_name,style:{width:"inherit",marginBottom:"160px"}},r.createElement(h.zx,{light:!0,clicked:function(){var e,n;Xe(!0),(0,De.Mk)(null!==(e=null===b||void 0===b||null===(n=b.created_by)||void 0===n?void 0:n.id)&&void 0!==e?e:Ce.id,!0).pipe((0,c.q)(1)).subscribe({next:function(){Xe(!1)}})},loading:Ve,icon:r.createElement("img",{src:C.Fdh})}),!(Hn||Ve)&&r.createElement(fe.Scheduler,{events:qe.length>0?null===qe||void 0===qe||null===(pd=qe.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(o=Y.processModule)||void 0===o?void 0:o.module_id)})))||void 0===pd?void 0:pd.map((function(e){var n,o;return{event_id:e.id,title:e.description,start:new Date(Date.parse(null===(n=e.add_info)||void 0===n?void 0:n.start)),end:null!==e&&void 0!==e&&e.completed_at?new Date(Date.parse(e.completed_at)):new Date(Date.parse(null===(o=e.add_info)||void 0===o?void 0:o.end)),admin_id:2,color:"#50b500",editable:!1,deletable:!1}})):[],navigation:!0,view:Kn,agenda:(null===b||void 0===b||null===(md=b.created_by)||void 0===md?void 0:md.id)!==Ce.id&&!(null===b||void 0===b||null===(fd=b.created_by)||void 0===fd||!fd.id),day:{startHour:0,endHour:24,cellRenderer:function(e){e.height,e.start,e.onClick;var n=!1,o=(0,i.Z)(e,Re);return r.createElement(h.zx,(0,l.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){jn(!0),Qn(void 0)},disabled:n},o))}},month:(null===b||void 0===b||null===(_d=b.created_by)||void 0===_d?void 0:_d.id)!==Ce.id&&void 0!==(null===b||void 0===b?void 0:b.created_by)?null:{cellRenderer:function(e){e.height,e.start,e.onClick;var n=!1,o=(0,i.Z)(e,Be);return r.createElement(h.zx,(0,l.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){jn(!0),Qn(void 0)},disabled:n},o))}},week:(null===b||void 0===b||null===(hd=b.created_by)||void 0===hd?void 0:hd.id)!==Ce.id&&void 0!==(null===b||void 0===b?void 0:b.created_by)?null:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:0,endHour:25,step:60,cellRenderer:function(e){e.height;var n=e.start,o=(e.onClick,!1),t=(0,i.Z)(e,Fe);return r.createElement(h.zx,(0,l.Z)({style:{height:"100%",background:"transparent",cursor:"pointer"},clicked:function(){on(n),jn(!0),Qn(void 0)},disabled:o},t))}},onEventClick:function(e){jn(!0),Qn(null===qe||void 0===qe?void 0:qe.find((function(n){return n.id===e.event_id})))},onViewChange:function(e){return eo(e)}}),Hn&&r.createElement(nn,{modalVisible:Hn,heading:null!==e&&void 0!==e&&null!==(yd=e.options)&&void 0!==yd&&yd.title?null===e||void 0===e||null===(gd=e.options)||void 0===gd?void 0:gd.title:Vn?"Update Calendar":"Create New Calendar",task:Vn,isProcess:!0,blured:!1,onClose:function(){return jn(!1)},isEdit:!!Vn,statuses:null===e||void 0===e||null===(bd=e.options)||void 0===bd?void 0:bd.list,priority:null===e||void 0===e||null===(xd=e.options)||void 0===xd?void 0:xd.priority,span:null===e||void 0===e||null===(Ed=e.options)||void 0===Ed?void 0:Ed.span,start_date:en})));if("Video"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Gn=e.options)&&void 0!==Gn&&Gn.start)return r.createElement(ye.Z,{enabled:Do,width:"100%",editMode:te,style:{},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Cd=e.options)||void 0===Cd?void 0:Cd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}}),r.createElement("input",{value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",disabled:!0,type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",maxWidth:"98%",border:"0px"},onChange:function(e){}})),r.createElement(Ae.Z,{payload:{name:null===b||void 0===b?void 0:b.id}})));if("Video"!==(null===e||void 0===e?void 0:e.data_type_name)||null!==e&&void 0!==e&&null!==(Jn=e.options)&&void 0!==Jn&&Jn.start){if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Xn=e.options)&&void 0!==Xn&&Xn.calendar){var Ta,La,za,Aa,Oa,Ua,Ra,Ba,Fa,Wa,qa,Ya,Ha,ja,Ga,Ja,Va,Qa,Xa,$a,Ka,eu=JSON.parse(null!==(Ta=null===e||void 0===e?void 0:e.value)&&void 0!==Ta?Ta:JSON.stringify({user:0})),nu=qe.find((function(e){return e.id===(null===eu||void 0===eu?void 0:eu.task)})),ou=null===qe||void 0===qe?void 0:qe.filter((function(e){var n,o,l,i;return(null===e||void 0===e||null===(n=e.add_info)||void 0===n?void 0:n.module_id)===(null===(o=Y.processModule)||void 0===o?void 0:o.module_id)&&e.creator.id===(null===eu||void 0===eu?void 0:eu.user)&&!(null!==e&&void 0!==e&&null!==(l=e.assignee)&&void 0!==l&&l.id)&&ae()((0,de.now)()).diff(ae()(null===e||void 0===e||null===(i=e.add_info)||void 0===i?void 0:i.start),"seconds")<0}));return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular"},enabled:Do,width:"100%",editMode:te,dragEnd:function(n){var o,l=null===(o=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-l.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-l.left,"px")},key:n,fieldLabel:null===e||void 0===e?void 0:e.field_name,notes:null===e||void 0===e||null===(La=e.options)||void 0===La?void 0:La.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},(null===e||void 0===e||null===(za=e.options)||void 0===za||null===(Aa=za.dropdown)||void 0===Aa?void 0:Aa.length)>0&&r.createElement("div",{style:{width:"100%",border:"0.5px solid var(--app-color-gray-dark)"}},r.createElement(I.Z,{visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:me.dropdownClassContainer,items:null===e||void 0===e||null===(Oa=e.options)||void 0===Oa||null===(Ua=Oa.dropdown)||void 0===Ua?void 0:Ua.map((function(e){return{label:e,value:e}})),value:null===eu||void 0===eu?void 0:eu.pos,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l,i;o.length>0&&(eu.pos=void 0,eu.user=void 0,w(JSON.stringify(eu),n),be([]),Xe(!0),(0,Ee.FY)(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.position_id,null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.filter,o).pipe((0,c.q)(1)).subscribe({next:function(e){Xe(!1),be(e),setTimeout((function(){eu.pos=o,w(JSON.stringify(eu),n)}),0)},error:function(){return Xe(!1)}}))},selectionType:null===e||void 0===e||null===(Ra=e.options)||void 0===Ra?void 0:Ra.type,fieldIcon:null===e||void 0===e?void 0:e.icon})),0==(null===_e||void 0===_e?void 0:_e.length)&&!Ve&&r.createElement("p",null,"No ".concat(e.field_name," found")),0==(null===_e||void 0===_e?void 0:_e.length)&&Ve&&r.createElement("p",null,"Searching for ".concat(e.field_name)),!nu&&r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},initialSelected:null!==e&&void 0!==e&&e.value?_e.filter((function(n){var o,l;return(null===n||void 0===n||null===(o=n.user)||void 0===o||null===(l=o.positions)||void 0===l?void 0:l.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(e){return e.value})).indexOf(null===eu||void 0===eu?void 0:eu.user):void 0,card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Name","Info","About"].concat((0,d.Z)(null!==(Ba=null===U||void 0===U||null===(Fa=U.misc_info)||void 0===Fa?void 0:Fa.profile)&&void 0!==Ba?Ba:["Rate"]),["Location","Photo","Ratings"]),list:_e.filter((function(n){var o,l;return(null===n||void 0===n||null===(o=n.user)||void 0===o||null===(l=o.positions)||void 0===l?void 0:l.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(e){var n,o,l,i,t,d,u,s,v,c,p,m=null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.ratings)||void 0===o?void 0:o.map((function(e){return+e.ratings}));return(0,a.Z)((0,a.Z)({},null!==(l=null===(i=e.user)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.add_info)&&void 0!==l?l:{}),{},{Name:"".concat(e.user.first_name," ").concat(e.user.last_name),Location:r.createElement("div",{style:{marginTop:"10px",fontWeight:"bolder",fontSize:"12px"}},null===(d=e.user)||void 0===d?void 0:d.city),Info:null===(u=e.user.options)||void 0===u?void 0:u.info,id:e.user.id,Photo:null!==(s=null===(v=e.user)||void 0===v?void 0:v.photo)&&void 0!==s?s:null===Y||void 0===Y||null===(c=Y.processModule.module)||void 0===c||null===(p=c.options)||void 0===p?void 0:p.background,Ratings:(null===m||void 0===m?void 0:m.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(m))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(m))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})})))})})),onListItemClick:function(e){if(e){var o=_e.find((function(n){return n.value===e.id}));eu.user=null===o||void 0===o?void 0:o.value,w(JSON.stringify(eu),n),Xe(!0),(0,De.Mk)(null===o||void 0===o?void 0:o.value,!0).pipe((0,c.q)(1)).subscribe({next:function(){return Xe(!1)},error:function(){return Xe(!1)}})}}},(null===ou||void 0===ou?void 0:ou.length)>0&&r.createElement("p",null,"Schedules"),(null===ou||void 0===ou?void 0:ou.length)>0&&(null===ou||void 0===ou?void 0:ou.length)>0?r.createElement(pe.tq,{slidesPerView:3,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},modules:[ce.pt,ce.tl],className:"mySwiper",style:{border:"0.8px dashed gray",padding:"5px",height:"200px",display:(null===ou||void 0===ou?void 0:ou.length)>0?"":"none",zIndex:"0"}},null===(Wa=G.Z([J.Z(V.Z("due_date"))])(ou))||void 0===Wa?void 0:Wa.map((function(e,n){return r.createElement(pe.o5,{key:n+200,className:me.swiperslide},r.createElement("div",{className:me.dashboardCard,onClick:function(){jn(!0),Qn(e)}},r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.start)).format("h:mm a")),e.add_info.end!==e.add_info.start&&r.createElement("div",{style:{fontSize:"10px"}},ae()(new Date(e.add_info.end)).format("h:mm a")),r.createElement("hr",{style:{border:"0.8px dashed gray"}}),r.createElement("p",{style:{fontSize:"12px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("MMM")),r.createElement("div",{style:{fontSize:"20px",fontWeight:"bold"}},ae()(new Date(e.add_info.start)).format("DD"))))}))):null!==eu&&void 0!==eu&&eu.user?r.createElement("p",{style:{fontSize:"12px",paddingLeft:"10px"}},Ve?"Searching for Schedules":"No Schedules Found"):r.createElement("div",null)),r.createElement("div",{className:me.centerDiv},!nu&&!(null!==e&&void 0!==e&&null!==(qa=e.options)&&void 0!==qa&&qa.dropdown)&&(!(null!==e&&void 0!==e&&e.last_page)||1===(null===e||void 0===e?void 0:e.last_page))&&r.createElement(h.zx,{title:"More",style:{width:"30%"},clicked:function(){var o,l;(0,Ee.Wz)(null===(o=Y.processModule.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.positions,5,1).pipe((0,v.P)()).subscribe({next:function(o){e.last_page=null===o||void 0===o?void 0:o.last_page,be(null===o||void 0===o?void 0:o.data),eu.user=void 0,w(JSON.stringify(eu),n)}})}}),!nu&&!(null!==e&&void 0!==e&&null!==(Ya=e.options)&&void 0!==Ya&&Ya.dropdown)&&(null===e||void 0===e?void 0:e.last_page)>1&&r.createElement("div",{style:{display:"flex"}},(0,d.Z)(Array(Math.ceil(+(null===e||void 0===e?void 0:e.last_page)))).map((function(o,l){return r.createElement(h.zx,{title:l+1,clear:!0,key:l,style:{width:"40px",display:l<18?"":"none"},titleContainer:me.pageContainer,disabled:l==(null===e||void 0===e?void 0:e.page)-1,clicked:function(){var o,i;e.page=l+1,(0,Ee.Wz)(null===(o=Y.processModule.module)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.positions,5,null===e||void 0===e?void 0:e.page).pipe((0,v.P)()).subscribe({next:function(o){e.last_page=null===o||void 0===o?void 0:o.last_page,be(null===o||void 0===o?void 0:o.data),eu.user=void 0,w(JSON.stringify(eu),n)}})}})})))),nu&&r.createElement(S.default,{modern:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["Responsible",null!==(Ha=null===e||void 0===e||null===(ja=e.options)||void 0===ja?void 0:ja.header)&&void 0!==Ha?Ha:"Name",null!==(Ga=null===e||void 0===e||null===(Ja=e.options)||void 0===Ja?void 0:Ja.start)&&void 0!==Ga?Ga:"Date","Photo"],list:[nu].map((function(n){var o,l,i,d,a,u,r;return r={},(0,t.Z)(r,null!==(o=null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.header)&&void 0!==o?o:"Name",n.name),(0,t.Z)(r,null!==(i=null===e||void 0===e||null===(d=e.options)||void 0===d?void 0:d.start)&&void 0!==i?i:"Date",ae()(new Date(null===(a=n.add_info)||void 0===a?void 0:a.start)).format("MMM DD h:mm a")),(0,t.Z)(r,"Responsible","".concat(n.creator.first_name," ").concat(n.creator.last_name)),(0,t.Z)(r,"Position",""),(0,t.Z)(r,"Photo",null===(u=n.creator)||void 0===u?void 0:u.photo),r})),onListItemClick:function(e){e&&(jn(!0),Qn(nu))}}),Hn&&r.createElement(nn,{save:!1,modalVisible:Hn,heading:null!==(Va=null===e||void 0===e||null===(Qa=e.options)||void 0===Qa?void 0:Qa.header)&&void 0!==Va?Va:Vn?"Update Calendar":"Create New Calendar",labels:null===e||void 0===e?void 0:e.options,task:Vn,isProcess:!0,blured:!1,onClose:function(){return jn(!1)},isEdit:!!Vn,statuses:null===e||void 0===e||null===(Xa=e.options)||void 0===Xa?void 0:Xa.list,priority:null===e||void 0===e||null===($a=e.options)||void 0===$a?void 0:$a.priority,span:null===e||void 0===e||null===(Ka=e.options)||void 0===Ka?void 0:Ka.span,start_date:en,onUpdate:function(o){if(o.creator.id!==(null===Ce||void 0===Ce?void 0:Ce.id)&&(null===o||void 0===o?void 0:o.assignee_id)===(null===Ce||void 0===Ce?void 0:Ce.id)){var l;if(Z.assigned_to=o.creator.id,eu.task=null===o||void 0===o?void 0:o.id,null!==o&&void 0!==o&&null!==(l=o.add_info)&&void 0!==l&&l.value){var i,t,d,a,u,r,s,v,c;eu.value=null===o||void 0===o||null===(i=o.add_info)||void 0===i?void 0:i.value;var p,m=null===(t=Z.components.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===t?void 0:t.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(m)m.value=null===o||void 0===o||null===(p=o.add_info)||void 0===p?void 0:p.value;var f,_=null===(d=Z.newStepComponents.find((function(n){return n.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===d?void 0:d.selected_fields.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(_)_.value=null===o||void 0===o||null===(f=o.add_info)||void 0===f?void 0:f.value;var h,y=null===(a=Y.processModule)||void 0===a||null===(u=a.steps)||void 0===u||null===(r=u.find((function(n){var o;return null===(o=n.component_blueprints)||void 0===o?void 0:o.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))}))})))||void 0===r||null===(s=r.component_blueprints)||void 0===s||null===(v=s.find((function(n){var o;return null===n||void 0===n||null===(o=n.selected_fields)||void 0===o?void 0:o.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}))})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(n){var o;return n.field_name===(null===(o=e.options)||void 0===o?void 0:o.valueL)}));if(y)y.value=null===o||void 0===o||null===(h=o.add_info)||void 0===h?void 0:h.value}w(JSON.stringify(eu),n)}}})))}var lu,iu,tu,du,au,uu,ru,su,vu,cu,pu,mu,fu,_u,hu,yu,gu,bu,xu,Eu,Cu,wu,Mu,Zu,Su,ku,Pu,Iu,Nu,Du,Tu,Lu,zu,Au,Ou,Uu,Ru,Bu,Fu,Wu,qu,Yu,Hu,ju,Gu,Ju;if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(!0===(null===e||void 0===e||null===($n=e.options)||void 0===$n?void 0:$n.slider)||lo)&&(null===X||void 0===X?void 0:X.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},dragEnd:function(n){var o,l=null===(o=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-l.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-l.left,"px")},key:n,notes:null===e||void 0===e||null===(lu=e.options)||void 0===lu?void 0:lu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(pe.tq,{slidesPerView:1,centeredSlides:!0,spaceBetween:10,initialSlide:1,pagination:{clickable:!0,dynamicBullets:!0},style:{zIndex:0},modules:[ce.pt,ce.tl],className:"mySwiper"},X.filter((function(n){var o;return(null===n||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})).map((function(o,l){var i,d,u,s,v,c,p,m,f,_,h,y=null===o||void 0===o||null===(i=o.ratings)||void 0===i?void 0:i.map((function(e){return+e.ratings}));return r.createElement(pe.o5,{key:l,className:me.swiperslide},r.createElement("div",{style:{padding:"5px",width:"100%"},onClick:function(){var l;e.open=null===e||void 0===e||!e.open,e.idx=n,null!==e&&void 0!==e&&null!==(l=e.options)&&void 0!==l&&l.skip?io(e.open):w(null===o||void 0===o?void 0:o.id,n)}},r.createElement(Ie.Z,{photo:null===o||void 0===o?void 0:o.photo,height:null!==e&&void 0!==e&&e.open?"auto":"260px",width:"100%",firstName:"".concat(null===o||void 0===o?void 0:o.first_name," ").concat(null===o||void 0===o?void 0:o.last_name),position:r.createElement("div",{style:{marginTop:"10px"}},null===o||void 0===o?void 0:o.city),email:null===(d=o.options)||void 0===d?void 0:d.info},(null===y||void 0===y?void 0:y.length)>0&&r.createElement("div",{className:me.simpleNames},Array(Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(y))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"var(--app-color-blue)"}})})),Array(5-Math.round(ne.Z(oe.Z,[le.Z,ie.Z])(y))).fill(0).map((function(e,n){return r.createElement(ve.G,{key:n,icon:se.Tab,style:{color:"lightgray"}})}))),r.createElement("div",{className:me.simpleNames,style:{pointerEvents:"none",padding:"20px 10px 0 10px",color:"gray"}},(null===(u=e.options)||void 0===u?void 0:u.info)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==n&&r.createElement(r.Fragment,null,r.createElement("p",null,"General Info:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:["First Name","Last Name","Phone","Address","City","Postal","Bio"],list:[o].map((function(e){var n,o,l,i,d,a,u;return u={},(0,t.Z)(u,"First Name","".concat(null!==(n=null===e||void 0===e?void 0:e.first_name)&&void 0!==n?n:"")),(0,t.Z)(u,"Last Name","".concat(null!==(o=null===e||void 0===e?void 0:e.last_name)&&void 0!==o?o:"")),(0,t.Z)(u,"Phone","".concat(null!==(l=null===e||void 0===e?void 0:e.phone)&&void 0!==l?l:"")),(0,t.Z)(u,"Address","".concat(null!==(i=null===e||void 0===e?void 0:e.address)&&void 0!==i?i:"")),(0,t.Z)(u,"City","".concat(null!==(d=null===e||void 0===e?void 0:e.city)&&void 0!==d?d:"")),(0,t.Z)(u,"Postal","".concat(null!==(a=null===e||void 0===e?void 0:e.postal)&&void 0!==a?a:"")),u}))})),(null===(s=e.options)||void 0===s?void 0:s.other)&&(null===e||void 0===e?void 0:e.open)&&(null===e||void 0===e?void 0:e.idx)==n&&Object.keys(null!==(v=null===o||void 0===o||null===(c=o.options)||void 0===c?void 0:c.add_info)&&void 0!==v?v:{}).length>1&&r.createElement(r.Fragment,null,r.createElement("p",null,"More Info:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,"app-variant-is-mobile":"true",columns:Object.keys(null!==(p=null===o||void 0===o||null===(m=o.options)||void 0===m?void 0:m.add_info)&&void 0!==p?p:{}),list:[o].map((function(e){var n,o;return(0,a.Z)((0,a.Z)({},null!==(n=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.add_info)&&void 0!==n?n:{}),{},{Rate:""})}))})),(null===(f=e.options)||void 0===f?void 0:f.info)&&(null===e||void 0===e?void 0:e.open)&&(null===o||void 0===o||null===(_=o.ratings)||void 0===_?void 0:_.length)>0&&r.createElement(r.Fragment,null,r.createElement("p",null,"What other users say:"),r.createElement(S.default,{rowStyleSelected:{border:"2px solid var(--app-color-gray-light)"},card:!0,isReport:!1,columns:["Feedback"],list:null===o||void 0===o||null===(h=o.ratings)||void 0===h?void 0:h.map((function(e,n){return{Feedback:'"'.concat(e.comments,'"')}}))}))))))}))));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(no=e.options)||void 0===no||null===(oo=no.position_id)||void 0===oo?void 0:oo.length)>0)return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},dragEnd:function(n){var o,l=null===(o=document.getElementById(null===g||void 0===g?void 0:g.name))||void 0===o?void 0:o.getBoundingClientRect();document.getElementById(e.field_name).style.position="absolute",document.getElementById(e.field_name).style.top="".concat(n.top-l.top,"px"),document.getElementById(e.field_name).style.left="".concat(n.left-l.left,"px")},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(iu=e.options)||void 0===iu?void 0:iu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(I.Z,{onOpen:function(e){Ln("50px"===Tn?"180px":"50px")},onFocus:function(){var n;return 0==_e.length&&co(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:me.dropdownClassContainer,items:_e.filter((function(n){var o,l;return(null===n||void 0===n||null===(o=n.user)||void 0===o||null===(l=o.positions)||void 0===l?void 0:l.filter((function(n){var o,l;return null===e||void 0===e||null===(o=e.options)||void 0===o||null===(l=o.position_id)||void 0===l?void 0:l.includes(null===n||void 0===n?void 0:n.id)})).length)>0})),value:"single"===(null===e||void 0===e||null===(tu=e.options)||void 0===tu?void 0:tu.type)?null===(du=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===du?void 0:du.label:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l;if("single"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.type)){var i,t,d=_e.find((function(e){return e.value===o}));if(1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.email))e.email=null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.email;w(null===d||void 0===d?void 0:d.label,n)}else w(o,n);Ln("50px")},onClicked:function(e){return Ln(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(au=e.options)||void 0===au?void 0:au.type,fieldIcon:null===e||void 0===e?void 0:e.icon})));if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(to=e.options)||void 0===to||null===(ao=to.componentF)||void 0===ao?void 0:ao.length)>0&&(null===e||void 0===e||null===(ro=e.options)||void 0===ro||null===(go=ro.componentO)||void 0===go?void 0:go.length)>0){var Vu,Qu,Xu,$u,Ku,er,nr=null===(Vu=Z.components.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})).length>0})))||void 0===Vu?void 0:Vu.selected_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})),or=W.find((function(n){var o;return n.component_fields.filter((function(e){return e.value===(null===nr||void 0===nr?void 0:nr.value)})).length>0&&n.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)})),lr=null===or||void 0===or?void 0:or.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentO)}));return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Qu=e.options)||void 0===Qu?void 0:Qu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%"}},r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:function(){var n;Ln("180px"),0==_e.length&&co(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(Xu=e.options)||void 0===Xu?void 0:Xu.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:_e.filter((function(e){var n,o;return(null===e||void 0===e||null===(n=e.user)||void 0===n||null===(o=n.positions)||void 0===o?void 0:o.filter((function(e){var n;return null===lr||void 0===lr||null===(n=lr.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.name)})).length)>0})),value:"single"===(null===e||void 0===e||null===($u=e.options)||void 0===$u?void 0:$u.type)?null===(Ku=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===Ku?void 0:Ku.label:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l;if("single"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.type)){var i,t,d=_e.find((function(e){return e.value===o}));if(1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.email))e.email=null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.email;w(null===d||void 0===d?void 0:d.label,n)}else w(o,n);Ln("50px")},onClicked:function(e){return Ln(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(er=e.options)||void 0===er?void 0:er.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."})))}if("People"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(bo=e.options)||void 0===bo||null===(xo=bo.componentF)||void 0===xo?void 0:xo.length)>0&&(null===e||void 0===e||null===(Eo=e.options)||void 0===Eo||null===(Co=Eo.componentUO)||void 0===Co?void 0:Co.length)>0){var ir,tr,dr,ar,ur,rr,sr=null===(ir=Z.components.find((function(n){return n.selected_fields.filter((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})).length>0})))||void 0===ir?void 0:ir.selected_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentF)})),vr=W.filter((function(n){var o;return n.module_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.module_id)})).find((function(e){return e.component_fields.filter((function(e){return(null===e||void 0===e?void 0:e.value)===(null===sr||void 0===sr?void 0:sr.value)})).length>0})),cr=vr?null===vr||void 0===vr?void 0:vr.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.componentUO)})):"";return r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(tr=e.options)||void 0===tr?void 0:tr.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},onFocus:function(){var n;return 0==_e.length&&co(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.position_id)},visible:null===e||void 0===e?void 0:e.visible,mandatory:null===e||void 0===e?void 0:e.mandatory,className:"multiple"===(null===e||void 0===e||null===(dr=e.options)||void 0===dr?void 0:dr.type)?me.dropdownHeightClassContainer:me.dropdownClassContainer,items:_e.filter((function(e){var n;return null===cr||void 0===cr||null===(n=cr.value)||void 0===n?void 0:n.split(",").includes(null===e||void 0===e?void 0:e.label)})),value:"single"===(null===e||void 0===e||null===(ar=e.options)||void 0===ar?void 0:ar.type)?null===(ur=_e.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===ur?void 0:ur.label:e.value,loading:Ve,error:null===e||void 0===e?void 0:e.errors,onChange:function(o){var l;if("single"===(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.type)){var i,t,d=_e.find((function(e){return e.value===o}));if(1==(null===e||void 0===e||null===(i=e.options)||void 0===i?void 0:i.email))e.email=null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.email;w(null===d||void 0===d?void 0:d.label,n)}else w(o,n);Ln("50px")},onClicked:function(e){return Ln(e?"180px":"50px")},selectionType:null===e||void 0===e||null===(rr=e.options)||void 0===rr?void 0:rr.type,fieldIcon:null===e||void 0===e?void 0:e.icon,placeholder:"Select user..."}))}if("Status"===(null===e||void 0===e?void 0:e.data_type_name)){var pr,mr,fr,_r,hr,yr,gr,br,xr,Er,Cr,wr,Mr,Zr,Sr,kr,Pr,Ir=(null===(pr=e.options)||void 0===pr||null===(mr=pr.list)||void 0===mr?void 0:mr.length)>0?null===(fr=e.options)||void 0===fr||null===(_r=fr.list)||void 0===_r?void 0:_r.map((function(e){return{label:e,value:e}})):1==(null===Y||void 0===Y||null===(hr=Y.processModule)||void 0===hr||null===(yr=hr.module)||void 0===yr||null===(gr=yr.options)||void 0===gr?void 0:gr.asGraphical)?[{label:"Show",value:"Show"},{label:"Hide",value:"Hide"}]:(null===U||void 0===U||null===(br=U.misc_info)||void 0===br||null===(xr=br.status)||void 0===xr?void 0:xr.length)>0?null===U||void 0===U||null===(Er=U.misc_info)||void 0===Er?void 0:Er.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===U||void 0===U||null===(Cr=U.misc_info)||void 0===Cr||null===(wr=Cr.rules)||void 0===wr?void 0:wr.length)>0)null===U||void 0===U||null===(Pr=U.misc_info)||void 0===Pr||Pr.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(Ir="0"===n.allow?Ir.filter((function(o){var l;return n.values.concat(null===(l=e.options)||void 0===l?void 0:l.list).includes(o.value)})):Ir.filter((function(o){var l;return!n.values.concat(null===(l=e.options)||void 0===l?void 0:l.list).includes(o.value)})))}));return null!==Y&&void 0!==Y&&null!==(Mr=Y.processModule)&&void 0!==Mr&&null!==(Zr=Mr.module)&&void 0!==Zr&&null!==(Sr=Zr.options)&&void 0!==Sr&&Sr.canCancel&&(Ir=Ir.concat({label:"Request Cancellation",value:"Cancellation Request"})),r.createElement("div",{key:n,style:{width:"100%",pointerEvents:Do,marginBottom:"10px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"}},r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},className:me.multiselectComponentNoBorder,style:{border:"0px"},key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(kr=e.value)&&void 0!==kr?kr:"",items:Ir,error:e.errors,onClicked:function(e){return Ln(e?"180px":"50px")},onChange:function(e){U.start=!0,Ln("50px"),w(e,n);var o=g.selected_fields.find((function(n){return"Date"===n.data_type_name&n.field_name===e}));o&&(o.value=new Date(ae().now()))},fieldIcon:e.icon,fieldLabel:e.field_name}))}if("Profile"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(wo=e.options)||void 0===wo||null===(Mo=wo.type)||void 0===Mo?void 0:Mo.length)>0){var Nr,Dr,Tr,Lr=Ce.id;if("creator"!==e.options.type&&"wallet"!==e.options.type||null===b||void 0===b||null===(Nr=b.created_by)||void 0===Nr||!Nr.id)if("creator"!==e.options.type&&"wallet"!==e.options.type||null!==b&&void 0!==b&&null!==(Dr=b.created_by)&&void 0!==Dr&&Dr.id){if("owner"!==e.options.type)return null;var zr;Lr=null!==b&&void 0!==b&&b.options?null===(zr=JSON.parse(null===b||void 0===b?void 0:b.options))||void 0===zr?void 0:zr.owner:""}else Lr=Ce.id;else Lr=b.user_id;return(null===(Tr=Lr)||void 0===Tr?void 0:Tr.length)>0?(null===X||void 0===X?void 0:X.length)>0&&(null===X||void 0===X?void 0:X.filter((function(e){return e.id===Lr})).map((function(n,o){var l,i,t,d,a;return r.createElement("div",{className:me.centerDiv,key:o},"wallet"===e.options.type?r.createElement(S.default,{modern:!0,columns:["Name","Wallet","Email","Photo"],list:[{Name:"".concat(null===n||void 0===n?void 0:n.first_name," ").concat(null===n||void 0===n?void 0:n.last_name),Wallet:"".concat(null===(l=n.options)||void 0===l||null===(i=l.credit)||void 0===i?void 0:i.toFixed(2)),Email:null===n||void 0===n?void 0:n.email,Photo:n.photo}]}):r.createElement(Ie.Z,{photo:null===n||void 0===n?void 0:n.photo,noPhoto:0==(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.show),firstName:"".concat(null===n||void 0===n?void 0:n.first_name),lastName:"".concat(null===n||void 0===n?void 0:n.last_name),position:null===n||void 0===n||null===(d=n.positions)||void 0===d||null===(a=d.slice(0,1))||void 0===a?void 0:a.map((function(e){return e.name})),email:null===n||void 0===n?void 0:n.email,cardClicked:function(){},width:y.tq?"100%":""}))}))):null}if("Pin"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(Zo=e.options)||void 0===Zo||null===(So=Zo.pintype)||void 0===So?void 0:So.length)>0)return r.createElement(ye.Z,{style:{border:"0",width:"100%"},enabled:Do,key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(uu=e.options)||void 0===uu?void 0:uu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},null!==e&&void 0!==e&&null!==(ru=e.options)&&void 0!==ru&&ru.source||null!==(su=e.options)&&void 0!==su&&su.destination?r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){In({source:!0,destination:!1,field:e,index:n})}},r.createElement("div",{style:{width:"30%",textAlign:"left"}},r.createElement(ve.G,{icon:1==(null===e||void 0===e||null===(vu=e.options)||void 0===vu?void 0:vu.destination)?se.W3K:se.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"blue"}}),1==(null===e||void 0===e||null===(cu=e.options)||void 0===cu?void 0:cu.destination)?"From":"Pin",":"),r.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(pu=JSON.parse(e.value))||void 0===pu||null===(mu=pu.source)||void 0===mu?void 0:mu.address:"")),1==(null===e||void 0===e||null===(fu=e.options)||void 0===fu?void 0:fu.destination)&&r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),1==(null===e||void 0===e||null===(_u=e.options)||void 0===_u?void 0:_u.destination)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"},onClick:function(){In({source:!1,destination:!0,field:e,index:n})}},r.createElement("div",{style:{width:"30%",textAlign:"left"}},r.createElement(ve.G,{icon:se.opg,style:{width:"20px",height:"20px",marginRight:"5px",color:"green"}}),"To",":"),r.createElement("div",{style:{width:"70%",textAlign:"left"}},null!==e&&void 0!==e&&e.value?null===(hu=JSON.parse(e.value))||void 0===hu||null===(yu=hu.destination)||void 0===yu?void 0:yu.address:""))),(null===Pn||void 0===Pn?void 0:Pn.source)&&r.createElement(h.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:Pn.source,shadowedContainerStyle:{width:"100%"},onClose:function(){return In({source:!1,destination:!1})}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"30px"}},r.createElement("div",{className:me.title},null!==(gu=null===Pn||void 0===Pn||null===(bu=Pn.field)||void 0===bu?void 0:bu.field_name)&&void 0!==gu?gu:"Origin:"),r.createElement(Me.Z,{value:null===(xu=JSON.parse(null!==(Eu=null===Pn||void 0===Pn||null===(Cu=Pn.field)||void 0===Cu?void 0:Cu.value)&&void 0!==Eu?Eu:JSON.stringify({source:{},destination:{}})))||void 0===xu?void 0:xu.source,onChange:function(o){var l,i,t,d,a,u,r,s,v,c,p=null!==Pn&&void 0!==Pn&&null!==(l=Pn.field)&&void 0!==l&&l.value?JSON.parse(null===Pn||void 0===Pn||null===(i=Pn.field)||void 0===i?void 0:i.value):{source:{lat:0,lng:0,address:""},destination:{lat:0,lng:0,address:""}};if(p.source.lat=o.geometry.location.lat,p.source.lng=o.geometry.location.lng,p.source.address=o.formatted_address,null!==Pn&&void 0!==Pn&&Pn.field&&(null===(t=e.options)||void 0===t||!t.compute))return x(JSON.stringify(p),Pn.index),void In({source:!1,destination:!1});var m,f,_,h,y,b,E,C,w,M,S,k,P=null===g||void 0===g||null===(d=g.selected_fields)||void 0===d?void 0:d.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}));P||((P=null===(m=Z.newStepComponents)||void 0===m||null===(f=m.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===f||null===(_=f.selected_fields)||void 0===_?void 0:_.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(P=null===(h=Z.components)||void 0===h||null===(y=h.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===y||null===(b=y.selected_fields)||void 0===b?void 0:b.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(P=null===(E=Y.processModule)||void 0===E||null===(C=E.steps[null!==(S=null===(k=Y.processModule)||void 0===k?void 0:k.stepIndex)&&void 0!==S?S:1].component_blueprints)||void 0===C||null===(w=C.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===w||null===(M=w.selected_fields)||void 0===M?void 0:M.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}))));if(null!==p&&void 0!==p&&p.source&&null!==(a=e.options)&&void 0!==a&&a.compute&&0==(null===(u=e.options)||void 0===u?void 0:u.destination))p.distance=(0,z.Iw)(p.source.lat,p.source.lng,We.latitude,We.longitude),p.duration=0,P&&(P.value=p.distance,P.disabled=!0),x(JSON.stringify(p),n);else if(null!==(r=p.source)&&void 0!==r&&r.address&&null!==Pn&&void 0!==Pn&&null!==(s=Pn.field.options)&&void 0!==s&&s.compute){var I;null===(I=(0,Ne.Y)(p.source.address,p.destination.address))||void 0===I||I.subscribe({next:function(e){var n;if((null===e||void 0===e||null===(n=e.routes)||void 0===n?void 0:n.length)>0){var o,l,i,t,d,a=e.routes[0];if((null===a||void 0===a||null===(o=a.legs)||void 0===o?void 0:o.length)>0)p.distance=(null===(l=a.legs[0])||void 0===l||null===(i=l.distance)||void 0===i?void 0:i.value)/1e3,p.duration=null===(t=a.legs[0])||void 0===t||null===(d=t.duration)||void 0===d?void 0:d.value,p.steps=a.legs[0].steps,P&&(P.value=p.distance,P.disabled=!0)}},error:function(e){p.distance=(0,z.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,P&&(P.value=p.distance,P.disabled=!0)}})}else null!==(v=p.source)&&void 0!==v&&v.address&&(p.distance=(0,z.Iw)(p.source.lat,p.source.lng,p.destination.lat,p.destination.lng),p.duration=0,P&&(P.value=p.distance));x(JSON.stringify(p),null!==(c=null===Pn||void 0===Pn?void 0:Pn.index)&&void 0!==c?c:n),In({source:!1,destination:!1})},mapkey:null===(wu=U.misc_info)||void 0===wu?void 0:wu.map}))),(null===Pn||void 0===Pn?void 0:Pn.destination)&&r.createElement(h.U7,{hasCloseIcon:!0,blured:!1,scrollable:!0,isOpen:Pn.destination,shadowedContainerStyle:{width:"100%"},shadowedContainerClassname:me.mappopup,onClose:function(){return In({source:!1,destination:!1})}},r.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.createElement("div",{className:me.title},null!==(Mu=null===Pn||void 0===Pn||null===(Zu=Pn.field)||void 0===Zu?void 0:Zu.field_name)&&void 0!==Mu?Mu:"Destination:"),r.createElement(Me.Z,{value:null===(Su=JSON.parse(null!==(ku=null===Pn||void 0===Pn||null===(Pu=Pn.field)||void 0===Pu?void 0:Pu.value)&&void 0!==ku?ku:JSON.stringify({source:{},destination:{}})))||void 0===Su?void 0:Su.destination,onChange:function(e){var n,o,l,i,t,d,a,u,r,s,v,c,p,m=null!==Pn&&void 0!==Pn&&null!==(n=Pn.field)&&void 0!==n&&n.value?JSON.parse(null===Pn||void 0===Pn||null===(o=Pn.field)||void 0===o?void 0:o.value):{destination:{lat:0,lng:0,address:""},source:{lat:0,lng:0,address:""}},f=null===g||void 0===g||null===(l=g.selected_fields)||void 0===l?void 0:l.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}));f||((f=null===(a=Z.newStepComponents)||void 0===a||null===(u=a.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===u||null===(r=u.selected_fields)||void 0===r?void 0:r.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})))||(f=null===(s=Z.components)||void 0===s||null===(v=s.find((function(e){var n;return(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)})).length)>0})))||void 0===v||null===(c=v.selected_fields)||void 0===c?void 0:c.find((function(e){var n;return"distance"===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.mapToItem)}))));(m.destination.lat=e.geometry.location.lat,m.destination.lng=e.geometry.location.lng,m.destination.address=e.formatted_address,null!==(i=m.destination)&&void 0!==i&&i.address&&null!==Pn&&void 0!==Pn&&null!==(t=Pn.field.options)&&void 0!==t&&t.compute)?null===(p=(0,Ne.Y)(m.source.address,m.destination.address))||void 0===p||p.subscribe({next:function(e){var n;if((null===e||void 0===e||null===(n=e.routes)||void 0===n?void 0:n.length)>0){var o,l,i,t,d,a=e.routes[0];if((null===a||void 0===a||null===(o=a.legs)||void 0===o?void 0:o.length)>0)m.distance=(null===(l=a.legs[0])||void 0===l||null===(i=l.distance)||void 0===i?void 0:i.value)/1e3,m.duration=null===(t=a.legs[0])||void 0===t||null===(d=t.duration)||void 0===d?void 0:d.value,m.steps=a.legs[0].steps,f&&(f.value=m.distance)}},error:function(e){m.distance=(0,z.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance)}}):null!==(d=m.destination)&&void 0!==d&&d.address&&(m.distance=(0,z.Iw)(m.source.lat,m.source.lng,m.destination.lat,m.destination.lng),m.duration=0,f&&(f.value=m.distance));x(JSON.stringify(m),null===Pn||void 0===Pn?void 0:Pn.index),In({source:!1,destination:!1})},mapkey:null===(Iu=U.misc_info)||void 0===Iu?void 0:Iu.map})))):r.createElement(Me.Z,{key:n,value:null===g||void 0===g?void 0:g.selected_fields[n].value,onLocationChange:function(e){return O(e,n)},mapkey:null===(Nu=U.misc_info)||void 0===Nu?void 0:Nu.map}));if("Map"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(ko=e.options)||void 0===ko||null===(Po=ko.maptype)||void 0===Po?void 0:Po.length)>0)return r.createElement(ye.Z,{enabled:Do,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Du=e.options)||void 0===Du?void 0:Du.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement(Ze.Z,{key:n,value:null===g||void 0===g?void 0:g.selected_fields[n].value,onLocationChange:function(e){return O(e,n)}}));if("Summary"===(null===e||void 0===e?void 0:e.data_type_name)){var Ar={};return Z.components.map((function(e){return e.selected_fields.filter((function(e){return!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible})).map((function(e){var n,o;(0,z.gD)(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"")?Ar[e.field_name]="":Ar[e.field_name]="".concat(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"")}))})),Z.newStepComponents.map((function(e){return e.selected_fields.filter((function(e){return!("Pin"===e.data_type_name||"Lookup"===e.data_type_name||"Record"===e.data_type_name||"Ratings"===e.data_type_name||"People"===e.data_type_name||"Positions"===e.data_type_name||"Notes"===e.data_type_name||"URL"===e.data_type_name)&&1==e.visible})).map((function(e){var n,o;(0,z.gD)(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:"")?Ar[e.field_name]="":Ar[e.field_name]="".concat(null!==(o=null===e||void 0===e?void 0:e.value)&&void 0!==o?o:"")}))})),r.createElement(ye.Z,{enabled:Do,width:"100%",editMode:te,style:{border:"0"},key:n,fieldLabel:e.field_name,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{key:n,style:{marginTop:"30px",width:"100%"}},r.createElement(S.default,{modern:!0,columns:Object.keys(Ar),list:[Ar]})))}return"Currency"===(null===e||void 0===e?void 0:e.data_type_name)&&null!==e&&void 0!==e&&null!==(Io=e.options)&&void 0!==Io&&Io.currency_type?r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},style:{border:"1px solid var(--app-color-gray-lighter)"},enabled:Do,width:"100%",editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Tu=e.options)||void 0===Tu?void 0:Tu.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"inherit",display:"flex"}},r.createElement("div",{onClick:function(){return Xe(!Ve)},className:me.currencySymbol},null!==e&&void 0!==e&&null!==(Lu=e.options)&&void 0!==Lu&&Lu.symbol?null===e||void 0===e||null===(zu=e.options)||void 0===zu?void 0:zu.symbol:""," "),Ve&&r.createElement(h.Ld,{items:z.s3,defaultSelectedItem:{label:null===e||void 0===e||null===(Au=e.options)||void 0===Au?void 0:Au.currency_type,value:null===e||void 0===e||null===(Ou=e.options)||void 0===Ou?void 0:Ou.country_code},triggerType:"chevron",className:me.currencySelectComponent,inputClassName:me.currencySearchInput,inputContainerClassName:me.currencyInputContainerClassName,clearControlsClassName:me.currencyClearControlsClassName,molclassname:me.currencySelectMenuOverlayList,moliclassname:me.currencySelectMenuOverlayListItem,onChange:function(e){Z.currency=e.value,L(e,n),Xe(!1)}}),!Ve&&r.createElement("input",{type:"number",autoComplete:"off",value:null!==(Uu=g.selected_fields[n].value)&&void 0!==Uu?Uu:0,className:me.currencyInput,onChange:function(e){x(e.target.value,n)}}))):r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:Do,width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:te,showWidth:function(n){e.field_options=(0,a.Z)((0,a.Z)({},e.field_options),{},{width:"".concat(n,"px")})},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(Ru=e.options)||void 0===Ru?void 0:Ru.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors,customIconBgColor:"white"},"file"===e.data_type?r.createElement(Je,{notes:null===e||void 0===e||null===(Bu=e.options)||void 0===Bu?void 0:Bu.notes,field_id:e.id,value:null===e||void 0===e?void 0:e.value,isInherited:P,checkIfAreMandatoryErrored:D,options:null===e||void 0===e?void 0:e.options,index:n,indexInContextArray:E}):"date"===e.data_type||null!==e&&void 0!==e&&null!==(Fu=e.options)&&void 0!==Fu&&Fu.country_code||null!==e&&void 0!==e&&null!==(Wu=e.options)&&void 0!==Wu&&Wu.currency_type||"Number"===e.data_type_name?r.createElement("div",{style:{width:"inherit"}},"date"===e.data_type?"Range"===(null===e||void 0===e||null===(qu=e.options)||void 0===qu?void 0:qu.type)?r.createElement(h.$m,{inputContainerClassName:me.inputContainerClassName,dateChangeHandler:function(e){return function(e,n){an(e),x(e,n)}(e,n)},startDate:rn,endDate:sn}):r.createElement(h.X9,{toggleDP:function(e){return Ln(!0===e?"240px":"50px")},value:void 0==e.value?"":ae()(new Date(e.value)).format("Do MMMM YYYY"),dateChangeHandler:function(e){return vo(e,n)},selected:new Date(ae()(en,"YYYY-MM-DD")),iconClassName:me.calendar,inputContainerClassName:me.singleInputContainer,inputStyle:{textAlign:"left",border:"none",height:"auto",fontSize:"16px"},hasCalendarIcon:!0}):null!==e&&void 0!==e&&null!==(Yu=e.options)&&void 0!==Yu&&Yu.country_code?r.createElement("div",{style:{padding:"10px"}},r.createElement(we(),{specialLabel:"",value:g.selected_fields[n].value,country:null===e||void 0===e||null===(Hu=e.options)||void 0===Hu?void 0:Hu.country_code,onChange:function(e,o,l){T(o,n,l.target.value)},inputClass:me.phoneIInput,inputProps:{style:{border:"0"}}})):r.createElement("input",{onBlur:function(o){return je(e.data_type_name,o.target.value,E,n,Z)},type:e.data_type,onChange:function(e){x(e.target.value,n)},autoComplete:"none",value:g.selected_fields[n].value?g.selected_fields[n].value:""===He(null===e||void 0===e?void 0:e.options)?"":He(null===e||void 0===e?void 0:e.options),placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",className:me.fieldTypeInput,style:{border:"0"},name:e.field_name,disabled:null!==(ju=g.selected_fields[n].disabled)&&void 0!==ju&&ju})):"Long Text"===e.data_type_name?r.createElement("textarea",{className:me.fieldTypeTextarea,onBlur:function(o){return je(e.data_type_name,o.target.value,E,n,Z)},type:e.data_type,value:g.selected_fields[n].value?g.selected_fields[n].value:""===He(null===e||void 0===e?void 0:e.options)?"":He(null===e||void 0===e?void 0:e.options),onFocus:function(){},disabled:null!==(Gu=g.selected_fields[n].disabled)&&void 0!==Gu&&Gu,autoComplete:"none",onChange:function(e){x(e.target.value,n)},placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",name:e.field_name,style:{border:"0"}}):r.createElement("input",{onBlur:function(o){return je(e.data_type_name,o.target.value,E,n,Z)},type:e.data_type,onChange:function(e){x(e.target.value,n)},autoComplete:"none",value:g.selected_fields[n].value?g.selected_fields[n].value:""===He(null===e||void 0===e?void 0:e.options)?"":He(null===e||void 0===e?void 0:e.options),placeholder:"Number"===g.selected_fields[n].data_type_name?"0":"",className:me.fieldTypeInput,name:e.field_name,disabled:null!==(Ju=g.selected_fields[n].disabled)&&void 0!==Ju&&Ju,style:{border:"0"}}))}return r.createElement(ye.Z,{enabled:Do,width:"100%",editMode:te,style:{},key:n,fieldLabel:e.field_name,notes:null===e||void 0===e||null===(wd=e.options)||void 0===wd?void 0:wd.notes,fieldIcon:e.icon,isProcess:!0,visible:e.visible,mandatory:e.mandatory,error:e.errors},r.createElement("div",{style:{width:"100%",height:"auto",border:"1px solid var(--app-color-gray-light)"}},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:5,customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch",padding:"5px",border:"0px solid var(--app-color-gray-lighter)"}},r.createElement(ve.G,{icon:se.WRo,style:{marginLeft:"10px",width:"20px",height:"20px"}}),r.createElement("input",{disabled:!0,value:e.value?ae()(e.value).format("DD MMMM YYYY HH:mm"):"",type:"text",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",lineHeight:"20px",color:"#4A4A4A",textAlign:"left",width:"80%",border:"0px"},onChange:function(e){}})),className:me.singleInputContainer,selected:null!==e&&void 0!==e&&e.value?new Date(ae()(null===e||void 0===e?void 0:e.value)):(0,de.now)(),onChange:function(e){e>(0,de.now)()&&vo(e,n)}})))}})));return r.createElement("div",{id:g.name,className:me.emulatedFlexGap,style:{width:"100%",position:"relative",marginBottom:Tn}},go,(null===Fn||void 0===Fn||null===(p=Fn.candidates)||void 0===p?void 0:p.length)>0&&r.createElement(ye.Z,{width:"80%",fieldLabel:"Response",visible:!0},r.createElement("textarea",{className:me.fullLengthTextarea,type:"text",onFocus:function(){},disabled:!0,value:null===Fn||void 0===Fn||null===(f=Fn.candidates[0])||void 0===f||null===(_=f.content.parts[0])||void 0===_?void 0:_.text})))})),Je=function(e){e.notes;var n,o=e.options,l=e.field_id,i=e.index,t=e.indexInContextArray,a=e.value,s=e.checkIfAreMandatoryErrored,v=(0,r.useState)(),c=(0,u.Z)(v,2),p=c[0],f=c[1],_=(0,r.useState)(!1),h=(0,u.Z)(_,2),b=h[0],x=h[1],E=(0,m.pQ)(),C=(0,u.Z)(E,2),w=C[0],M=C[1];return r.createElement("div",{style:{width:"inherit",flexDirection:"column",fontSize:"12px"}},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flex:"1 1",overflow:"hidden",fontSize:"14px"}},r.createElement("u",{onClick:function(){var e;null===(e=document.getElementById("file-change-".concat(l)))||void 0===e||e.click()},style:{cursor:"pointer",marginLeft:"2px",wordWrap:"break-word"}},null!==p&&void 0!==p&&p.name||a?"File":"Click to upload file..."),r.createElement("input",{accept:"."+(null===o||void 0===o||null===(n=o.accepted_mimes)||void 0===n?void 0:n.replace(/,/g,",.")),type:"file",onChange:function(){return function(e){var n,o,a=document.getElementById("file-change-".concat(l)).files[0],u=((null===a||void 0===a?void 0:a.size)/1024/1024).toFixed(4),r=(e/1024).toFixed(4);x(!0);var v=(0,d.Z)(null!==(n=null===(o=w.currentStep)||void 0===o?void 0:o.component_blueprints)&&void 0!==n?n:[]);u>r?alert("File is too big!"):(0,g.kf)(a,l).subscribe({next:function(e){f(a),x(!1),v[t].selected_fields[i].value=null===e||void 0===e?void 0:e.file_url,v[t].selected_fields[i].value&&v[t].selected_fields[i].mandatory&&(v[t].selected_fields[i].errors=""),s(),M({action:m._U.setComponentBlueprints,value:v}),M({action:m._U.setModuleNewStepComponents,value:v})}})}(null===o||void 0===o?void 0:o.max_file_size)},style:{position:"absolute",visibility:"hidden",width:"0px"},id:"file-change-".concat(l),className:me.fieldTypeInput}),b&&r.createElement(Se.Z,{type:y.G6?"Watch":"Puff",color:"#4A4A4A",secondaryColor:"gray",radius:22,height:22,width:"22px"}),(null===p||void 0===p?void 0:p.type)&&r.createElement(Ve,{fileType:null===p||void 0===p?void 0:p.type})))},Ve=function(e){return"application/pdf"===(null===e||void 0===e?void 0:e.fileType)?r.createElement("img",{alt:"",src:C.edG}):r.createElement("img",{alt:"",src:C.dm0})},Qe=(0,r.memo)((function(e){var n=e.children,o=e.nav,l=e.openNav,i=e.title;return r.createElement(h.U7,{onClose:l,blured:!1,scrollable:!0,isOpen:o,shadowedContainerStyle:{width:"100%",minWidth:"50%",minHeight:"400px"},shadowedContainerClassname:me.popup},r.createElement("div",{style:{width:"inherit",height:"inherit"},onClick:l},i.length>0&&r.createElement("div",{className:me.actionsContainer},r.createElement("p",{className:me.infoTitle},i)),n))})),Xe=function(e){var n,o,l=e.component,i=e.blueprintIndex,t=e.setSelectedComponent,d=e.selectedComponent,a=e.companyData,s=e.components,v=e.allComponents,c=e.companyUsersArray,p=e.user,f=e.status,_=(0,m.pQ)(),h=(0,u.Z)(_,1)[0],g=(0,r.useState)(me.active),b=(0,u.Z)(g,1)[0],x=(0,r.useState)(""),E=(0,u.Z)(x,1)[0],C=null===(n=h.currentStep)||void 0===n?void 0:n.component_blueprints.findIndex((function(e){return e.id===l.id})),w=l.selected_fields.filter((function(e){return"Pin"===e.data_type_name||"Map"===e.data_type_name})).length>0,M=null===d||void 0===d||null===(o=d.component_fields)||void 0===o?void 0:o.find((function(e){return"Action Button"===e.data_type_name}));return r.createElement("div",{id:"accordion",key:i,className:xe()(me.accordionContainer,b),"app-variant-has-error":E?"error":"",style:y.tq?w?{padding:"0",border:"0"}:{border:"0"}:{}},!(w&&y.tq)&&r.createElement("p",{className:me.cardTitle,style:{fontSize:"16px"}},l.name,":"),r.createElement($e,{components:s,allComponents:v,component:l,handleInputChange:function(){},handlePrefixChange:function(){},handleCurrencyChange:function(){},checkIfAreMandatoryErrored:!1,handleCheckbox:function(){},isInherited:!1,indexInContextArray:C,handleLocationChange:function(){},processTaskContext:h,companyData:a,companyUsersArray:c,selectedComponent:d,setSelectedComponent:t,hasAction:M,user:p,status:f}))},$e=(0,r.memo)((function(e){var n,o,l=e.component,i=e.components,d=e.companyData,c=e.allComponents,p=e.companyUsersArray,m=e.setSelectedComponent,f=e.selectedComponent,_=e.hasAction,b=e.user,x=e.status,E=(0,s.v9)((function(e){return e.flowReducer})),C=E.allTasks,w=(0,r.useState)(!1),M=(0,u.Z)(w,2),Z=M[0],k=M[1],P=(0,r.useState)(0),I=(0,u.Z)(P,2),N=I[0],D=I[1],T=(0,r.useState)(!1),L=(0,u.Z)(T,2),z=L[0],A=L[1],O=(null===l||void 0===l||null===(n=l.selected_fields)||void 0===n?void 0:n.length)>0&&(null===l||void 0===l||null===(o=l.selected_fields)||void 0===o?void 0:o.filter((function(e){return!0!==e.value||void 0!==(null===e||void 0===e?void 0:e.value)})).map((function(e,n){var o,u,s,E;if((null===e||void 0===e||null===(o=e.options)||void 0===o||null===(u=o.list)||void 0===u?void 0:u.length)>0&&(null===e||void 0===e||null===(s=e.options)||void 0===s||null===(E=s.component_id)||void 0===E?void 0:E.length)>0&&("Step List"===(null===e||void 0===e?void 0:e.data_type_name)||"Component List"===(null===e||void 0===e?void 0:e.data_type_name)))return r.createElement("div",{key:n,style:{width:"100%"}},r.createElement(S.default,{modern:!0,columns:e.options.list,list:(V=e.options,i.filter((function(e){return e.id===V.component_id})).map((function(e){var n={};return V.list.map((function(o){n=(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},o,e.selected_fields.find((function(e){return e.field_name===o})).value))})),n})))}));if("output"===e.data_type&&"Formula"!==e.data_type_name&&"Record"!==e.data_type_name&&"Filters"!==e.data_type_name)return null;if("Info"===e.data_type_name)return null;if("URL"===e.data_type_name)return null;if("Map"===e.data_type_name)return null;if("Lookup"===e.data_type_name)return null;if("Rewards"===e.data_type_name)return null;if("Summary"===e.data_type_name)return null;if("Ratings"===e.data_type_name)return null;if("ID"===e.data_type_name){var w,M,P=null!==(w=null===U||void 0===U?void 0:te.Z(null===U||void 0===U?void 0:K.Z("field_name",e.field_name))(l.values))&&void 0!==w?w:null;return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",null,null===P||null===P.value?"":null===P||void 0===P||null===(M=P.value)||void 0===M?void 0:M.split(",")[0])),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}var I,T,L,O,R,B,F,W,q,Y,H,j,G,J,V,Q=null!==(I=null===U||void 0===U?void 0:te.Z(null===U||void 0===U?void 0:K.Z("field_name",null===e||void 0===e?void 0:e.field_name))(null!==(T=null===f||void 0===f?void 0:f.component_fields)&&void 0!==T?T:[]))&&void 0!==I?I:{},X=null===(L=Q)||void 0===L?void 0:L.value,$=null===l||void 0===l||null===(O=l.selected_fields)||void 0===O?void 0:O.find((function(e){return"Info"===e.data_type_name}));if($){var ee,ne,oe=c.find((function(e){return(null===e||void 0===e?void 0:e.component_fields.filter((function(e){return e.component_blueprint_id===$.options.component_id&&e.value===X})).length)>0}));if(oe)return null===$||void 0===$||null===(ee=$.options)||void 0===ee||null===(ne=ee.list)||void 0===ne?void 0:ne.map((function(e,n){var o,l,i=null!==(o=null===(l=oe.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==o?o:"";return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e,":"),r.createElement("div",null,i)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}))}if("Pin"===e.data_type_name&&(null!==e&&void 0!==e&&e.value||X)){var le,ie,ue,re,se,ve,ce,pe,fe,_e,he,ge,be,xe,Ee,Ce=JSON.parse(null!==(le=null===e||void 0===e?void 0:e.value)&&void 0!==le?le:X),we=null===f||void 0===f||null===(ie=f.component_fields)||void 0===ie||null===(ue=ie.find((function(e){return"Status"===e.data_type_name})))||void 0===ue?void 0:ue.value;if(void 0===Q)Q=null===(Ee=f.component_fields)||void 0===Ee?void 0:Ee.find((function(e){return"Pin"===e.data_type_name}));return r.createElement("div",{key:n,style:{display:"",width:"100%"}},r.createElement(Ne.Z,{mapkey:null===(re=d.misc_info)||void 0===re?void 0:re.map,pins:(null!==Ce&&void 0!==Ce&&Ce.destination?[(0,a.Z)((0,a.Z)({},Ce.destination),{},{type:"destination"}),(0,a.Z)((0,a.Z)({},Ce.source),{},{type:"source"})]:[(0,a.Z)((0,a.Z)({},Ce.source),{},{type:"source"})]).concat(null!==Ce&&void 0!==Ce&&Ce.realtime?[(0,a.Z)((0,a.Z)({},Ce.realtime),{},{type:"realtime"})]:[])}),r.createElement("div",{key:n,className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},(null===Ce||void 0===Ce||null===(se=Ce.destination)||void 0===se?void 0:se.address)&&r.createElement("div",{style:{width:"50px",textAlign:"left"}},"From:"),!(null!==Ce&&void 0!==Ce&&null!==(ve=Ce.destination)&&void 0!==ve&&ve.address)&&r.createElement("div",{style:{textAlign:"left"}},e.field_name,":"),r.createElement("div",{style:{width:"80%",textAlign:"left"}},Ce.source.address)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===Ce||void 0===Ce||null===(ce=Ce.destination)||void 0===ce?void 0:ce.address)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{width:"50px",textAlign:"left"}},"To",":"),r.createElement("div",{style:{width:"80%",textAlign:"left"}},null===Ce||void 0===Ce||null===(pe=Ce.destination)||void 0===pe?void 0:pe.address))),r.createElement(h.zx,{light:!0,title:0!=N?"Stop Location Updates":null!==e&&void 0!==e&&null!==(fe=e.options)&&void 0!==fe&&fe.realtime?"Send Location Updates":"Update Location",clicked:function(){0===N?navigator.geolocation.getCurrentPosition((function(n){var o,l,i,t;Ce&&(Ce.realtime={lat:n.coords.latitude,lng:n.coords.longitude,id:"10"},e.value=JSON.stringify(Ce),1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.realtime)?D(setInterval((function(){k(!0),(0,g.po)({component_id:f.id,index:e.index,value:JSON.stringify(Ce),group:e.group,component_field_id:Q.id}).subscribe({next:function(e){k(!1)},error:function(){return k(!1)},complete:function(){}})}),+(null!==(l=null===(i=Q)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.interval)&&void 0!==l?l:6e4))):(k(!0),(0,g.po)({component_id:f.id,index:Q.index,value:JSON.stringify(Ce),group:Q.group,component_field_id:Q.id}).subscribe({next:function(e){k(!1)},error:function(){return k(!1)},complete:function(){}})))})):(window.clearInterval(N),D(0))},loading:Z,style:{width:"100%",display:"Closed"===(null===f||void 0===f?void 0:f.sttaus)||"New"===(null===f||void 0===f?void 0:f.sttaus)||(null===f||void 0===f?void 0:f.status)===(null===d||void 0===d||null===(_e=d.misc_info)||void 0===_e?void 0:_e.lock)||"Closed"===we||"New"===we||we===(null===d||void 0===d||null===(he=d.misc_info)||void 0===he?void 0:he.lock)||"Cancelled"===we?"none":_&&"user"===_.options.action&&(null===_||void 0===_?void 0:_.value)===(null===b||void 0===b?void 0:b.id)?"":"none"}}),r.createElement(h.zx,{light:!0,title:"Refresh location",clicked:function(){k(!0),(0,g.r6)(f.id).pipe((0,v.P)()).subscribe({next:function(e){m(e),k(!1)},error:function(){return k(!1)}})},loading:Z,style:{width:"100%",display:"Closed"===(null===f||void 0===f?void 0:f.sttaus)||"New"===(null===f||void 0===f?void 0:f.sttaus)||(null===f||void 0===f?void 0:f.status)===(null===d||void 0===d||null===(ge=d.misc_info)||void 0===ge?void 0:ge.lock)||"Closed"===we||"New"===we||we===(null===d||void 0===d||null===(be=d.misc_info)||void 0===be?void 0:be.lock)||"Cancelled"===we?"none":_&&"user"===_.options.action&&null!==_&&void 0!==_&&_.value&&(null===f||void 0===f||null===(xe=f.created_by)||void 0===xe?void 0:xe.id)===(null===b||void 0===b?void 0:b.id)?"":"none"}}))}if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)&&(null===e||void 0===e||null===(R=e.options)||void 0===R||null===(B=R.action)||void 0===B?void 0:B.length)>0)return null!==e&&void 0!==e&&e.value||X?r.createElement(ye.Z,{width:"100%",key:n,style:{flexDirection:"column",border:"0"},isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors},r.createElement("div",{className:me.centeredDiv,style:{width:"inherit",fontSize:"14px",fontWeight:"normal"}},r.createElement("p",{style:{width:"inherit",fontSize:"12px",fontWeight:"bold"}},null!==e&&void 0!==e&&e.value||X?null!==(Y=e.options)&&void 0!==Y&&Y.notes?null===(H=e.options)||void 0===H?void 0:H.notes:"".concat(e.field_name,":"):"user"===e.options.action?"Not yet assigned":"No status"),"user"===e.options.action&&(null===p||void 0===p?void 0:p.length)>0&&(null===p||void 0===p?void 0:p.filter((function(n){return n.id===(X||(null===e||void 0===e?void 0:e.value))})).map((function(e,n){var o,l,i,t,d,a;return r.createElement("div",{key:n,className:me.filtersContainer,style:{fontSize:"12px"}},r.createElement(Ie.Z,{ratings:(null===e||void 0===e||null===(o=e.ratings)||void 0===o?void 0:o.length)>0?null===e||void 0===e||null===(l=e.ratings)||void 0===l?void 0:l.map((function(e){return+e.ratings})):[],simple:!0,photo:e.photo,firstName:null===e||void 0===e?void 0:e.first_name,lastName:null===e||void 0===e?void 0:e.last_name,email:null===e||void 0===e||null===(i=e.positions)||void 0===i||null===(t=i.slice(0,1))||void 0===t?void 0:t.map((function(e){return e.name})),position:"",cardClicked:function(){return A(!z)},width:"100%"}),z&&r.createElement("div",{style:{padding:"10px"}},r.createElement("h3",null,"User Feedback:"),(null===e||void 0===e||null===(d=e.ratings)||void 0===d?void 0:d.length)>0?null===e||void 0===e||null===(a=e.ratings)||void 0===a?void 0:a.map((function(e,n){return r.createElement("div",{className:me.actionsContainer,key:n,style:{fontSize:"12px",marginBottom:"10px"}},r.createElement("div",{style:{width:"60%",textAlign:"left"}},'"'.concat(e.comments,'"')))})):null))}))))):null;if("Link"===e.data_type_name){var Me,Ze="".concat(X||(null===e||void 0===e?void 0:e.value));return r.createElement(ye.Z,{width:y.tq?"100%":"50%",style:{border:"0"},key:n,fieldIcon:e.icon,isProcess:!0,visible:void 0!==(null===e||void 0===e?void 0:e.value)||e.visible,mandatory:!1,error:e.errors,customIconBgColor:"white"},null!==Ze&&void 0!==Ze&&Ze.includes("jpg")||null!==Ze&&void 0!==Ze&&Ze.includes("jpeg")||null!==e&&void 0!==e&&null!==(Me=e.options)&&void 0!==Me&&Me.image||null!==Ze&&void 0!==Ze&&Ze.includes("png")?r.createElement("div",{className:me.accordionContainer,onClick:function(){return window.open(Ze,"_blank")}},r.createElement("img",{alt:"lg",src:Ze,style:{width:"100%",height:"100%",cursor:"pointer"}})):null!==Ze&&void 0!==Ze&&Ze.includes("pdf")?r.createElement("div",{className:me.accordionContainer,onClick:function(){return window.open(Ze,"_blank")}},r.createElement("embed",{onClick:function(){return window.open(Ze,"_blank")},src:"".concat(Ze,"#toolbar=0&navpanes=0&scrollbar=0"),width:"400px",height:"500px"})):r.createElement("div",{style:{width:"inherit",textDecoration:"underline",textAlign:"center",cursor:"pointer"},onClick:function(){return window.open(X,"_blank")}},"Link"))}if("Checkbox"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.options.value,":"),r.createElement("div",null,void 0===X?!0===(null===e||void 0===e?void 0:e.value)?"Yes":"No":1==X?"Yes":"No")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Status"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Status",":"),r.createElement("div",null,null!==(j=null===f||void 0===f?void 0:f.status)&&void 0!==j?j:X)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Upload"===e.data_type_name)return r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),(X||(null===e||void 0===e?void 0:e.value))&&r.createElement("a",{style:{fontFamily:"var(--app-text-main-font)"},key:n,href:X||(null===e||void 0===e?void 0:e.value),download:"Example-PDF-document",target:"_blank",rel:"noreferrer"},"Download File")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}));if("Tiles"===(null===e||void 0===e||null===(F=e.options)||void 0===F?void 0:F.selection)){var Se,ke,Pe=c.find((function(n){return(null===n||void 0===n?void 0:n.component_fields.filter((function(n){return n.component_blueprint_id===e.options.component_id&&n.value===X})).length)>0}));if(Pe)return r.createElement("div",{key:n,className:me.filtersContainer,style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%",display:null!==e&&void 0!==e&&e.visible?"":"none"}},null===e||void 0===e||null===(Se=e.options)||void 0===Se||null===(ke=Se.names)||void 0===ke?void 0:ke.map((function(e,n){var o,l,i,t,d=null!==(o=null===(l=Pe.component_fields.find((function(n){return n.field_name===e})))||void 0===l?void 0:l.value)&&void 0!==o?o:"";return null!==d&&void 0!==d&&d.includes("jpg")||null!==d&&void 0!==d&&d.includes("jpeg")||null!==d&&void 0!==d&&d.includes("png")?r.createElement("div",{key:n,style:{width:"inherit",display:"flex",justifyContent:"right",marginBottom:"20px"}},r.createElement("img",{alt:"lg",src:d,style:{objectFit:"contain",width:"40px",height:"30px",cursor:"pointer"}})):r.createElement("div",{key:n},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",{style:{width:"20%",textAlign:"left"}},e,":"),r.createElement("div",{style:{width:"80%",textAlign:"right"}},null!==(i=null===(t=Pe.component_fields.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:"")),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})))}if("People"===e.data_type_name)if(e.options.calendar){var De,Te,Le=JSON.parse(null!==(De=X)&&void 0!==De?De:null!==(Te=null===e||void 0===e?void 0:e.value)&&void 0!==Te?Te:JSON.stringify({})),ze=p.find((function(e){return e.id===Le.user}));if(X=ze?"".concat(ze.first_name," ").concat(ze.last_name):"",null!==Le&&void 0!==Le&&Le.task){var Oe,Ue=C.find((function(e){return e.id===Le.task}));return r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&X?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement("div",null,X),Ue&&"Closed"!==f.status&&r.createElement("div",null,null===Ue||void 0===Ue?void 0:Ue.name),Ue&&"Closed"!==f.status&&r.createElement("div",null,ae()(new Date(null===Ue||void 0===Ue||null===(Oe=Ue.add_info)||void 0===Oe?void 0:Oe.start)).format("DD MMM YYYY h:mm a")),(null===Ue||void 0===Ue?void 0:Ue.status)&&"Closed"!==f.status&&r.createElement("div",null,null===Ue||void 0===Ue?void 0:Ue.status))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))}}else{var Re=p.find((function(n){var o;return n.id===(null!==(o=X)&&void 0!==o?o:e.value)}));X=Re?"".concat(Re.first_name," ").concat(Re.last_name):""}return"Video"===e.data_type_name&&x===(null!==(W=null===e||void 0===e||null===(q=e.options)||void 0===q?void 0:q.status)&&void 0!==W?W:"New")&&null!==e&&void 0!==e&&e.value&&ae()(null===e||void 0===e?void 0:e.value)<=(0,de.now)()&&(0,de.now)()<ae()(null===e||void 0===e?void 0:e.value).add("minutes",+(null!==(G=null===e||void 0===e||null===(J=e.options)||void 0===J?void 0:J.expiry)&&void 0!==G?G:30))?r.createElement("div",{key:n,style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",{style:{width:"100%",fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.createElement(Ae.Z,{payload:{name:null===f||void 0===f?void 0:f.id}}))):r.createElement("div",{key:n,style:{margin:"10px 0 10px 0",display:e.visible&&X?"":"none"}},r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,e.field_name,":"),r.createElement("div",null,null===X||void 0===X?null!==e&&void 0!==e&&e.value?"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===ae()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a")?"":ae()(new Date(null===e||void 0===e?void 0:e.value)).format("DD MMM YYYY h:mm a"):null===e||void 0===e?void 0:e.value:"":"Date"===e.data_type_name||"Video"===e.data_type_name?"Invalid date"===ae()(new Date(X)).format("DD MMM YYYY h:mm a")?"":ae()(new Date(X)).format("DD MMM YYYY h:mm a"):X)),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}))})));return r.createElement("div",{style:{width:"100%",display:Z?"none":""}},O)})),Ke=function(e){var n,o,l,i=e.component,t=(0,s.v9)((function(e){return e.flowReducer})),d=t.companyUsersArray.find((function(e){var n;return e.id===(null===(n=i.created_by)||void 0===n?void 0:n.id)}));return r.createElement("div",{className:me.centeredDiv,style:{width:"inherit",fontSize:"14px",marginTop:"20px"}},r.createElement("div",{style:{fontFamily:"var(--app-text-main-font)",fontWeight:"bold",color:"var(--app-color-gray-dark)",paddingLeft:"5px"}},"Created by"),r.createElement("div",{className:me.filtersContainer},r.createElement(Ie.Z,{title:"Created by:",simple:!0,photo:null!==(n=null===d||void 0===d?void 0:d.photo)&&void 0!==n?n:"https://s3-symbol-logo.tradingview.com/logo-yazilim--600.png",email:"Transaction Date: ".concat(ae()(new Date(i.created_date)).format("DD MMM YYYY")),position:"Time: ".concat(ae()(new Date(i.created_date)).format("h:mm a")),firstName:null===(o=i.created_by)||void 0===o?void 0:o.first_name,lastName:null===(l=i.created_by)||void 0===l?void 0:l.last_name,cardClicked:function(){},width:"100%"})))},en=function(e){var n,o,l,i,t,d,a,u,v,c,p,m,f,_,h=e.component,y=(0,s.v9)((function(e){return e.flowReducer})),g=y.companyData,b=(0,s.v9)((function(e){return e.authReducer})),x=b.authenticatedUser,E=h.component_fields.find((function(e){var n;return"Payments"===e.data_type_name&&("Done"===h.status||"Closed"===h.status)&&(null===(n=h.created_by)||void 0===n?void 0:n.id)===(null===x||void 0===x?void 0:x.id)})),C=h.component_fields.find((function(e){var n;return e.field_name===(null===E||void 0===E||null===(n=E.options)||void 0===n?void 0:n.paymentField)}));return r.createElement("div",{className:me.filtersContainer,style:{display:E?"":"none"}},null!==h&&void 0!==h&&h.payments?r.createElement("div",null,r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",null,"".concat(null===(n=h.payments)||void 0===n?void 0:n.stripe_product,", ID: ").concat(null===(o=h.payments)||void 0===o?void 0:o.stripe_id.substring(0,5)))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Amount Paid",":"),r.createElement("div",null,"".concat((+(null!==(l=null===(i=h.payments)||void 0===i?void 0:i.stripe_price)&&void 0!==l?l:0)).toFixed(2)))),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}}),(null===(t=h.assigned_to)||void 0===t?void 0:t.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Transaction Fees",":"),r.createElement("div",null,"".concat((+(null===(d=h.payments)||void 0===d?void 0:d.stripe_price)*(null!==(a=null===g||void 0===g||null===(u=g.misc_info)||void 0===u?void 0:u.rate)&&void 0!==a?a:.2)).toFixed(2))))):r.createElement("div",null,"Cash"===(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",null,"Cash")),"Cash"===(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Cash Paid",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)).toFixed(2)))),"Cash"===(null===E||void 0===E?void 0:E.value)&&(null===(v=h.assigned_to)||void 0===v?void 0:v.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Deducted from wallet",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)+ +(null===C||void 0===C?void 0:C.value)*(null!==(c=null===g||void 0===g||null===(p=g.misc_info)||void 0===p?void 0:p.rate)&&void 0!==c?c:.2)).toFixed(2)))),"Cash"===(null===E||void 0===E?void 0:E.value)&&(null===(m=h.assigned_to)||void 0===m?void 0:m.id)===(null===x||void 0===x?void 0:x.id)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px"}},r.createElement("div",null,"Total Fees",":"),r.createElement("div",null,"".concat((+(null===C||void 0===C?void 0:C.value)*(null!==(f=null===g||void 0===g||null===(_=g.misc_info)||void 0===_?void 0:_.rate)&&void 0!==f?f:.2)).toFixed(2)))),"Cash"!==(null===E||void 0===E?void 0:E.value)&&r.createElement("div",{className:me.actionsContainer,style:{fontSize:"12px",fontWeight:"bold"}},r.createElement("div",null,"Payments:",":"),r.createElement("div",{style:{color:"red"}},"Pending"))))},nn=function(e){var n=f.h.getState().flowReducer.companyUsersArray,o=e.isEdit,l=e.modalVisible,i=e.heading,t=e.onClose,d=e.isProcess,a=e.setIsProcessBegin,s=e.task,c=e.priority,p=void 0===c||c,m=e.shadowedContainerStyle,y=e.statuses,g=e.start_date,b=e.span,x=e.labels,E=void 0===x?{}:x,C=e.onUpdate,w=void 0===C?function(){}:C,M=e.save,Z=void 0===M||M,S=(0,r.useState)(E),k=(0,u.Z)(S,1)[0],P=(0,r.useState)(d),I=(0,u.Z)(P,1)[0],N=(0,r.useState)(i),D=(0,u.Z)(N,1)[0];return(0,r.useEffect)((function(){var e=[];if(s){var o,l;if(!n.find((function(e){var n;return e.id===(null===s||void 0===s||null===(n=s.creator)||void 0===n?void 0:n.id)})))e=e.concat(null===(o=s.creator)||void 0===o?void 0:o.id);if(!n.find((function(e){var n;return e.id===(null===s||void 0===s||null===(n=s.assignee)||void 0===n?void 0:n.id)})))e=e.concat(null===(l=s.assignee)||void 0===l?void 0:l.id);e.length>0&&(0,Ee.VG)(e).pipe((0,v.P)()).subscribe({next:function(e){f.h.dispatch((0,_.NY)(n.concat(e)))}})}}),[]),r.createElement("div",null,r.createElement(h.U7,{scrollable:!0,shadowedContainerStyle:m||{width:"100%",minHeight:"100vh"},isOpen:l,onClose:function(){},blured:!1},r.createElement("div",null,r.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"20px",fontWeight:"bold",color:"#4A4A4A",marginTop:"50px",marginBottom:"20px",textAlign:"center"}},null!==s&&void 0!==s&&s.completed_at?"Completed Task":D),r.createElement(on,{labels:k,showPriority:p,statuses:y,task:s,setIsProcessBegin:a,setDisplayModal:t,isProcess:I,isEdit:o,onClose:function(){return t()},start_date:g,span:b,onUpdate:w,save:Z}))))};function on(e){var n,o,l,i,t,s,v,c,p,m,_,y,g,b,x,E,C,w,M,Z,S,k,I,N,T,A,O,U,R,B,F,W,q,Y,H,j,G,J,V,Q,X,$,K,ee,ne,oe,le,ie=f.h.getState().flowReducer,te=ie.selectedProcess,de=ie.companyUsersArray,ue=ie.begunModule,re=ie.companyData,ce=f.h.getState().sessionReducer.user,pe=e.isProcess,fe=e.statuses,_e=e.task,ge=e.isEdit,be=e.assigneeId,xe=e.setDisplayModal,Ee=e.onClose,Ce=e.start_date,we=void 0===Ce?(new Date).setDate((new Date).getDate()):Ce,Me=e.span,Ze=void 0===Me||Me,Se=e.labels,ke=e.onUpdate,Pe=void 0===ke?function(){}:ke,Ie=e.save,Ne=void 0===Ie||Ie,Te=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(n=_e.assignee)&&void 0!==n&&n.id?{assignee_id:null===_e||void 0===_e||null===(o=_e.assignee)||void 0===o?void 0:o.id}:""),Le=(0,u.Z)(Te,2),ze=Le[0],Ae=Le[1],Oe=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(l=_e.process)&&void 0!==l&&l.id?{process:null===_e||void 0===_e||null===(i=_e.process)||void 0===i?void 0:i.id}:""),Ue=(0,u.Z)(Oe,2),Re=(Ue[0],Ue[1]),Be=(0,r.useState)((null===_e||void 0===_e?void 0:_e.name)||""),Fe=(0,u.Z)(Be,2),We=Fe[0],qe=Fe[1],Ye=(0,r.useState)((null===_e||void 0===_e?void 0:_e.status)||""),He=(0,u.Z)(Ye,2),je=He[0],Ge=He[1],Je=(0,r.useState)((null===_e||void 0===_e?void 0:_e.description)||""),Ve=(0,u.Z)(Je,2),Qe=Ve[0],Xe=Ve[1],$e=(0,r.useState)(null!==_e&&void 0!==_e&&_e.due_date?new Date(null===_e||void 0===_e?void 0:_e.due_date):(new Date).setDate((new Date).getDate())+36e5),Ke=(0,u.Z)($e,2),en=Ke[0],nn=(Ke[1],(0,r.useState)(null!==_e&&void 0!==_e&&null!==(t=_e.add_info)&&void 0!==t&&t.start?new Date(null===_e||void 0===_e||null===(s=_e.add_info)||void 0===s?void 0:s.start):we)),on=(0,u.Z)(nn,2),tn=on[0],dn=on[1],an=(0,r.useState)(null!==_e&&void 0!==_e&&null!==(v=_e.add_info)&&void 0!==v&&v.end?new Date(null===_e||void 0===_e||null===(c=_e.add_info)||void 0===c?void 0:c.end):we),un=(0,u.Z)(an,2),rn=un[0],sn=un[1],vn=(0,r.useState)(null===_e||void 0===_e||null===(p=_e.add_info)||void 0===p?void 0:p.value),cn=(0,u.Z)(vn,2),pn=cn[0],mn=cn[1],fn=(0,r.useState)(""),_n=(0,u.Z)(fn,2),hn=_n[0],yn=_n[1],gn=(0,r.useState)(!1),bn=(0,u.Z)(gn,2),xn=bn[0],En=bn[1],Cn=(0,r.useState)(!1),wn=(0,u.Z)(Cn,2),Mn=wn[0],Zn=wn[1],Sn=(0,r.useState)(!1),kn=(0,u.Z)(Sn,2),Pn=kn[0],In=kn[1],Nn=(0,r.useState)(!1),Dn=(0,u.Z)(Nn,2),Tn=Dn[0],Ln=Dn[1],zn=(0,r.useState)(pe),An=(0,u.Z)(zn,2),On=An[0],Un=(An[1],(0,r.useState)((null===_e||void 0===_e||null===(m=_e.add_info)||void 0===m?void 0:m.priority)||"")),Rn=(0,u.Z)(Un,2),Bn=Rn[0],Fn=(Rn[1],(null===de||void 0===de?void 0:de.length)>0?ge&&(null===_e||void 0===_e||null===(_=_e.creator)||void 0===_?void 0:_.id)!==ce.id?[{label:ce.first_name+" "+ce.last_name,value:ce.id}]:(null===Se||void 0===Se||null===(y=Se.aList)||void 0===y?void 0:y.length)>0?de.filter((function(e){var n;return(null===e||void 0===e||null===(n=e.positions)||void 0===n?void 0:n.filter((function(e){var n,o;return null===Se||void 0===Se||null===(n=Se.options)||void 0===n||null===(o=n.aList)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.id)})).length)>0})).map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):de.map((function(e){return{label:e.first_name+" "+e.last_name,value:e.id}})):[]);(0,r.useEffect)((function(){return In(!0),function(){In(!1)}}),[]),(0,r.useEffect)((function(){if(On&&null!==te&&void 0!==te&&te.id&&Pn){Re({procedure_id:te.id}),Xe(te.description)}}),[On,Pn,te.description,te.id]);var Wn=fe?fe.map((function(e){return{label:e,value:e}})):[{label:"Ongoing",value:"Ongoing"},{label:"In Review",value:"In Review"},{label:"Approved",value:"Approved"},{label:"Postponed",value:"Postponed"},{label:"Moved",value:"Moved"},{label:"Cancelled",value:"Cancelled"}];return r.createElement("div",{className:me.newTaskFormHost,style:{padding:"0 20px 0 20px"}},r.createElement(L(),{style:{flex:1}},r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(g=_e.creator)||void 0===g?void 0:g.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(b=null===Se||void 0===Se?void 0:Se.title)&&void 0!==b?b:"Event Name",isProcess:!0,visible:!0,mandatory:!0,error:null===hn||void 0===hn||null===(x=hn.errors)||void 0===x?void 0:x.name},r.createElement("textarea",{className:me.fieldTypeTextarea,type:"text",value:We,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(E=_e.creator)||void 0===E?void 0:E.id)),autoComplete:"none",onChange:function(e){return qe(e.target.value)},placeholder:"",style:{height:"60px",border:"0"}})),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(C=_e.creator)||void 0===C?void 0:C.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!0,fieldLabel:null!==(w=null===Se||void 0===Se?void 0:Se.description)&&void 0!==w?w:"Description",isProcess:!0,visible:(null!==_e&&void 0!==_e&&_e.completed_at,!0),mandatory:!0,error:null===hn||void 0===hn||null===(M=hn.errors)||void 0===M?void 0:M.name},r.createElement("textarea",{className:me.fieldTypeTextarea,style:{border:"0",minHeight:"160px"},readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(Z=_e.creator)||void 0===Z?void 0:Z.id)),required:null===hn||void 0===hn||null===(S=hn.errors)||void 0===S?void 0:S.description,value:Qe,onChange:function(e){return Xe(e.target.value)}})),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(k=_e.creator)||void 0===k?void 0:k.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null===Se||void 0===Se?void 0:Se.valueL,isProcess:!0,visible:!(null===Se||void 0===Se||!Se.valueL),mandatory:!0},r.createElement("div",null,r.createElement("input",{className:me.fieldTypeInput,style:{border:"0"},readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(I=_e.creator)||void 0===I?void 0:I.id)),value:pn,onChange:function(e){return mn(e.target.value)},onBlur:function(){var e,n,o,l,i;null!==ue&&void 0!==ue&&null!==(e=ue.processModule)&&void 0!==e&&null!==(n=e.module)&&void 0!==n&&null!==(o=n.options)&&void 0!==o&&o.credits&&(+pn>+(null===ce||void 0===ce||null===(l=ce.options)||void 0===l?void 0:l.credit)&&(mn("0.00"),yn({errors:{value:"You have insufficient funds in your wallet. You currently have ".concat(null===ce||void 0===ce||null===(i=ce.options)||void 0===i?void 0:i.credit,".")}})))}}),hn&&(null===hn||void 0===hn||null===(N=hn.errors)||void 0===N?void 0:N.value)&&r.createElement(P.Z,{message:hn.errors.value,onClick:function(){return yn("")}}))),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(T=_e.creator)||void 0===T?void 0:T.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(A=null===Se||void 0===Se?void 0:Se.start)&&void 0!==A?A:"Start Date",isProcess:!0,visible:!0,mandatory:!0,error:null===hn||void 0===hn||null===(O=hn.errors)||void 0===O?void 0:O.due_date},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(U=_e.creator)||void 0===U?void 0:U.id)),placeholderText:"Start Date",customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},r.createElement("input",{readOnly:!0,value:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(null!==_e&&void 0!==_e&&_e.completed_at||ce.id!==(null===_e||void 0===_e||null===(R=_e.creator)||void 0===R?void 0:R.id))?"".concat(ae()(tn).format("DD MMMM YYYY HH:mm")):ae()(tn).format("DD MMMM YYYY HH:mm"),type:"text",required:null===hn||void 0===hn||null===(B=hn.errors)||void 0===B?void 0:B.startDate,id:"start-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===tn||void 0===tn?void 0:tn.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Start Date",onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}})),className:me.datePickerWrapper,selected:tn,onChange:function(e){ae()(e).diff(ae()(rn),"minutes")<1?dn(e):(dn(e),sn(e))}})),r.createElement(ye.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"},enabled:void 0===(null===_e||void 0===_e?void 0:_e.id)||(null===_e||void 0===_e||!_e.completed_at)&&ce.id===(null===_e||void 0===_e||null===(F=_e.creator)||void 0===F?void 0:F.id),width:"100%",style:{marginTop:"0px",border:"1px dashed var(--app-color-gray-light)",padding:"5px"},editMode:!1,fieldLabel:null!==(W=null===Se||void 0===Se?void 0:Se.end)&&void 0!==W?W:"End Date",isProcess:!0,visible:!0,mandatory:!0,error:null===hn||void 0===hn||null===(q=hn.errors)||void 0===q?void 0:q.due_date},r.createElement(he(),{showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,readOnly:void 0!==(null===_e||void 0===_e?void 0:_e.id)&&(!(null===_e||void 0===_e||!_e.completed_at)||ce.id!==(null===_e||void 0===_e||null===(Y=_e.creator)||void 0===Y?void 0:Y.id)),placeholderText:"End Date",customInput:r.createElement("div",{id:"custom-input",style:{cursor:"pointer",display:"flex",justifyContent:"center",width:"100%",alignItems:"stretch"}},r.createElement("input",{readOnly:!0,value:ae()(rn).format("DD MMMM YYYY HH:mm"),type:"text",required:null===hn||void 0===hn||null===(H=hn.errors)||void 0===H?void 0:H.endDate,id:"due-date",style:{flex:1,marginTop:"auto",marginBottom:"auto",outline:"none",border:"none",fontFamily:"var(--app-text-main-font)",fontSize:"16px",fontWeight:"bold",lineHeight:"20px",color:"#4A4A4A",textAlign:(null===rn||void 0===rn?void 0:rn.length)>0?"center":"left",maxWidth:"98%"},placeholder:"Due Date",onChange:function(e){}}),r.createElement(ve.G,{icon:se.WRo,style:{width:"20px",height:"20px"}})),className:me.datePickerWrapper,selected:rn,onChange:function(e){ae()(e).diff(ae()(tn),"minutes")>0?!1===Ze?ae()(e).format("DD")===ae()(rn).format("DD")?sn(e):sn(rn):sn(e):sn(rn)}})),r.createElement("div",{style:{marginBottom:"10px"}},r.createElement("label",{style:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"}},null!==(j=null===Se||void 0===Se?void 0:Se.assignee)&&void 0!==j?j:"Assignee",null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("div",null,r.createElement("input",{style:{cursor:"auto"},placeholder:(null===_e||void 0===_e?void 0:_e.assignee.first_name)+" "+(null===_e||void 0===_e?void 0:_e.assignee.last_name),readOnly:!0})):r.createElement(D.ZP,{isSearchable:!1,key:"Assignee",styles:z.X2,defaultInputValue:"",components:{DropdownIndicator:z.ms},placeholder:"",value:Fn[Fn.findIndex((function(e){return e.value===ze.assignee_id}))],options:Fn.concat([{label:"None",value:""}]),onChange:function(e){e&&Ae((function(n){return(0,a.Z)((0,a.Z)({},n),{},{assignee_id:e.value})}))}})),hn&&(null===hn||void 0===hn||null===(G=hn.errors)||void 0===G?void 0:G.assignee_id)&&r.createElement(P.Z,{message:hn.errors.assignee_id})),((null===_e||void 0===_e?void 0:_e.completed_at)||ce.id===(null===_e||void 0===_e||null===(J=_e.creator)||void 0===J?void 0:J.id))&&r.createElement("div",{style:{marginBottom:"10px"}},r.createElement("label",{style:{fontSize:"12px",color:"var(--app-color-gray-dark)",fontWeight:"regular",paddingLeft:"5px"}},"Status",null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("input",{style:{cursor:"auto"},placeholder:null!==(V=null===_e||void 0===_e?void 0:_e.status)&&void 0!==V?V:"No status set",readOnly:!0}):ce.id===(null===_e||void 0===_e||null===(Q=_e.creator)||void 0===Q?void 0:Q.id)?r.createElement(D.ZP,{onFocus:function(){return yn("")},key:"status",isSearchable:!1,styles:z.X2,defaultInputValue:"",components:{DropdownIndicator:z.ms},placeholder:"",value:Wn.find((function(e){return e.value===je})),options:ce.id===(null===_e||void 0===_e||null===(X=_e.creator)||void 0===X?void 0:X.id)?[].concat((0,d.Z)(Wn),[{label:null===re||void 0===re||null===($=re.misc_info)||void 0===$?void 0:$.lock,value:null===re||void 0===re||null===(K=re.misc_info)||void 0===K?void 0:K.lock},{label:"No status",value:""}]):Wn,onChange:function(e){return Ge(e.value)}}):r.createElement("input",{style:{cursor:"auto"},placeholder:null!==(ee=null===_e||void 0===_e?void 0:_e.status)&&void 0!==ee?ee:"No status set",readOnly:!0})),hn&&(null===hn||void 0===hn||null===(ne=hn.errors)||void 0===ne?void 0:ne.procedure_id)&&r.createElement(P.Z,{message:hn.errors.procedure_id})),hn&&(null===hn||void 0===hn?void 0:hn.message)&&r.createElement(P.Z,{message:hn.message})),null!==_e&&void 0!==_e&&_e.completed_at?r.createElement("div",{className:me.buttonsContainer},r.createElement(h.zx,{clicked:Ee,className:me.saveButton,title:"Close"})):ge?r.createElement("div",{className:me.buttonsContainer},r.createElement(h.zx,{clicked:Ee,className:me.saveButton,title:"Close"}),Ne&&ce.id===(null===(oe=_e.creator)||void 0===oe?void 0:oe.id)&&!(null!==_e&&void 0!==_e&&null!==(le=_e.assignee)&&void 0!==le&&le.id)&&r.createElement(h.zx,{light:!0,clicked:function(){return Ln(!0)},className:me.saveButton,title:"Delete"}),Ne&&r.createElement(h.zx,{light:!0,clicked:function(){return function(){var n,o;En(!0);var l=ze?ze.assignee_id:be;(0,De.xJ)({assignee_id:l,name:We,description:Qe,due_date:ae()(en).format("YYYY-MM-DD HH:mm"),status:null!==je&&void 0!==je?je:"",add_info:(0,a.Z)((0,a.Z)({},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.add_info),{},{priority:null!==Bn&&void 0!==Bn?Bn:"",start:tn,end:rn,value:pn})},null===e||void 0===e||null===(o=e.task)||void 0===o?void 0:o.id).subscribe({next:function(e){Pe(e),En(!1),xe(!1)},error:function(e){e&&(yn(e.data),En(!1))},complete:function(){}})}()},className:me.saveButton,title:"Update",loading:xn}),!Ne&&r.createElement(h.zx,{title:"Save",light:!0,clicked:function(){var n;Pe((0,a.Z)((0,a.Z)({},null===e||void 0===e?void 0:e.task),{},{assignee_id:ze?ze.assignee_id:be,name:We,description:Qe,due_date:ae()(en).format("YYYY-MM-DD HH:mm"),status:null!==je&&void 0!==je?je:"",add_info:(0,a.Z)((0,a.Z)({},null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.add_info),{},{priority:null!==Bn&&void 0!==Bn?Bn:"",start:tn,end:rn,value:pn})})),xe(!1)},className:me.saveButton})):r.createElement("div",{className:me.buttonsContainer},r.createElement(h.zx,{clicked:Ee,className:me.saveButton,title:"Close"}),r.createElement(h.zx,{light:!0,clicked:function(){return En(!0),void(0,De.vr)({newAssignee:ze,taskProcess:null===ue||void 0===ue?void 0:ue.processModule,taskName:We,taskDescription:null!==Qe&&void 0!==Qe?Qe:"-",dueDate:ae()(rn).format("YYYY-MM-DD HH:mm"),add_info:{module_id:null===ue||void 0===ue?void 0:ue.processModule.module_id,priority:Bn,start:tn,end:rn,value:pn}}).subscribe({next:function(e){Ee()},error:function(e){e&&(yn(e.data),En(!1))},complete:function(){En(!1),!On&&xe(!1)}})},className:me.saveButton,title:"Save",loading:xn})),Tn&&r.createElement(ln,{taskId:_e.id,isOpen:Tn,removeTask:function(e){Zn(!0),(0,De._5)(e).subscribe({next:function(e){Zn(!1),Ln(!1)},error:function(e){Zn(!1)},complete:function(){xe(!1)}})},loading:Mn,onClose:Ln}))}var ln=function(e){var n=e.isOpen,o=e.onClose,l=e.loading,i=e.removeTask,t=e.taskId;return r.createElement(h.U7,{isOpen:n,onClose:function(){return o(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"35%"}},r.createElement("div",null,r.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"}},"Are you sure do you want to delete this task?"),r.createElement(h.zx,{loading:l,clicked:function(){return i(t)},title:"Yes, Delete",style:{fontWeight:"500",marginLeft:"auto",marginRight:"auto"}}),r.createElement("p",{style:{cursor:"pointer",textAlign:"center",fontSize:"16px",fontWeight:600,color:"#4A4A4A",fontFamily:"var(--app-text-main-font)"},onClick:function(){return o(!1)},className:"go-back-text"},"No, Go Back")))},tn=(0,s.$j)((function(e){var n=e.flowReducer,o=n.begunModule,l=n.allModules,i=n.companyData,t=n.components,d=n.rememberPath,a=n.lastUpdates,u=n.companyUsersArray,r=n.products,s=n.transactions,v=n.companyProcesses,c=n.companyPositionsArray,p=n.cart,m=n.blueprints,f=n.payable,_=n.allTasks,h=e.authReducer.authenticatedUser;return{user:e.sessionReducer.user,begunModule:o,allModules:l,companyData:i,components:t,rememberPath:d,lastUpdates:a,companyUsersArray:u,products:r,transactions:s,companyProcesses:v,companyPositionsArray:c,cart:p,blueprints:m,payable:f,authenticatedUser:h,allTasks:_}}),(function(e){return{onSetAuthenticatedUser:function(n){return e((0,b.IF)(n))}}}))((function(e){var n,o,l,i,b,w,Z,k,N,D,T,L,U,$,K,ee,ne,oe,le,ie,te,ce,pe,fe,_e,he,ye,ge,be,xe,Ce,we,Me,Ze,Se,ke,Pe,Ne,Te,Le,ze,Ae,Re,Be,Fe,Ye,He,je,Ge,Je,Ve,Xe,$e,Ke,en,nn,on,ln,tn,dn,an,un,rn,sn,vn,cn,pn,mn,fn,_n,hn,yn,gn,bn,xn,En,Cn,wn,Mn,Zn,Sn=e.navigateTo,kn=void 0===Sn?{}:Sn,Pn=e.begunModule,In=e.user,Nn=e.cart,Dn=e.selectedProcess,Tn=void 0===Dn?{steps:[]}:Dn,Ln=e.allModules,zn=e.companyData,An=e.components,On=e.onCancel,Un=void 0===On?function(){}:On,Rn=e.companyUsersArray,Bn=e.products,Fn=e.companyPositionsArray,Wn=e.blueprints,qn=e.paymentID,Yn=void 0===qn?"":qn,Hn=e.isEditing,jn=void 0!==Hn&&Hn,Gn=e.payable,Jn=e.selectedComponent,Vn=e.setSelectedComponent,Qn=e.isProcessorOnly,Xn=void 0!==Qn&&Qn,$n=e.companyProcesses,Kn=e.lastUpdates,eo=e.allTasks,no=(0,s.v9)((function(e){return e.authReducer})),oo=no.authenticatedUser,lo=(0,r.useState)(!1),io=(0,u.Z)(lo,2),to=io[0],ao=io[1],uo=(0,r.useState)(1),ro=(0,u.Z)(uo,1)[0],so=(0,r.useState)(!1),vo=(0,u.Z)(so,2),co=vo[0],po=vo[1],mo=(0,r.useState)(!1),fo=(0,u.Z)(mo,2),_o=fo[0],ho=fo[1],yo=(0,r.useState)(""),go=(0,u.Z)(yo,2),bo=go[0],xo=go[1],Eo=(0,r.useState)(!1),Co=(0,u.Z)(Eo,2),wo=Co[0],Mo=Co[1],Zo=(0,r.useState)(!1),So=(0,u.Z)(Zo,2),ko=So[0],Po=So[1],Io=(0,r.useState)(null===(n=null===Jn||void 0===Jn?void 0:Jn.is_complete)||void 0===n||n),No=(0,u.Z)(Io,2),Do=No[0],To=No[1],Lo=(0,r.useState)([]),zo=(0,u.Z)(Lo,2),Ao=zo[0],Oo=zo[1],Uo=(0,r.useState)([]),Ro=(0,u.Z)(Uo,2),Bo=Ro[0],Fo=Ro[1],Wo=(0,r.useState)(!1),qo=(0,u.Z)(Wo,2),Yo=qo[0],Ho=qo[1],jo=(0,r.useState)(!1),Go=(0,u.Z)(jo,2),Jo=Go[0],Vo=Go[1],Qo=(0,r.useState)(!1),Xo=(0,u.Z)(Qo,2),$o=Xo[0],Ko=Xo[1],el=(0,r.useState)(!1),nl=(0,u.Z)(el,2),ol=nl[0],ll=nl[1],il=(0,r.useState)(!1),tl=(0,u.Z)(il,2),dl=tl[0],al=tl[1],ul=(0,r.useState)(!1),rl=(0,u.Z)(ul,2),sl=rl[0],vl=rl[1],cl=(0,r.useState)(!1),pl=(0,u.Z)(cl,2),ml=pl[0],fl=pl[1],_l=(0,r.useState)([]),hl=(0,u.Z)(_l,2),yl=hl[0],gl=hl[1],bl=(0,r.useState)([]),xl=(0,u.Z)(bl,2),El=xl[0],Cl=xl[1],wl=(0,r.useState)([]),Ml=(0,u.Z)(wl,2),Zl=Ml[0],Sl=Ml[1],kl=(0,r.useState)(!1),Pl=(0,u.Z)(kl,2),Il=Pl[0],Nl=Pl[1],Dl=(0,r.useState)(!1),Tl=(0,u.Z)(Dl,2),Ll=Tl[0],zl=Tl[1],Al=(0,r.useState)(!1),Ol=(0,u.Z)(Al,2),Ul=Ol[0],Rl=Ol[1],Bl=(0,r.useState)(!1),Fl=(0,u.Z)(Bl,2),Wl=Fl[0],ql=Fl[1],Yl=(0,r.useState)(5),Hl=(0,u.Z)(Yl,2),jl=Hl[0],Gl=Hl[1],Jl=(0,r.useState)(0),Vl=(0,u.Z)(Jl,2),Ql=Vl[0],Xl=Vl[1],$l=(0,r.useState)(!1),Kl=(0,u.Z)($l,2),ei=Kl[0],ni=Kl[1],oi=(0,r.useState)(!1),li=(0,u.Z)(oi,2),ii=(li[0],li[1]),ti=(0,r.useState)(!1),di=(0,u.Z)(ti,2),ai=di[0],ui=di[1],ri=(0,r.useState)(!1),si=(0,u.Z)(ri,2),vi=si[0],ci=si[1],pi=(0,x.s0)(),mi=(null===Tn||void 0===Tn||null===(o=Tn.steps)||void 0===o?void 0:o.length)>0?null===Tn||void 0===Tn?void 0:Tn.steps[Pn.processModule.stepIndex]:{},fi=(null===Tn||void 0===Tn||null===(l=Tn.steps)||void 0===l?void 0:l.length)>0?null===Tn||void 0===Tn||null===(i=Tn.steps[Pn.processModule.stepIndex])||void 0===i?void 0:i.pathway_steps:[],_i=(null===Tn||void 0===Tn||null===(b=Tn.steps)||void 0===b?void 0:b.length)>0?null===(w=Tn.steps[Pn.processModule.stepIndex])||void 0===w?void 0:w.pathway_processes:[],hi=(0,r.useRef)(),yi=(0,r.useRef)(),gi=(0,m.pQ)(),bi=(0,u.Z)(gi,2),xi=bi[0],Ei=bi[1];(0,r.useEffect)((function(){var e,n;if(void 0===(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e?void 0:e.isUpdating)){var o=Tn;if(o&&o.steps.length>0){var l,i=(0,a.Z)((0,a.Z)((0,a.Z)({},Pn.processModule),o),{},{steps:o.steps.filter((function(e){var n,o,l,i,t;return void 0==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.showStepAll)||1==(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.showStepAll)||0==(null===e||void 0===e||null===(l=e.options)||void 0===l?void 0:l.showStepAll)&&(null===e||void 0===e||null===(i=e.options)||void 0===i||null===(t=i.showOnly)||void 0===t?void 0:t.filter((function(e){return oo.positions.map((function(e){return e.id})).indexOf(e)>-1})).length)>0})).map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{rank:n+1})}))});f.h.dispatch((0,_.q4)(i)),Ei({action:m._U.setCurrentStep,value:i.steps[null!==(l=Pn.processModule.stepIndex)&&void 0!==l?l:0]})}}else if(!0===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)){var t;Ei({action:m._U.setCurrentStep,value:Pn.processModule.steps[null!==(t=Pn.processModule.stepIndex)&&void 0!==t?t:0]})}}),[]),(0,r.useEffect)((function(){var e=Rn.filter((function(e){return 0==e.departments.length})).map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id,department:"General",user:e}}));Rn.filter((function(e){return e.departments.length>0})).filter((function(n){n.departments.filter((function(o){e=[].concat((0,d.Z)(e),[{label:"".concat(n.first_name," ").concat(n.last_name),value:n.id,department:null===o||void 0===o?void 0:o.name,user:n}])}))})),Cl(e)}),[Rn]),(0,r.useEffect)((function(){Gn.length>0&&""!==Yn&&Gn.map((function(e,n){var o;ao(!0),(0,re.e_)({user_id:oo.id,id:null===e||void 0===e?void 0:e.id,total:-Math.abs(+(null!==(o=null===e||void 0===e?void 0:e.amount)&&void 0!==o?o:0)),product:null===e||void 0===e?void 0:e.product,notes:"E-Payment",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){if(ao(!1),n+1==Gn.length){var e,o,l,i;if(Gn.filter((function(e){return e.paymentID===Yn})).length>0)vl((null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(o=e.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0);f.h.dispatch((0,_.Wy)([])),Si()}}})}))}),[Gn,Yn]),(0,r.useEffect)((function(){var e,n;if((null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0){var o,l,i={id:""},t=[],d=[];if(W.Z((function(e){e.component_fields.map((function(n){var o,l;e.procedure_id!==(null===Ue||void 0===Ue?void 0:Ue.id)&&(null!==(o=i=$n.find((function(n){return n.id===e.procedure_id})))&&void 0!==o&&o.steps&&(t=R.Z(B.Z("component_blueprints"),F.Z)(null===(l=i)||void 0===l?void 0:l.steps),d=R.Z(B.Z("selected_fields"),F.Z)(t)));var a,u=d.find((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id}));u&&(n.data_type_name=u.data_type_name,n.data_type=u.data_type,n.field_name=u.field_name,n.options=u.options,n.component_blueprint_id=null===(a=t.find((function(e){return e.selected_fields.filter((function(e){return e.procedure_step_blueprint_field_id===n.procedure_step_blueprint_field_id})).length>0})))||void 0===a?void 0:a.id)}))}),An.filter((function(e){return e.component_fields.filter((function(e){return void 0===(null===e||void 0===e?void 0:e.field_name)})).length>0}))),void 0!==(null===kn||void 0===kn?void 0:kn.key))gl(Ni(null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o||null===(l=o.module)||void 0===l?void 0:l.id,An,kn.value,kn.key));else gl(An.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})))}}),[kn,Pn,An]);var Ci=(0,r.useCallback)((function(){var e=!1;return mi.component_blueprints.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})).some((function(e){var n;return!0===(null===(n=e.selected_fields)||void 0===n?void 0:n.filter((function(e){return"Profile"!==e.data_type_name&&"ID"!==e.data_type_name&&"Info"!==e.data_type_name&&"Notes"!==e.data_type_name&&"URL"!==e.data_type_name&&"Emails"!==e.data_type_name&&"Template"!==e.data_type_name&&"Global"!==e.data_type_name&&"Chart"!==e.data_type_name})).some((function(e){var n;return!0===e.mandatory&&!0===e.visible&&(!e.value||(null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.length)<1)})))}))&&(e=!0),!0===e?(ho(!0),!0):(xo(""),ho(!1),!1)}),[mi]),wi=function(e){var n;Mo(!0),Ci()&&!1===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)?Ii():Zi(e)},Mi=function(e){xi.components=[],xi.items=[],xi.currentStep={},xi.newStepComponents=[],Pn.processModule.steps.filter((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))})),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{isUpdating:!1}))),Po(!1),Mo(!0),Zi(e),zn.start=!1,(0,M.aK)().pipe((0,v.P)()).subscribe({next:function(){}})},Zi=function(e){Mo(!1),ho(!1),po(!1);var n={};if(void 0===e){if(void 0===(n=Pn.processModule.steps[Pn.processModule.stepIndex+1]))return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));Ei({action:m._U.setCurrentStep,value:n}),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:Pn.processModule.stepIndex+1})))}else{if(void 0==(n=Tn.steps.find((function(n){return n.id===e}))))n=Tn.steps[Pn.processModule.stepIndex+1],f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:Pn.processModule.stepIndex+1})));else{var o,l,i=Tn.steps[(null===(o=n)||void 0===o?void 0:o.rank)-1];if(void 0===i)return void f.h.dispatch((0,_.Xc)({show:!0,message:"Misconfigured next step, please contact your administrator",color:"red",bottom:!0}));f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:(null===(l=n)||void 0===l?void 0:l.rank)-1})))}Ei({action:m._U.setCurrentStep,value:n})}var t=xi.newStepComponents.filter((function(e){return null===e.options||(void 0===e.allowMultipleInputs||!1===e.options.allowMultipleInputs)}));Ei({action:m._U.setComponents,value:[].concat((0,d.Z)(xi.components.filter((function(e){return t.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(q.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),t)))}),Ei({action:m._U.setModuleNewStepComponents,value:n.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Status"===e.data_type_name||"ID"===e.data_type_name||"Value"===e.data_type_name})).length>0}))})},Si=function(){var e,n,o,l;Ei({action:m._U.setModuleItems,value:[]}),Ei({action:m._U.setComponents,value:[]}),Ei({action:m._U.addModuleComponents,value:[]}),Ei({action:m._U.setModuleNewStepComponents,value:[]}),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},null!==(e=null===Pn||void 0===Pn?void 0:Pn.processModule)&&void 0!==e?e:{}),{},{isUpdating:!1})));var i=(null===Tn||void 0===Tn||null===(n=Tn.steps)||void 0===n?void 0:n.length)>0&&!((null===Tn||void 0===Tn||null===(o=Tn.steps[0])||void 0===o||null===(l=o.component_blueprints)||void 0===l?void 0:l.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0);Mi(Xn||i?Pn.processModule.steps[0].id:Pn.processModule.steps[1].id)},ki=function(){var e,n,o,l,i,t,u,r,s,c,p,m,h,y;if(Ci())return xo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),void po(!1);var b,x=xi.newStepComponents.filter((function(e){var n,o;return null===e.options||(!1===(null===(n=e.options)||void 0===n?void 0:n.allowMultipleInputs)||void 0===(null===(o=e.options)||void 0===o?void 0:o.allowMultipleInputs))})),E=[].concat((0,d.Z)(xi.components.filter((function(e){return x.every((function(n){return n.id!==e.id}))}))),(0,d.Z)(q.Z((function(e){return e.selected_fields.filter((function(e){return""===e.value})).length>0}),x))),C=[],w=[],M="",Z="",S=!1,k="None",P={x:0},I=null===Jn||void 0===Jn?void 0:Jn.status,N={},D=null!==Pn&&void 0!==Pn&&null!==(e=Pn.processModule)&&void 0!==e&&e.isUpdating?(null!==(n=Y.Z(Math.max,B.Z("group",H.Z(j.Z("group"))(null!==(o=null===Jn||void 0===Jn?void 0:Jn.component_fields)&&void 0!==o?o:[]))))&&void 0!==n?n:-1)+1:0;E.map((function(e,n){var o,l,i,t,u,r,s=n,v=null===(o=e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})))||void 0===o?void 0:o.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));v&&null!==Pn&&void 0!==Pn&&null!==(l=Pn.processModule)&&void 0!==l&&l.isUpdating?s=v.group:null!==Pn&&void 0!==Pn&&null!==(i=Pn.processModule)&&void 0!==i&&i.isUpdating&&(s=D,D++),e.selected_fields.filter((function(e){return"Record"===e.data_type_name||"Filters"===e.data_type_name})).map((function(e,n){var o;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){var l,i;w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})]),M=e.value,N[e.field_name]=e.value;var t=null===(l=An.find((function(n){return n.component_fields.filter((function(n){var o;return n.component_blueprint_id===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.component_id)&&(null===n||void 0===n?void 0:n.value)===M})).length>0})))||void 0===l||null===(i=l.component_fields.find((function(e){return"Email Recipient"===e.data_type_name})))||void 0===i?void 0:i.value;t&&(b=t)}}));var c=null===(t=e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})))||void 0===t?void 0:t.find((function(e){return+(null===e||void 0===e?void 0:e.group)>=0}));c&&null!==Pn&&void 0!==Pn&&null!==(u=Pn.processModule)&&void 0!==u&&u.isUpdating?s=c.group:null!==Pn&&void 0!==Pn&&null!==(r=Pn.processModule)&&void 0!==r&&r.isUpdating&&(s=D,D++),e.selected_fields.filter((function(e){return!("Record"===e.data_type_name||"Filters"===e.data_type_name)})).map((function(e,n){var o,l,i;if(null!==e.value&&void 0!==e.value&&1!=(null===(o=e.options)||void 0===o?void 0:o.skip)){if(N[e.field_name]=e.value,"ID"===(null===e||void 0===e?void 0:e.data_type_name))null!==Pn&&void 0!==Pn&&null!==(l=Pn.processModule)&&void 0!==l&&l.isUpdating?w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})]):(w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s,value:"".concat(null===e||void 0===e?void 0:e.options.id).concat(null===(null===zn||void 0===zn?void 0:zn.misc_info)?1:null!==(i=null===zn||void 0===zn?void 0:zn.misc_info[null===e||void 0===e?void 0:e.field_name])&&void 0!==i?i:1)})]),C=[].concat((0,d.Z)(C),["".concat(e.field_name)]));else if("Value"===(null===e||void 0===e?void 0:e.data_type_name)){var t;w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.value,group:s})])}else if("Email Recipient"===(null===e||void 0===e?void 0:e.data_type_name))w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:e.value.replace(/ /g,""),group:s})]);else if("Product Lookup"===e.data_type_name)w=(0,d.Z)(w);else if("Status"===e.data_type_name&&"Draft"===e.value&&1==Do)S=!0,w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"New",group:s})]),k="New";else if("Status"===e.data_type_name)w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]),k=null===e||void 0===e?void 0:e.value;else if("Pin"===e.data_type_name)w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:null===e||void 0===e?void 0:e.value,group:s})]);else if("Formula"===e.data_type_name){var u,r=null!==Pn&&void 0!==Pn&&null!==(u=Pn.processModule)&&void 0!==u&&u.isUpdating?(0,z.LV)(null===e||void 0===e?void 0:e.options,Jn.component_fields.filter((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.list.includes(n.field_name)})),E,xi.items):e.value;w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:r.toString(),group:s})])}else if("output"!==e.data_type){var v,c,p,m,f;if("People"===e.data_type_name)if(!0===(null===(f=e.options)||void 0===f?void 0:f.email)){var _,h,y=null===(_=El.find((function(n){return n.label===(null===e||void 0===e?void 0:e.value)})))||void 0===_||null===(h=_.user)||void 0===h?void 0:h.email;Z=y?Z.concat(Z.length>0?",".concat(y):y):Z,e.email=void 0}"email"===(null===e||void 0===e||null===(v=e.options)||void 0===v?void 0:v.actionToPerform2)&&null!==e&&void 0!==e&&null!==(c=e.options)&&void 0!==c&&null!==(p=c.valueToMatch2)&&void 0!==p&&null!==(m=p.split(","))&&void 0!==m&&m.includes(null===e||void 0===e?void 0:e.value)&&b&&(S=!0,Z=Z.concat(Z.length>0?",".concat(b):b)),w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,group:s})])}}else if("Status"===(null===e||void 0===e?void 0:e.data_type_name))1==Do?(w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"New",group:s})]),k="New"):(w=[].concat((0,d.Z)(w),[(0,a.Z)((0,a.Z)({},e),{},{index:n,value:"Draft",group:s})]),k="Draft"),N[e.field_name]=e.value;else if("Action Button"===(null===e||void 0===e?void 0:e.data_type_name)){var g,x,M;w=(0,d.Z)(w),N[e.field_name]=e.value,"status"===(null===e||void 0===e||null===(g=e.options)||void 0===g?void 0:g.action)?k=e.value:"user"!==(null===(x=e.options)||void 0===x?void 0:x.action)&&"creator"!==(null===(M=e.options)||void 0===M?void 0:M.action)||(Jn.assigned_to=null===e||void 0===e?void 0:e.value)}}))}));var T,L,A,O,U,R,F,W,G,J,V,Q,X,$,K,ee="";(null===(l=Pn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t||null===(u=t.title)||void 0===u?void 0:u.length)>0?(null===(T=Pn.processModule)||void 0===T||null===(L=T.module)||void 0===L||null===(A=L.options)||void 0===A||null===(O=A.title)||void 0===O||O.map((function(e){if("Info"!==e){var n,o,l,i,t;ee=""===ee?"".concat(null!==(n=null===(o=w.find((function(n){return n.field_name===e})))||void 0===o?void 0:o.value)&&void 0!==n?n:""):"".concat(null!==(l=ee)&&void 0!==l?l:"","  ").concat(null!==(i=null===(t=w.find((function(n){return n.field_name===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:"")}else{var d,a=null===(d=Pn.processModule)||void 0===d?void 0:d.completeSteps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==a){var u,r,s,v,c,p,m,f,_,h=null===(u=a.component_blueprints)||void 0===u||null===(r=u.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===r?void 0:r.find((function(e){return"Info"===e.data_type_name})),y=An.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===h.options.component_id&&e.value===N[h.field_name]})))||void 0===n?void 0:n.length)>0}));if(y)if((null===h||void 0===h||null===(s=h.options)||void 0===s||null===(v=s.list)||void 0===v?void 0:v.length)>0)ee=""===ee?"".concat(null!==(c=null===(p=y.component_fields.find((function(e){var n;return e.field_name===(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.list[0])})))||void 0===p?void 0:p.value)&&void 0!==c?c:""):"".concat(null!==(m=ee)&&void 0!==m?m:"","  ").concat(null!==(f=null===(_=y.component_fields.find((function(e){var n;return e.field_name===(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.list[0])})))||void 0===_?void 0:_.value)&&void 0!==f?f:"")}}})),null!==(U=Pn.processModule)&&void 0!==U&&null!==(R=U.module)&&void 0!==R&&null!==(F=R.options)&&void 0!==F&&F.title.find((function(e){return"UUID"===e}))&&(ee="".concat(null!==Pn&&void 0!==Pn&&null!==(W=Pn.processModule)&&void 0!==W&&W.isUpdating?Jn.id:(0,z.mR)()))):ee=null!==Pn&&void 0!==Pn&&null!==(G=Pn.processModule)&&void 0!==G&&G.isUpdating?Jn.id:(0,z.mR)();if(!0===(null===(r=Pn.processModule)||void 0===r||null===(s=r.module)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.emailOutputs)){var ne,oe,le,ie,te,de=Tn.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Info"===e.data_type_name&&1==e.options.email})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==de){var ae,ue,se=null===(ae=de.component_blueprints)||void 0===ae||null===(ue=ae.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){var n;return"Info"===e.data_type_name&&1==(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===ue?void 0:ue.find((function(e){var n;return"Info"===e.data_type_name&&!0===(null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.email)})),ve=An.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.component_blueprint_id===se.options.component_id&&e.value===M})))||void 0===n?void 0:n.length)>0}));ve&&(V=se.id,J=ve.id)}if(void 0!==(de=Tn.steps.find((function(e){var n;return!0===e.is_end&&(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}))))(null===(le=de.component_blueprints)||void 0===le?void 0:le.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Emails"===e.data_type_name})))||void 0===n?void 0:n.length)>0}))).selected_fields.filter((function(e){return"Emails"===e.data_type_name})).filter((function(e){var n;w.find((function(n){return n.value===e.options.valueToMatch&&n.field_name===e.options.fieldToMatch}))&&(b&&(Q=e,S=!0,!0===(null===(n=e.options)||void 0===n?void 0:n.copyEmailRecip)&&(Z=Z.concat(Z.length>0?",".concat(b):b))))}));if(Z=null!==(ne=Z.split(","))&&void 0!==ne?ne:[],Zl.length>0||Z.length>0)Z=null!==Pn&&void 0!==Pn&&null!==(ie=Pn.processModule)&&void 0!==ie&&ie.isUpdating?!0===S?[].concat((0,d.Z)(Zl),(0,d.Z)(Z)):(0,d.Z)(Zl):[].concat((0,d.Z)(Zl),(0,d.Z)(Z));if(Z.length>0&&(P={emailTo:Z}),V&&J&&(P=(0,a.Z)((0,a.Z)({},P),{},{info:V,target:J})),(null===(oe=Q)||void 0===oe?void 0:oe.id.length)>0)P=(0,a.Z)((0,a.Z)({},P),{},{template:null===(te=Q)||void 0===te?void 0:te.id})}if(!0===(null===(p=Pn.processModule)||void 0===p||null===(m=p.module)||void 0===m||null===(h=m.options)||void 0===h?void 0:h.rewards)&&I!==k){var ce,pe,me,fe,_e,he,ye=Pn.processModule.steps.find((function(e){var n;return(null===(n=e.component_blueprints.filter((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===n?void 0:n.length)>0}));if(void 0!==ye)if((X=null===(ce=ye.component_blueprints)||void 0===ce||null===(pe=ce.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Rewards"===e.data_type_name})))||void 0===n?void 0:n.length)>0})).selected_fields)||void 0===pe?void 0:pe.find((function(e){return"Rewards"===e.data_type_name}))).options.status===k)oo.options.rewards=+(null!==(me=null===oo||void 0===oo||null===(fe=oo.options)||void 0===fe?void 0:fe.rewards)&&void 0!==me?me:0)+ +(null===(_e=X)||void 0===_e||null===(he=_e.options)||void 0===he?void 0:he.points)}(null===(y=w)||void 0===y?void 0:y.length)>0?(ao(!0),null!==Pn&&void 0!==Pn&&null!==($=Pn.processModule)&&void 0!==$&&$.isUpdating?(Jn.options=P,Jn.status=k,null!==xi&&void 0!==xi&&xi.assigned_to&&(Jn.assigned_to={id:null===xi||void 0===xi?void 0:xi.assigned_to}),(0,g.KL)((0,a.Z)((0,a.Z)({},Jn),{},{selected_fields:(0,d.Z)(w),component_items:xi.items}),Jn.id,Ao,ee,Do,Bo).subscribe({next:function(e){var n,o,l,i,t,d,u,r;if(null!==(n=Pn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.single)return localStorage.setItem(null===(d=Pn.processModule)||void 0===d?void 0:d.module.id,JSON.stringify(null===e||void 0===e?void 0:e.data)),void Zi(null===(u=Pn.processModule)||void 0===u||null===(r=u.steps[0])||void 0===r?void 0:r.id);var s=w.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(s){var c,p,m=JSON.parse(null!==(c=null===s||void 0===s?void 0:s.value)&&void 0!==c?c:{task:0}),f=eo.find((function(e){return e.id===(null===m||void 0===m?void 0:m.task)}));if(f)(0,De.xJ)((0,a.Z)((0,a.Z)({},f),{},{assignee_id:null===e||void 0===e||null===(p=e.data.created_by)||void 0===p?void 0:p.id}),null===f||void 0===f?void 0:f.id).pipe((0,v.P)()).subscribe({})}var _,h=w.find((function(e){return"Payments"===e.data_type_name})),y=w.find((function(e){var n;return e.field_name===(null===h||void 0===h||null===(n=h.options)||void 0===n?void 0:n.paymentField)}));if(!h||null!==e&&void 0!==e&&null!==(i=e.data.payments)&&void 0!==i&&i.stripe_id||"Cash"===(null===h||void 0===h?void 0:h.value)||"Wallet"===(null===h||void 0===h?void 0:h.value)||"Points"===(null===h||void 0===h?void 0:h.value)||oo.id!==(null===Jn||void 0===Jn||null===(t=Jn.created_by)||void 0===t?void 0:t.id))if(h){var g,b;if(y&&"Cash"!==(null===h||void 0===h?void 0:h.value)&&k===(null===(g=zn.misc_info)||void 0===g?void 0:g.lock)&&oo.id===(null===Jn||void 0===Jn||null===(b=Jn.assigned_to)||void 0===b?void 0:b.id)&&I!==k){var x,E,C=+(null===y||void 0===y?void 0:y.value)-+(null===y||void 0===y?void 0:y.value)*+(null!==(x=null===zn||void 0===zn||null===(E=zn.misc_info)||void 0===E?void 0:E.rate)&&void 0!==x?x:.2);(0,re.e_)({user_id:oo.id,id:(0,z.mR)(),total:C,product:"CR-".concat(ee),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e,n;(0,Ee.Vy)(oo,(0,a.Z)((0,a.Z)({},null===oo||void 0===oo?void 0:oo.options),{},{credit:+(+(null!==(e=null===In||void 0===In||null===(n=In.options)||void 0===n?void 0:n.credit)&&void 0!==e?e:0)+C)})).pipe((0,v.P)()).subscribe({next:function(e){oo.options=e.options,ao(!1),Si(),zi(),window.scrollTo({top:0,behavior:"smooth"})}})}})}else X?(0,Ee.Vy)(oo,null===oo||void 0===oo?void 0:oo.options).pipe((0,v.P)()).subscribe({next:function(){Si(),zi(),window.scrollTo({top:0,behavior:"smooth"})}}):(Si(),zi(),window.scrollTo({top:0,behavior:"smooth"})),ao(!1)}else ao(!1),Si(),zi(),window.scrollTo({top:0,behavior:"smooth"});else xi.total=+(null===y||void 0===y?void 0:y.value),xi.plan=+(null===y||void 0===y?void 0:y.value),xi.id=null===e||void 0===e||null===(_=e.data)||void 0===_?void 0:_.title,ao(!1),zl(!0)}})):(0,g.LM)({id:E[0].id,selected_fields:(0,d.Z)(w),component_items:xi.items,options:P,status:k,assigned_to:null!==(K=null===xi||void 0===xi?void 0:xi.assigned_to)&&void 0!==K?K:""},"",Pn.processModule.module_id,Ao,ee,Do,Bo).subscribe({next:function(e){var n,o,l,i,t,d,u;if(null!==(n=Pn.processModule)&&void 0!==n&&null!==(o=n.module)&&void 0!==o&&null!==(l=o.options)&&void 0!==l&&l.single)return localStorage.setItem(null===(t=Pn.processModule)||void 0===t?void 0:t.module.id,JSON.stringify(e)),void Zi(null===(d=Pn.processModule)||void 0===d||null===(u=d.steps[0])||void 0===u?void 0:u.id);(null===(i=C)||void 0===i?void 0:i.length)>0&&Pi(C);var r=w.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));if(r){var s,c,p,m=JSON.parse(null!==(s=null===r||void 0===r?void 0:r.value)&&void 0!==s?s:{task:0}),h=eo.find((function(e){return e.id===(null===m||void 0===m?void 0:m.task)}));if(h)(0,De.xJ)((0,a.Z)((0,a.Z)({},h),{},{assignee_id:null!==(c=null===e||void 0===e||null===(p=e.created_by)||void 0===p?void 0:p.id)&&void 0!==c?c:oo.id}),null===h||void 0===h?void 0:h.id).pipe((0,v.P)()).subscribe({})}if(Pn.processModule.selectedComponent=e,w.filter((function(e){return!("Cash"===(null===e||void 0===e?void 0:e.value)||"Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0)ao(!1),zl(!0);else if(w.filter((function(e){return("Wallet"===(null===e||void 0===e?void 0:e.value)||"Points"===(null===e||void 0===e?void 0:e.value))&&"Payments"===e.data_type_name})).length>0){var y,b,x=w.find((function(e){return"Payments"===e.data_type_name}));(0,re.e_)({user_id:oo.id,id:null!==(y=null===e||void 0===e?void 0:e.id)&&void 0!==y?y:(0,z.mR)(),total:-xi.total,product:"DB-".concat(ee),notes:null!==(b=null===x||void 0===x?void 0:x.value)&&void 0!==b?b:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var n,o,l,i;(0,Ee.Vy)(oo,(0,a.Z)((0,a.Z)({},null===oo||void 0===oo?void 0:oo.options),{},{credit:+(+(null!==(n=null===In||void 0===In||null===(o=In.options)||void 0===o?void 0:o.credit)&&void 0!==n?n:0)-("Wallet"===(null===x||void 0===x?void 0:x.value)?+xi.total:0)),points:+(+(null!==(l=null===In||void 0===In||null===(i=In.options)||void 0===i?void 0:i.points)&&void 0!==l?l:0)-("Points"===(null===x||void 0===x?void 0:x.value)?+xi.total:0))})).pipe((0,v.P)()).subscribe({next:function(n){var o,l,i,t,d,a,u,r,s,c;(ao(!1),oo.options=n.options,null!==Pn&&void 0!==Pn&&null!==(o=Pn.processModule)&&void 0!==o&&null!==(l=o.steps)&&void 0!==l&&l.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)})).length>0})).length>0})))?(fl((null===Pn||void 0===Pn||null===(i=Pn.processModule)||void 0===i||null===(t=i.module)||void 0===t||null===(d=t.options)||void 0===d||null===(a=d.message)||void 0===a?void 0:a.length)>0&&1==e.is_complete),Xl(setInterval((function(){(0,g.r6)(e.id).pipe((0,v.P)()).subscribe({next:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.component_fields)&&void 0!==n&&n.find((function(e){return"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)}))&&(Vn(e),window.clearInterval(Ql))},error:function(){window.clearInterval(Ql)}})}),15e3))):vl((null===Pn||void 0===Pn||null===(u=Pn.processModule)||void 0===u||null===(r=u.module)||void 0===r||null===(s=r.options)||void 0===s||null===(c=s.message)||void 0===c?void 0:c.length)>0&&1==e.is_complete);f.h.dispatch((0,_.RV)({})),zi(),Si()}})}})}else{var E,M,Z,S,k,P,I,N,D,T;if(ao(!1),null!==Pn&&void 0!==Pn&&null!==(E=Pn.processModule)&&void 0!==E&&null!==(M=E.steps)&&void 0!==M&&M.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name&&("user"===e.options.action||"creator"===e.options.action)})).length>0})).length>0})))fl((null===Pn||void 0===Pn||null===(Z=Pn.processModule)||void 0===Z||null===(S=Z.module)||void 0===S||null===(k=S.options)||void 0===k||null===(P=k.message)||void 0===P?void 0:P.length)>0&&1==e.is_complete),Xl(setInterval((function(){(0,g.r6)(e.id).pipe((0,v.P)()).subscribe({next:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.component_fields)&&void 0!==n&&n.find((function(e){return"Action Button"===e.data_type_name&&(null===e||void 0===e?void 0:e.value)}))&&(Vn(e),window.clearInterval(Ql))},error:function(){window.clearInterval(Ql)}})}),15e3));else vl((null===Pn||void 0===Pn||null===(I=Pn.processModule)||void 0===I||null===(N=I.module)||void 0===N||null===(D=N.options)||void 0===D||null===(T=D.message)||void 0===T?void 0:T.length)>0&&1==e.is_complete);f.h.dispatch((0,_.RV)({})),zi(),Si()}},error:function(e){var n,o,l,i;null!==e&&void 0!==e&&e.data&&(null!==C&&Pi(C),vl((null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l||null===(i=l.message)||void 0===i?void 0:i.length)>0&&1==(null===e||void 0===e?void 0:e.data.is_complete)),f.h.dispatch((0,_.RV)({})),Si())}})):(f.h.dispatch((0,_.Xc)({show:!0,message:"There are no items to be saved",color:"red"})),window.scrollTo({top:0,behavior:"smooth"}))},Pi=function(e){if((null===e||void 0===e?void 0:e.length)>0){var n,o=null!==(n=zn.misc_info)&&void 0!==n?n:{};e.filter((function(e){var n;o[e]=+(null!==(n=o[e])&&void 0!==n?n:1)+1})),ao(!0),(0,M.x5)({misc_info:o}).pipe((0,v.P)()).subscribe({})}},Ii=function(){xo("Fill up all the required fields"),window.scrollTo({top:0,behavior:"smooth"}),po(!1)},Ni=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],t=n.filter((function(n){return n.module_id===e})).filter((function(e){var n;return i.length>0?i.includes(e.id):""===o?e:e.title.includes(o)||(null===(n=e.component_fields.filter((function(e){var n,i,t,d,a;return"Record"===e.data_type_name?null===(n=An.find((function(n){var o;return(null===(o=n.component_fields.filter((function(n){return n.field_name===e.options.output&&n.component_blueprint_id===e.options.component_id&&n.value===(null===e||void 0===e?void 0:e.value)})))||void 0===o?void 0:o.length)>0})))||void 0===n?void 0:n.component_fields.find((function(n){var o;return null===(o=e.options)||void 0===o?void 0:o.names.includes(n.field_name)})).value.includes(o):void 0!==l?("date"===e.data_type?null===(i=ae()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===i?void 0:i.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.includes(o))&&e.field_name===l:"date"===e.data_type?null===(d=ae()(new Date(null===e||void 0===e?void 0:e.value)))||void 0===d?void 0:d.format("DD MMM YYYY").includes(o):null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.includes(o)})))||void 0===n?void 0:n.length)>0}));return t},Di=function(e){var n,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yl,i=G.Z([J.Z(V.Z("created_date"))])(l).map((function(n){var o,l,i,d,u,r,s,v,c,p,m={};e.list.map((function(e){var o=n.component_fields.find((function(n){return n.field_name===e}));if(void 0!=o)if("People"===o.data_type_name)m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,o.value));else if("Date"===o.data_type_name){var l,i=new Date(null===o||void 0===o||null===(l=o.value)||void 0===l?void 0:l.split(",")[0]);m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,ae()(i).format("DD MMM YYYY")))}else if("Record"===o.data_type_name||"Component"===o.data_type_name){var d;m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,20)):"".concat(null===o||void 0===o?void 0:o.value))),null===(d=An.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===d||d.component_fields.filter((function(e){m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e.field_name,y.tq?e.value.slice(0,20):e.value))}))}else if("Filters"===o.data_type_name){var u;m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,y.tq?"".concat(null===o||void 0===o?void 0:o.value.slice(0,20)):"".concat(null===o||void 0===o?void 0:o.value))),null===(u=An.find((function(e){var n;return(null===(n=e.component_fields.filter((function(e){return e.field_name===o.options.output&&e.component_blueprint_id===o.options.component_id&&e.value===(null===o||void 0===o?void 0:o.value)})))||void 0===n?void 0:n.length)>0})))||void 0===u||u.component_fields.filter((function(e){m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e.field_name,y.tq?e.value.slice(0,20):e.value))}))}else if("Status"===o.data_type_name){var r,s,v,c,p,f;if(0==n.is_complete)m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,"Draft"));else if(!((null===(r=Pn.processModule.module)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.activeFor)>0&&ae()((0,de.now)()).diff(ae()(n.created_date),"minutes")>+(null===(v=Pn.processModule.module)||void 0===v||null===(c=v.options)||void 0===c?void 0:c.activeFor))||"New"!==n.status&&"Unassigned"!==n.status||null!==(p=n.assigned_to)&&void 0!==p&&p.id)m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,"".concat(null!==(f=null===n||void 0===n?void 0:n.status)&&void 0!==f?f:null===o||void 0===o?void 0:o.value)));else m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,"Expired"))}else{var _,h;m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e,y.tq?null===o||void 0===o||null===(_=o.value)||void 0===_?void 0:_.slice(0,20).split(",")[0]:null===o||void 0===o||null===(h=o.value)||void 0===h?void 0:h.split(",")[0]))}})),(null===n||void 0===n||null===(o=n.component_items)||void 0===o?void 0:o.length)>0&&(m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},"Total Qty",n.component_items.reduce((function(e,n){return e+ +n.quantity}),0)))),(null===n||void 0===n||null===(l=n.shared_positions)||void 0===l?void 0:l.length)>0&&(m=(0,a.Z)((0,a.Z)({},m),{},{Shares:null===n||void 0===n?void 0:n.shared_positions.map((function(e){var n;return null===(n=Fn.find((function(n){return n.value===e.id})))||void 0===n?void 0:n.label})).toString()}));var f=new Date(n.created_date);return m=(0,a.Z)((0,a.Z)({},m),{},(c={id:n.id},(0,t.Z)(c,"Created By","".concat(null===n||void 0===n||null===(i=n.created_by)||void 0===i?void 0:i.first_name," ").concat(null===n||void 0===n||null===(d=n.created_by)||void 0===d?void 0:d.last_name)),(0,t.Z)(c,"Created Date",ae()(f).format("DD MMM YYYY")),(0,t.Z)(c,"Assigned To","".concat(null!==(u=null===n||void 0===n||null===(r=n.assigned_to)||void 0===r?void 0:r.first_name)&&void 0!==u?u:""," ").concat(null!==(s=null===n||void 0===n||null===(v=n.assigned_to)||void 0===v?void 0:v.last_name)&&void 0!==s?s:"")),(0,t.Z)(c,"Title",n.title),(0,t.Z)(c,"items",n.component_items),(0,t.Z)(c,Pn.processModule.module.name,n.title),c)),null===e||void 0===e||null===(p=e.reports)||void 0===p||p.filter((function(e){return"Formula"===e.data_type_name})).map((function(e){var o=(0,z.LV)(e.options,e.options.list.map((function(e){var n;return{value:null!==(n=m[e])&&void 0!==n?n:0}})),An.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)})),null===n||void 0===n?void 0:n.component_items);m=(0,a.Z)((0,a.Z)({},m),{},(0,t.Z)({},e.field_name,"".concat(o)))})),m}));null===e||void 0===e||null===(n=e.reports)||void 0===n||n.filter((function(e){return"List Filter"===e.data_type_name})).map((function(e){i=i.filter((function(n){var o,l;return n[null===(o=e.options)||void 0===o?void 0:o.field]===(null===(l=e.options)||void 0===l?void 0:l.value)}))}));var u=null===e||void 0===e||null===(o=e.reports)||void 0===o?void 0:o.find((function(e){return"Transaction List"===e.data_type_name}));if(u){var r=[];i.map((function(e){e.items.filter((function(n){var o=(0,a.Z)({},e);Object.keys(u.options.map).map((function(e){o[u.options.map[e]]=n[e]})),r=[].concat((0,d.Z)(r),[o])})),delete e.items})),i=r}return i},Ti=null===Jn||void 0===Jn||null===(Z=Jn.component_fields)||void 0===Z||null===(k=Z.find((function(e){return"Status"===e.data_type_name})))||void 0===k?void 0:k.value,Li=(null===Pn||void 0===Pn||null===(N=Pn.processModule)||void 0===N||null===(D=N.steps)||void 0===D?void 0:D.length)>0?null===Pn||void 0===Pn||null===(T=Pn.processModule)||void 0===T||null===(L=T.steps)||void 0===L||null===(U=L.find((function(e){return(null===e||void 0===e?void 0:e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length)>0})))||void 0===U||null===($=U.component_blueprints.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===$||null===(K=$.options)||void 0===K?void 0:K.showOnly:[],zi=function(){var e,n,o,l;Vn({}),Ei({action:m._U.setModuleItems,value:Jn.component_items}),Ei({action:m._U.setModuleNewStepComponents,value:[]}),Ei({action:m._U.setComponents,value:[]}),(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n?void 0:n.length)>0&&(null===Pn||void 0===Pn||null===(o=Pn.processModule)||void 0===o||null===(l=o.steps)||void 0===l||l.filter((function(e){var n;return null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return e.value=void 0}))}))}))),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{selectedComponent:{id:""},stepIndex:Xn||Ui?0:1,isUpdating:!1})))},Ai=!!Array.isArray(null===Pn||void 0===Pn||null===(ee=Pn.processModule)||void 0===ee?void 0:ee.steps)&&(null===Pn||void 0===Pn||null===(ne=Pn.processModule)||void 0===ne||null===(oe=ne.steps)||void 0===oe||null===(le=oe.find((function(e){var n;return(null===e||void 0===e||null===(n=e.component_blueprints)||void 0===n?void 0:n.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).length)>0})))||void 0===le||null===(ie=le.component_blueprints)||void 0===ie||null===(te=ie.find((function(e){var n;return(null===(n=e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})))||void 0===n?void 0:n.length)>0})))||void 0===te||null===(ce=te.selected_fields)||void 0===ce?void 0:ce.find((function(e){return"Ratings"===e.data_type_name}))),Oi=null===Rn||void 0===Rn?void 0:Rn.find((function(e){var n,o,l,i;return e.id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.selectedComponent)||void 0===o||null===(l=o.component_fields)||void 0===l||null===(i=l.find((function(e){var n;return e.field_name===(null===Ai||void 0===Ai||null===(n=Ai.options)||void 0===n?void 0:n.field)})))||void 0===i?void 0:i.value)})),Ui=(null===Tn||void 0===Tn||null===(pe=Tn.steps)||void 0===pe?void 0:pe.length)>0&&!((null===Tn||void 0===Tn||null===(fe=Tn.steps[0])||void 0===fe||null===(_e=fe.component_blueprints)||void 0===_e?void 0:_e.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0),Ri=function(){var e,n,o,l,i,t;return r.createElement("div",{ref:yi,className:me.menuAccordionButtons},(0==Ui&&Pn.processModule.stepIndex>1||1==Ui&&Pn.processModule.stepIndex>0||(null===Jn||void 0===Jn?void 0:Jn.title))&&r.createElement(h.zx,{title:"Cancel",light:!0,style:{width:"100%",display:null!==(e=Pn.processModule.module.options)&&void 0!==e&&e.single?"none":""},clicked:function(){xi.components.length>0||xi.newStepComponents.length>0?ui(!0):(Pn.processModule.back_array=[],Zi(Ui?Tn.steps[0].id:Tn.steps[1].id),Nl(!1),zi(),Un())}}),(0==Ui&&Pn.processModule.stepIndex>1||1==Ui&&Pn.processModule.stepIndex>0)&&r.createElement(h.zx,{title:"Back",light:!0,style:{width:"100%"},clicked:function(){var e,n,o;if(1==Pn.processModule.stepIndex&&gl(An.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),1==(null===mi||void 0===mi||null===(e=mi.options)||void 0===e?void 0:e.deleteOnBack)&&mi.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"output"!==e.data_type})).map((function(e){e.value=void 0}))})),(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.back_array)||void 0===o?void 0:o.length)>0){var l,i=null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l?void 0:l.back_array.pop();i&&Zi(i)}else{var t;Zi(null===(t=Pn.processModule.steps[Pn.processModule.stepIndex-1])||void 0===t?void 0:t.id)}}}),!0===(null===mi||void 0===mi?void 0:mi.is_end)?r.createElement(h.zx,{disabled:!1===(null===zn||void 0===zn?void 0:zn.start),title:1==(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n?void 0:n.isUpdating)?"Update":Do&&null!==(o=null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.save)&&void 0!==o?o:"Save",loading:to,style:{width:"100%",display:xi.components.length>0||xi.newStepComponents.length>0?"":"none"},clicked:function(){var e,n,o,l,i,t;return Il?xo("Saving is not allowed in Edit Mode"):1==(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.module)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.emailOutputs)&&1==(null===Pn||void 0===Pn||null===(l=Pn.processModule)||void 0===l||null===(i=l.module)||void 0===i||null===(t=i.options)||void 0===t?void 0:t.selectiveEmail)&&Do?Ko(!0):ki()}}):r.createElement(h.zx,{disabled:!1===(null===zn||void 0===zn?void 0:zn.start),title:"Next",style:{width:"100%"},clicked:function(){var e,n,o,l,i,t,d,a,u;Array.isArray(null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e?void 0:e.back_array)||(Pn.processModule.back_array=[]),null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||n.back_array.push(null===xi||void 0===xi||null===(o=xi.currentStep)||void 0===o?void 0:o.id);var r,s,v,c,p,m=null===(l=mi.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n,o;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)&&"decision"===(null===(o=e.options)||void 0===o?void 0:o.type)})).length>0})))||void 0===l||null===(i=l.selected_fields)||void 0===i?void 0:i.find((function(e){var n;return"Dropdown"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})),h=null===(t=mi.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)})).length>0})))||void 0===t||null===(d=t.selected_fields)||void 0===d?void 0:d.filter((function(e){var n;return"Value Button"===e.data_type_name&&(null===(n=e.options)||void 0===n?void 0:n.jump1)}));if(null!==m&&void 0!==m&&null!==(a=m.options)&&void 0!==a&&a.jump1&&null!==m&&void 0!==m&&null!==(u=m.options)&&void 0!==u&&u.jump2)if(0==(null===m||void 0===m||null===(r=m.options)||void 0===r?void 0:r.list.indexOf(null===m||void 0===m?void 0:m.value)))wi(null===(v=$n.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===v||null===(c=v.steps)||void 0===c||null===(p=c.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump1)})))||void 0===p?void 0:p.id);else if(1==(null===m||void 0===m||null===(s=m.options)||void 0===s?void 0:s.list.indexOf(null===m||void 0===m?void 0:m.value))){var y,g,b;wi(null===(y=$n.find((function(e){var n;return e.id===(null===m||void 0===m||null===(n=m.options)||void 0===n?void 0:n.process)})))||void 0===y||null===(g=y.steps)||void 0===g||null===(b=g.find((function(e){return e.id===(null===m||void 0===m?void 0:m.options.jump2)})))||void 0===b?void 0:b.id)}else{var x,E;null===Pn||void 0===Pn||null===(x=Pn.processModule)||void 0===x||null===(E=x.back_array)||void 0===E||E.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"Please select a value for ".concat(null===m||void 0===m?void 0:m.field_name),color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===h||void 0===h?void 0:h.length)>0){var C,w,M,Z,S,k=h.filter((function(e){return void 0!==e.value}));if(1==k.length)wi(null===(C=$n.find((function(e){var n,o;return e.id===(null===(n=k[0])||void 0===n||null===(o=n.options)||void 0===o?void 0:o.process)})))||void 0===C||null===(w=C.steps)||void 0===w||null===(M=w.find((function(e){var n;return e.id===(null===(n=k[0])||void 0===n?void 0:n.options.jump1)})))||void 0===M?void 0:M.id);else null===Pn||void 0===Pn||null===(Z=Pn.processModule)||void 0===Z||null===(S=Z.back_array)||void 0===S||S.pop(),f.h.dispatch((0,_.Xc)({show:!0,message:"A selection is required",color:"red",bottom:!1})),window.scrollTo({top:0,behavior:"smooth"})}else if((null===mi||void 0===mi?void 0:mi.next_steps.length)>1||fi.length>1||_i.length>1)po(!co);else if(1===mi.next_steps.length){var P;wi(null===mi||void 0===mi||null===(P=mi.next_steps[0])||void 0===P?void 0:P.id)}else{var I;wi(null===(I=Tn.steps[Tn.steps.findIndex((function(e){return e.id===mi.id}))+1])||void 0===I?void 0:I.id)}}}),co&&r.createElement("div",{className:me.goToNextStep},null===mi||void 0===mi?void 0:mi.next_steps.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return wi(e.id)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.d63})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===fi||void 0===fi?void 0:fi.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return wi(e.id)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.t3U})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))})),null===_i||void 0===_i?void 0:_i.map((function(e,n){return r.createElement("div",{key:n,onClick:function(){return function(e){f.h.dispatch((0,_.pU)(e)),po(!1)}(e)},className:me.nextStepsContainer},r.createElement("div",{className:me.nextStepImageContainer},r.createElement(ve.G,{icon:se.t3U})),r.createElement("p",null,null===e||void 0===e?void 0:e.name))}))))};return r.createElement(p.LN,null,r.createElement(E.sM,null,r.createElement("div",{className:me.processStepHost,style:{backgroundColor:y.tq?"":!0===(null===mi||void 0===mi||null===(he=mi.options)||void 0===he?void 0:he.popup)?"var(--app-color-white-lightest)":""}},r.createElement("div",{className:me.leftCardMargin,"app-variant-is-mobile":y.tq?"true":"false"},r.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",width:"100%"}},r.createElement("p",{className:me.stepTitle},null===mi||void 0===mi?void 0:mi.name),(0==Pn.processModule.stepIndex||1==Pn.processModule.stepIndex)&&r.createElement(h.zx,{light:!0,clicked:function(){ao(!0);var e=Ln.find((function(e){return e.id===Pn.processModule.module_id}));Kn.componentsByModule[e.name]=0,(0,O.vC)(e,z.Qc,1e3,1).pipe((0,c.q)(1)).subscribe({next:function(n){var o,l=null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:n;f.h.dispatch((0,_.mK)(Q.Z(V.Z("created_date"),[].concat((0,d.Z)(An.filter((function(e){return e.module_id!==Pn.processModule.module_id}))),(0,d.Z)(l))),z.KI)),ao(!1),e.lastUpdate=(0,de.now)(),e.count=null!==(o=null===n||void 0===n?void 0:n.total)&&void 0!==o?o:0},complete:function(){},error:function(){return ao(!1)}})},icon:r.createElement("img",{src:C.Fdh}),loading:to})),!Xn&&(null===mi||void 0===mi||null===(ye=mi.guidance)||void 0===ye?void 0:ye.length)>0&&r.createElement("label",{className:me.stepGuidanceSmaller,style:{xfontFamily:"var(--app-text-font-noto-sans)"}},null===mi||void 0===mi?void 0:mi.guidance),bo&&(_o||Il)&&r.createElement(P.Z,{message:bo,onClick:function(){return xo("")}}),1===ro&&void 0===(null===mi||void 0===mi?void 0:mi.component_blueprints)?r.createElement("div",{className:me.centeredSpinner}):(null===mi||void 0===mi||null===(ge=mi.component_blueprints)||void 0===ge?void 0:ge.filter((function(e){var n;return 1==(null===(n=e.options)||void 0===n?void 0:n.asModuleList)})).length)>0?null===mi||void 0===mi||null===(be=mi.component_blueprints)||void 0===be?void 0:be.filter((function(e){var n,o,l;return 1==e.options.asModuleList&&(oo.positions.filter((function(n){var o,l;return null===(o=e.options)||void 0===o||null===(l=o.showOnly)||void 0===l?void 0:l.includes(n.id)})).length>0||0==(null===(n=e.options)||void 0===n||null===(o=n.showOnly)||void 0===o?void 0:o.length)||void 0===(null===(l=e.options)||void 0===l?void 0:l.showOnly))})).map((function(e,n){var o,l,i;return r.createElement("div",{key:n,style:{width:"100%",padding:"0 10px 0 10px"}},r.createElement(S.default,{card:!0,className:me.listContainer,isReport:!1,"app-variant-is-mobile":"true",columns:(0,d.Z)(new Set((null!==(o=null===(l=e.selected_fields.find((function(e){return 1==e.visible&&"Info"===e.data_type_name})))||void 0===l||null===(i=l.options)||void 0===i?void 0:i.list)&&void 0!==o?o:[]).concat(G.Z([X.Z(V.Z("index"))])(e.selected_fields.filter((function(e){return 1==e.visible&&"Info"!==e.data_type_name}))).map((function(e){return e.field_name}))))).splice(0,3),list:Di({list:e.selected_fields.filter((function(e){return 1==e.visible||"Info"===e.data_type_name})).map((function(e){var n,o;return"Info"===e.data_type_name&&null!==(n=null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.key)&&void 0!==n?n:e.field_name}))}),onListItemClick:function(e){(null===e||void 0===e?void 0:e.id)===(null===ei||void 0===ei?void 0:ei.id)?ni(!1):ni(e)}},ei&&r.createElement("div",{style:{backgroundColor:"white"}},r.createElement(qe,{ref:hi,begunModule:Pn,allModules:Ln,companyData:zn,components:An,selectedComponent:yl.find((function(e){return e.id===(null===ei||void 0===ei?void 0:ei.id)})),setSelectedComponent:Vn,companyUsersArray:Rn,print:Yo,step:C.Nbs,companyPositionsArray:Fn,user:In}))))})):1===ro&&void 0===mi.component_blueprints?r.createElement(r.Fragment,null,"No components in step"):r.createElement("div",{className:me.processModuleContainer,"app-variant-is-mobile":y.tq?"true":"false"},r.createElement(h.U7,{blured:!1,scrollable:!1,isOpen:!y.tq&&(null!==(xe=null===mi||void 0===mi||null===(Ce=mi.options)||void 0===Ce?void 0:Ce.popup)&&void 0!==xe&&xe),shadowedContainerStyle:{width:"100%",minWidth:"50%"}},r.createElement(We,{nextButtonClicked:wo,step:mi,setIsMandatoryError:ho,isMandatoryError:_o,begunModule:Pn,companyData:zn,blueprints:Wn,components:An,products:Bn,authenticatedUser:oo,isEditing:jn,companyUsersArray:Rn,usersArray:El,setUsers:Oo,setPositions:Fo,setIsCompleted:To,selectedComponent:Jn,goToNextStep:Zi,companyPositionsArray:Fn,cart:Nn,allModules:Ln,editMode:Il},r.createElement("div",{className:me.menuRightButtons}),Ri())),(!0!==(null===mi||void 0===mi||null===(we=mi.options)||void 0===we?void 0:we.popup)||y.tq)&&r.createElement(We,{nextButtonClicked:wo,step:mi,setIsMandatoryError:ho,isMandatoryError:_o,begunModule:Pn,companyData:zn,blueprints:Wn,components:An,products:Bn,authenticatedUser:oo,isEditing:jn,companyUsersArray:Rn,usersArray:El,setUsers:Oo,setPositions:Fo,setIsCompleted:To,selectedComponent:Jn,goToNextStep:Zi,companyPositionsArray:Fn,cart:Nn,allModules:Ln,editMode:Il,isProcessorOnly:Xn},Ri())),ai&&r.createElement(Oe.Z,{openModal:ai,setOpenModal:ui,dialogHandler:function(){Pn.processModule.back_array=[],Zi(Ui?Tn.steps[0].id:Tn.steps[1].id),Nl(!1),zi(),Un()},title:"There are unsaved items, are you sure you want to cancel?",proceedTitle:"Yes",cancelTitle:"No, return back",loading:to}),Jo&&r.createElement(h.U7,{isOpen:g.v7,onClose:function(){},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement("p",{className:me.deleteText},"Are you sure you want to delete ".concat(Jn.title,"?")),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(h.zx,{title:"Delete",clicked:function(){al(!0),(0,g.v7)(Jn.id).pipe((0,v.P)()).subscribe({next:function(){al(!1),Po(!1),Vo(!1)},complete:function(){},error:function(){al(!1),Vo(!1)}})},loading:dl}),r.createElement(h.zx,{title:"No",light:!0,clicked:function(){return Vo(!1)}})))),ol&&r.createElement(h.U7,{isOpen:ol,onClose:function(){},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement("p",{className:me.deleteText},"Cannot delete ".concat(Jn.title,". Some transactions and master data are using this item")),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(h.zx,{title:"Close",light:!0,clicked:function(){return ll(!1)}}))))),vi&&r.createElement(Oe.Z,{openModal:vi,setOpenModal:ci,dialogHandler:function(){zl(!1),ci(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:0,isUpdating:!1})))},title:"No payments made. Do you want to pay later?",proceedTitle:"Yes",cancelTitle:"No, return back"}),Ll&&r.createElement(h.U7,{hasCloseIcon:!0,isOpen:Ll,onClose:function(){return ci(!0)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement(ue.default,{label:" ",withBack:!1,paymentPath:"begin-mobile",onClose:function(){return zl(!1)},companyData:zn,subscriptionInfo:{user_id:oo.id,ref:xi.id,plan_price:null!==(Me=null===xi||void 0===xi?void 0:xi.plan)&&void 0!==Me?Me:0,currency:null!==(Ze=null===xi||void 0===xi?void 0:xi.currency)&&void 0!==Ze?Ze:"PHP",plan:"CC-".concat(xi.id),total:null!==(Se=+(null===xi||void 0===xi?void 0:xi.total))&&void 0!==Se?Se:0,billable_users:[oo],duration:0,dlabel:xi.id,id:null===Pn||void 0===Pn||null===(ke=Pn.processModule)||void 0===ke||null===(Pe=ke.selectedComponent)||void 0===Pe?void 0:Pe.id},onError:function(e){ii(!0),xo(e),ho(!0),zl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{stepIndex:0,isUpdating:!1})))}})),$o&&r.createElement(h.U7,{isOpen:$o,onClose:function(){return Ko(!1)},backdropColor:!0,blured:!0,scrollable:!0,shadowedContainerStyle:{width:"100%"}},r.createElement("div",null,r.createElement(h.jL,{ungrouped:!0,title:"nonmanager"===oo.user_type?"Type an email address to send copy of this transaction (optional)":"Select users to email this transaction (Optional)",columned:!0,withAckButton:!1},"nonmanager"===oo.user_type?r.createElement("input",{placeholder:"Use comma, no space, for multiple email addresses",className:me.emailInput,onChange:function(e){new RegExp(/^([a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)(([, ]+[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])\.([a-z0-9]([a-z0-9-]*[a-z0-9]))*)?)*$/).test(e.target.value)&&Sl(e.target.value.split(","))}}):r.createElement(A.Cm,{id:"Users",tagEmplacement:"inlined",searchable:!1,items:El.filter((function(e){var n;return e.department===(null===(n=oo.departments[0])||void 0===n?void 0:n.name)})),groupedBy:"department",groupname:"department",triggerType:"chevron",initialSelectedValues:[],className:me.peoplePositionsSelect,inputClassName:me.peoplePositionsSelectInput,molclassname:me.peoplePositionsSelectMenuOverlay,moliclassname:me.peoplePositionsSelectMenuOverlayItem,onChange:function(e){e.length>0?Sl(null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.user.email}))):Sl([])}})),r.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.createElement(h.zx,{title:"Back",light:!0,clicked:function(){return Ko(!1)}}),r.createElement(h.zx,{disabled:!1===(null===zn||void 0===zn?void 0:zn.start),title:null!==Pn&&void 0!==Pn&&null!==(Ne=Pn.processModule)&&void 0!==Ne&&Ne.isUpdating?"Update":Do&&null!==(Te=null===Pn||void 0===Pn||null===(Le=Pn.processModule)||void 0===Le||null===(ze=Le.module)||void 0===ze||null===(Ae=ze.options)||void 0===Ae?void 0:Ae.save)&&void 0!==Te?Te:"Save",loading:to,style:{width:"160px",marginLeft:"0px"},clicked:function(){Ko(!1),ki()}})))),r.createElement(h.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:(ko||!0===(null===Pn||void 0===Pn||null===(Re=Pn.processModule)||void 0===Re?void 0:Re.showDetail))&&void 0!==(null===Jn||void 0===Jn?void 0:Jn.title),shadowedContainerStyle:{padding:"0 20px 20px 20px",width:"100%"},sshadowedContainerClassname:me.popup,onClose:function(){Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Xn?zi():(gl(An.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Zi(Ui?Tn.steps[0].id:Tn.steps[1].id),Nl(!1),zi(),Un())}},r.createElement(qe,{ref:hi,begunModule:Pn,allModules:Ln,companyData:zn,components:An,selectedComponent:Jn,setSelectedComponent:Vn,companyUsersArray:Rn,print:Yo,step:C.Nbs,companyPositionsArray:Fn,user:In}),r.createElement("div",{className:me.emulatedFlexGap,style:{width:"100%"}},(null===Jn||void 0===Jn||null===(Be=Jn.component_fields)||void 0===Be?void 0:Be.length)>0&&r.createElement(r.Fragment,null,(0,z.cQ)(Ti,Li,Jn,oo,Pn,zn)&&(null===Pn||void 0===Pn||null===(Fe=Pn.processModule)||void 0===Fe||null===(Ye=Fe.steps)||void 0===Ye||null===(He=Ye.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})).length>0})))||void 0===He||null===(je=He.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).length>0})))||void 0===je?void 0:je.selected_fields.filter((function(e){return"Action Button"===e.data_type_name})).map((function(e,n){var o,l,i,t;if("status"===e.options.action){var d,u,s,c,p,m,y,b,x,E=(null===zn||void 0===zn||null===(d=zn.misc_info)||void 0===d||null===(u=d.status)||void 0===u?void 0:u.length)>0?null===zn||void 0===zn||null===(s=zn.misc_info)||void 0===s?void 0:s.status:[{label:"Ongoing",value:"Ongoing"},{label:"Pending",value:"Pending"},{label:"Awaiting Payment",value:"Awaiting Payment"},{label:"Awaiting Fulfillment",value:"Awaiting Fulfillment"},{label:"Awaiting Shipment",value:"Awaiting Shipment"},{label:"Awaiting Pickup",value:"Awaiting Pickup"},{label:"Partially Shipped",value:"Partially Shipped"},{label:"Completed",value:"Completed"},{label:"Shipped",value:"Shipped"},{label:"Cancelled",value:"Cancelled"},{label:"Declined",value:"Declined"},{label:"Refunded",value:"Refunded"},{label:"Disputed",value:"Disputed"},{label:"Done",value:"Done"},{label:"Closed (Will lock Edit)",value:"Closed"}];if((null===zn||void 0===zn||null===(c=zn.misc_info)||void 0===c||null===(p=c.rules)||void 0===p?void 0:p.length)>0)null===zn||void 0===zn||null===(x=zn.misc_info)||void 0===x||x.rules.filter((function(e){return"status"===e.type})).filter((function(n){n.valueCondition===e.value&&(E="0"===n.allow?E.filter((function(e){return n.values.includes(e.value)})):E.filter((function(e){return!n.values.includes(e.value)})))}));return r.createElement("div",{key:n,style:{width:"100%",display:"user"===e.options.action&&null!==(m=Jn.component_fields)&&void 0!==m&&null!==(y=m.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==y&&y.value?"none":""}},r.createElement(I.Z,{titleProps:{fontSize:"12px",color:"var(--app-color-gray-light)"},className:me.multiselectComponent,key:n,visible:e.visible,mandatory:e.mandatory,value:null!==(b=e.value)&&void 0!==b?b:"",items:E,error:e.errors,onChange:function(n){var o,l,i,t;if(null!==(o=Pn.processModule)&&void 0!==o&&null!==(l=o.module)&&void 0!==l&&null!==(i=l.options)&&void 0!==i&&i.credits&&(n===(null===(t=zn.options)||void 0===t?void 0:t.lock)||"Closed"===n)){var d,u,r,s,c,p,m,h,y,b,x=null===Pn||void 0===Pn||null===(d=Pn.processModule)||void 0===d||null===(u=d.steps)||void 0===u||null===(r=u.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===r||null===(s=r.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===s?void 0:s.selected_fields.find((function(e){return"Payments"===e.data_type_name})),E=null===(c=xi.newStepComponents.concat(xi.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===c||null===(p=c.selected_fields)||void 0===p?void 0:p.find((function(e){var n;return e.field_name===(null===x||void 0===x||null===(n=x.options)||void 0===n?void 0:n.paymentField)})),C=0;if(null===(m=Pn.processModule)||void 0===m||null===(h=m.selectedComponent.payments)||void 0===h||!h.stripe_id)return Po(!1),Pn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if(!(+(null!==(y=null===E||void 0===E?void 0:E.value)&&void 0!==y?y:0)>0))return void f.h.dispatch((0,_.Xc)({show:!0,message:"No amount found",color:"red",spinner:!1,bottom:!0}));C=+(null!==(b=null===E||void 0===E?void 0:E.value)&&void 0!==b?b:0),"Cash"!==(null===x||void 0===x?void 0:x.value)&&(0,re.e_)({user_id:oo.id,id:(0,z.mR)(),total:C,product:"CR-".concat(null===Jn||void 0===Jn?void 0:Jn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e,n;(0,Ee.Vy)(In,(0,a.Z)((0,a.Z)({},null===In||void 0===In?void 0:In.options),{},{credit:+(+(null!==(e=null===In||void 0===In||null===(n=In.options)||void 0===n?void 0:n.credit)&&void 0!==e?e:0)+C)})).pipe((0,v.P)()).subscribe({next:function(e){return In.options=e.options}})}})}zn.start=!0,ao(!0),(0,g.C0)({component_id:Jn.id,index:0,group:99,value:n,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,g.zK)(null===Jn||void 0===Jn?void 0:Jn.id,n).subscribe({next:function(e){ao(!1),Po(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})},fieldIcon:e.icon,fieldLabel:e.field_name,placeholder:"Select status..."}))}return r.createElement("div",{key:n,style:{width:"100%"}},r.createElement(h.zx,{light:!0,title:e.field_name,loading:to,clicked:function(){if("user"===e.options.action||"creator"===e.options.action){var n,o,l,i,t,d,u,r,s;if(1==(null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.activeFor)&&ae()((0,de.now)()).diff(ae()(Jn.created_date),"minutes")>+(null===(i=Pn.processModule)||void 0===i||null===(t=i.module)||void 0===t||null===(d=t.options)||void 0===d?void 0:d.activeFor))return void f.h.dispatch((0,_.Xc)({show:!0,message:"This transaction has already expired.",color:"red",spinner:!1,bottom:!0}));var c="user"===e.options.action?oo:Rn.find((function(e){var n;return e.id===(null===(n=Jn.created_by)||void 0===n?void 0:n.id)}));if(null!==(u=Pn.processModule)&&void 0!==u&&null!==(r=u.module)&&void 0!==r&&null!==(s=r.options)&&void 0!==s&&s.credits){var p,m,h,y,b,x,E,C,w,M,Z,S,k,P,I=null===Pn||void 0===Pn||null===(p=Pn.processModule)||void 0===p||null===(m=p.steps)||void 0===m||null===(h=m.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})).length>0})))||void 0===h||null===(y=h.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Payments"===e.data_type_name})).length>0})))||void 0===y?void 0:y.selected_fields.find((function(e){return"Payments"===e.data_type_name})),N=null===(b=xi.newStepComponents.concat(xi.components).find((function(e){return e.selected_fields.filter((function(e){var n;return e.field_name===(null===I||void 0===I||null===(n=I.options)||void 0===n?void 0:n.paymentField)})).length>0})))||void 0===b||null===(x=b.selected_fields)||void 0===x?void 0:x.find((function(e){var n;return e.field_name===(null===I||void 0===I||null===(n=I.options)||void 0===n?void 0:n.paymentField)})),D=0;if(void 0===(null===c||void 0===c||null===(E=c.options)||void 0===E?void 0:E.credit)||0===(null===c||void 0===c||null===(C=c.options)||void 0===C?void 0:C.credit))return f.h.dispatch((0,_.Xc)({show:!0,message:"You need to setup funds for your wallet",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Po(!1);if(+(null!==(w=null===N||void 0===N?void 0:N.value)&&void 0!==w?w:0)>0&&"Cash"===(null===I||void 0===I?void 0:I.value)){var T,L,A,O,U,R;if((null!==(T=+(null===c||void 0===c||null===(L=c.options)||void 0===L?void 0:L.credit))&&void 0!==T?T:0)<+(null===N||void 0===N?void 0:N.value)+ +(null===N||void 0===N?void 0:N.value)*+(null!==(A=null===(O=zn.misc_info)||void 0===O?void 0:O.rate)&&void 0!==A?A:.2))return f.h.dispatch((0,_.Xc)({show:!0,message:"Insufficient funds in wallet",color:"red",spinner:!1,bottom:!0})),Pn.processModule.showDetail=!1,void Po(!1);D=null!==N&&void 0!==N&&N.value?+(null===N||void 0===N?void 0:N.value)+ +(null===N||void 0===N?void 0:N.value)*+(null!==(U=null===(R=zn.misc_info)||void 0===R?void 0:R.rate)&&void 0!==U?U:.2):0}else if(!("Wallet"===(null===I||void 0===I?void 0:I.value)||"Points"===(null===I||void 0===I?void 0:I.value)||null!==(M=Pn.processModule)&&void 0!==M&&null!==(Z=M.selectedComponent)&&void 0!==Z&&null!==(S=Z.payments)&&void 0!==S&&S.stripe_id))return Po(!1),Pn.processModule.showDetail=!1,void f.h.dispatch((0,_.Xc)({show:!0,message:"Check support payment docs",color:"red",spinner:!1,bottom:!0}));if("Cash"===(null===I||void 0===I?void 0:I.value))(0,Ee.Vy)(c,(0,a.Z)((0,a.Z)({},null===c||void 0===c?void 0:c.options),{},{credit:+(+(null!==(k=null===c||void 0===c||null===(P=c.options)||void 0===P?void 0:P.credit)&&void 0!==k?k:0)-D)})).pipe((0,v.P)()).subscribe({next:function(e){c.options=e.options,(0,re.e_)({user_id:oo.id,id:(0,z.mR)(),total:-D,product:"DB-".concat(null===Jn||void 0===Jn?void 0:Jn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({error:function(){return f.h.dispatch((0,_.Xc)({show:!0,message:"Purchase error encountered",color:"red",spinner:!1,bottom:!0}))}})}})}ao(!0),(0,g.C0)({component_id:Jn.id,index:0,group:99,value:c.id,procedure_step_blueprint_field_id:e.procedure_step_blueprint_field_id}).subscribe({next:function(e){(0,g.dn)(Jn.id,c.id).subscribe({next:function(e){ao(!1),Po(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},error:function(){},complete:function(){}})}else"status"===e.options.action||"date"===e.options.action||e.options.action,ao(!1)},style:{backgroundColor:"green",color:"white",width:"100%",display:"user"===e.options.action&&null!==(o=Jn.component_fields)&&void 0!==o&&null!==(l=o.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==l&&l.value?"none":""}}),r.createElement(h.zx,{title:"Decline",light:!0,loading:to,clicked:function(){var e;ao(!0);var n=Jn.component_fields.find((function(e){var n;return"People"===e.data_type_name&&!0===(null===(n=e.options)||void 0===n?void 0:n.calendar)}));(0,g.KL)((0,a.Z)((0,a.Z)({},Jn),{},{selected_fields:n?Jn.component_fields.filter((function(e){return e.id!==n.id})):Jn.component_fields,assigned_to:{id:""},status:"Unassigned"}),Jn.id,null===(e=Jn.shared_users)||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.id})),Jn.title).subscribe({error:function(e){f.h.dispatch((0,_.Xc)({show:!0,message:"Errors found",color:"red"}))},next:function(e){f.h.dispatch((0,_.aT)(Jn.id)),ao(!1),Po(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1})))}})},style:{backgroundColor:"red",color:"white",width:"100%",display:"user"===e.options.action&&null!==(i=Jn.component_fields)&&void 0!==i&&null!==(t=i.find((function(n){return n.procedure_step_blueprint_field_id===e.procedure_step_blueprint_field_id})))&&void 0!==t&&t.value?"none":""}}))})))),!(null!==Pn&&void 0!==Pn&&null!==(Ge=Pn.processModule)&&void 0!==Ge&&Ge.canEdit)&&("Closed"===(null===Pn||void 0===Pn||null===(Je=Pn.processModule)||void 0===Je?void 0:Je.status)||(null===Pn||void 0===Pn||null===(Ve=Pn.processModule)||void 0===Ve?void 0:Ve.status)===(null===zn||void 0===zn||null===(Xe=zn.misc_info)||void 0===Xe?void 0:Xe.lock))&&(null===Pn||void 0===Pn||null===($e=Pn.processModule.selectedComponent)||void 0===$e||null===(Ke=$e.created_by)||void 0===Ke?void 0:Ke.id)===oo.id&&(null===Pn||void 0===Pn||null===(en=Pn.processModule)||void 0===en||null===(nn=en.steps)||void 0===nn?void 0:nn.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0}))})))&&!(null!==Pn&&void 0!==Pn&&null!==(on=Pn.processModule.selectedComponent)&&void 0!==on&&on.component_fields.find((function(e){return"Ratings"===e.data_type_name})))&&Oi&&r.createElement(h.zx,{clear:!0,title:"Rate",style:{backgroundColor:"orange",color:"white",width:"100%"},clicked:function(){Rl(!0)}}),r.createElement(h.zx,{title:Pn.processModule.canEdit?"Edit":"Close",style:{width:"100%"},clicked:function(){Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Pn.processModule.canEdit||(Xn?zi():(gl(An.filter((function(e){var n,o;return e.module_id===(null===Pn||void 0===Pn||null===(n=Pn.processModule)||void 0===n||null===(o=n.module)||void 0===o?void 0:o.id)}))),Zi(Ui?Tn.steps[0].id:Tn.steps[1].id),Nl(!1),zi(),Un())),window.scrollTo({top:Pn.processModule.canEdit?1e3:0,behavior:"smooth"})}}),(null===Pn||void 0===Pn||null===(ln=Pn.processModule)||void 0===ln||null===(tn=ln.module)||void 0===tn||null===(dn=tn.options)||void 0===dn?void 0:dn.canCancel)&&("New"===Jn.status||"Unassigned"===Jn.status)&&!(null!==(an=Jn.assigned_to)&&void 0!==an&&an.id)&&r.createElement(h.zx,{loading:to,title:"Cancel Transaction",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){ao(!0),(0,g.tE)(null===Jn||void 0===Jn?void 0:Jn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){var n;if(ao(!1),null!==e&&void 0!==e&&null!==(n=e.data.payments)&&void 0!==n&&n.stripe_id){var o,l=Math.abs(+(null===e||void 0===e||null===(o=e.data.payments)||void 0===o?void 0:o.stripe_price));(0,re.e_)({user_id:oo.id,id:(0,z.mR)(),total:l,product:"RF-".concat(Jn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e,n;(0,Ee.Vy)(oo,(0,a.Z)((0,a.Z)({},null===oo||void 0===oo?void 0:oo.options),{},{credit:+(+(null!==(e=null===In||void 0===In||null===(n=In.options)||void 0===n?void 0:n.credit)&&void 0!==e?e:0)+l)})).pipe((0,v.P)()).subscribe({next:function(e){oo.options=e.options}}),ao(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}else ao(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pn||void 0===Pn||null===(un=Pn.processModule)||void 0===un||null===(rn=un.module)||void 0===rn||null===(sn=rn.options)||void 0===sn?void 0:sn.canCancel)&&"Cancellation Request"===(null===Jn||void 0===Jn?void 0:Jn.status)&&(null===oo||void 0===oo?void 0:oo.id)===(null===Jn||void 0===Jn||null===(vn=Jn.created_by)||void 0===vn?void 0:vn.id)&&r.createElement(h.zx,{loading:to,title:"Allow Cancellation",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){var e;if(ao(!0),null!==(e=Jn.payments)&&void 0!==e&&e.stripe_id){var n,o,l=Math.abs(null!==(n=+(null===Jn||void 0===Jn||null===(o=Jn.payments)||void 0===o?void 0:o.stripe_price))&&void 0!==n?n:0);(0,re.e_)({user_id:oo.id,id:(0,z.mR)(),total:l,product:"RF-".concat(Jn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e,n;(0,Ee.Vy)(oo,(0,a.Z)((0,a.Z)({},null===oo||void 0===oo?void 0:oo.options),{},{credit:+(+(null!==(e=null===In||void 0===In||null===(n=In.options)||void 0===n?void 0:n.credit)&&void 0!==e?e:0)+l)})).pipe((0,v.P)()).subscribe({next:function(e){oo.options=e.options,(0,g.tE)(null===Jn||void 0===Jn?void 0:Jn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){ao(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}})}})}else(0,g.tE)(null===Jn||void 0===Jn?void 0:Jn.id,"Refund").pipe((0,v.P)()).subscribe({next:function(e){ao(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}})}}),(null===Pn||void 0===Pn||null===(cn=Pn.processModule)||void 0===cn||null===(pn=cn.module)||void 0===pn||null===(mn=pn.options)||void 0===mn?void 0:mn.canCancel)&&"Refund"===Jn.status&&(null===oo||void 0===oo?void 0:oo.id)===(null===(fn=Jn.assigned_to)||void 0===fn?void 0:fn.id)&&r.createElement(h.zx,{loading:to,title:"Refund",style:{backgroundColor:"red",color:"white",width:"100%"},clear:!0,clicked:function(){var e=Jn.component_fields.find((function(e){var n;return"Payments"===e.data_type_name&&"Refund"===Jn.status&&(null===(n=Jn.assigned_to)||void 0===n?void 0:n.id)===(null===oo||void 0===oo?void 0:oo.id)})),n=Jn.component_fields.find((function(n){var o;return n.field_name===(null===e||void 0===e||null===(o=e.options)||void 0===o?void 0:o.paymentField)}));if(n){var o,l,i;ao(!0);var t=Math.abs(null!==(o=+(null===n||void 0===n?void 0:n.value))&&void 0!==o?o:0)+ +(null===n||void 0===n?void 0:n.value)*+(null!==(l=null===(i=zn.misc_info)||void 0===i?void 0:i.rate)&&void 0!==l?l:.2);(0,re.e_)({user_id:oo.id,id:(0,z.mR)(),total:t,product:"RF-".concat(Jn.title),notes:"Wallet",quantity:1}).pipe((0,v.P)()).subscribe({next:function(){var e,n;(0,Ee.Vy)(oo,(0,a.Z)((0,a.Z)({},null===oo||void 0===oo?void 0:oo.options),{},{credit:+(+(null!==(e=null===In||void 0===In||null===(n=In.options)||void 0===n?void 0:n.credit)&&void 0!==e?e:0)+t)})).pipe((0,v.P)()).subscribe({next:function(e){oo.options=e.options,(0,g.tE)(null===Jn||void 0===Jn?void 0:Jn.id,"Cancelled").pipe((0,v.P)()).subscribe({next:function(e){ao(!1),Po(!1),Ho(!1),Si(),zi(),window.scrollTo({top:0,behavior:"smooth"})}})}})}})}else ao(!1),Po(!1),Ho(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),window.scrollTo({top:0,behavior:"smooth"})}}))),Wl&&r.createElement(h.U7,{hasCloseIcon:!0,blured:!0,scrollable:!0,isOpen:Wl,shadowedContainerStyle:{borderTopLeftRadius:"30px",borderTopRightRadius:"30px",padding:"20px",width:"100%"},sshadowedContainerClassname:me.popup,onClose:function(){ql(!1)}},r.createElement(qe,{ref:hi,begunModule:Pn,allModules:Ln,companyData:zn,components:An,setSelectedComponent:Vn,selectedComponent:Jn,companyUsersArray:Rn,print:Yo,step:C.Nbs,companyPositionsArray:Fn,user:In}),r.createElement("div",{className:me.emulatedFlexGap,style:{width:"100%"}},r.createElement(h.zx,{title:"Close",style:{width:"100%"},clicked:function(){ql(!1)}}))),Ul&&r.createElement(h.U7,{isOpen:Ul,hasCloseIcon:!0,onClose:function(){return Rl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},r.createElement("div",{className:me.ratingsDiv},r.createElement("h3",null,"Rate your experience"),r.createElement("h5",null,"Ratings and reviews of users are visible to everyone"),r.createElement(Ie.Z,{photo:null===Oi||void 0===Oi?void 0:Oi.photo,firstName:null===Oi||void 0===Oi?void 0:Oi.first_name,lastName:null===Oi||void 0===Oi?void 0:Oi.last_name,email:null===Oi||void 0===Oi?void 0:Oi.email,position:null===Oi||void 0===Oi?void 0:Oi.phone,cardClicked:function(){},width:"100%"}),r.createElement("div",{className:me.slider},r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(1)}},r.createElement(ve.G,{icon:se.Tab,style:{color:jl<1?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(2)}},r.createElement(ve.G,{icon:se.Tab,style:{color:jl<2?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(3)}},r.createElement(ve.G,{icon:se.Tab,style:{color:jl<3?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(4)}},r.createElement(ve.G,{icon:se.Tab,style:{color:jl<4?"lightgray":"black",height:"30px",width:"30px"}})),r.createElement(h.zx,{clear:!0,clicked:function(){return Gl(5)}},r.createElement(ve.G,{icon:se.Tab,style:{color:jl<5?"lightgray":"black",height:"30px",width:"30px"}}))),"Comments:",r.createElement("textarea",{type:"text",autoComplete:"none",className:me.ratingsInput,name:"Comments",id:"Comments",style:{padding:"0 10px 0 10px",fontSize:"16px",backgroundColor:"rgba(234, 231, 231, 0.91)",marginBottom:"30px"}}),r.createElement(h.zx,{title:"Rate",clicked:function(){var e,n,o,l,i=null===Pn||void 0===Pn||null===(e=Pn.processModule)||void 0===e||null===(n=e.steps)||void 0===n||null===(o=n.find((function(e){return e.component_blueprints.filter((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).length>0})))||void 0===o||null===(l=o.component_blueprints.find((function(e){return e.selected_fields.filter((function(e){return"Ratings"===e.data_type_name})).length>0})).selected_fields)||void 0===l?void 0:l.find((function(e){return"Ratings"===e.data_type_name}));Oi&&(ao(!0),(0,g.C0)({component_id:Jn.id,index:0,gropup:100,value:"".concat(document.getElementById("Comments").value,",").concat(jl),procedure_step_blueprint_field_id:i.procedure_step_blueprint_field_id}).subscribe({next:function(){(0,g.zK)(Jn.id,"Closed").subscribe({next:function(e){(0,Ee.DV)(Oi,{ratings:jl,comments:document.getElementById("Comments").value,component_id:Jn.id}).pipe((0,v.P)()).subscribe({next:function(e){ao(!1),Rl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),Vn((0,a.Z)((0,a.Z)({},Jn),{},{status:"Closed"}))},error:function(e){ao(!1),Rl(!1),f.h.dispatch((0,_.q4)((0,a.Z)((0,a.Z)({},Pn.processModule),{},{showDetail:!1}))),zi()}})}})}}))}}))),ml&&r.createElement(Qe,{title:"",nav:ml,openNav:function(){window.clearInterval(Ql),Yn?pi("/"):fl(!1)}},r.createElement("div",{style:{color:"var(--app-color-gray-dark)",height:"inherit",width:"100%"}},r.createElement("div",null,r.createElement("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",padding:"0 20px 20px 20px"}},!(null!==Jn&&void 0!==Jn&&Jn.assigned_to)&&r.createElement(h.$j,{type:"BallTriangle",color:"black",height:30,width:"30px"}),r.createElement("p",{className:me.modalSubTitle},null!==Jn&&void 0!==Jn&&Jn.assigned_to?"Your transaction has been assigned to:":"Waiting for ".concat(null!==(_n=null===Jn||void 0===Jn?void 0:Jn.title)&&void 0!==_n?_n:"transaction"," to be assigned")),null!==Jn&&void 0!==Jn&&Jn.assigned_to||"Unassigned"!==(null===Jn||void 0===Jn?void 0:Jn.status)?(null===Jn||void 0===Jn?void 0:Jn.assigned_to)&&r.createElement(Ie.Z,{photo:null===Jn||void 0===Jn||null===(hn=Jn.assigned_to)||void 0===hn?void 0:hn.photo,height:"150px",width:y.tq?"100%":"80%",firstName:"".concat(null===Jn||void 0===Jn||null===(yn=Jn.assigned_to)||void 0===yn?void 0:yn.first_name," ").concat(null===Jn||void 0===Jn||null===(gn=Jn.assigned_to)||void 0===gn?void 0:gn.last_name),email:null!==(bn=null===Jn||void 0===Jn||null===(xn=Jn.assigned_to)||void 0===xn?void 0:xn.phone)&&void 0!==bn?bn:""}):r.createElement(Ie.Z,{noPhoto:!0,height:"150px",width:y.tq?"100%":"80%",firstName:"Unassigned",email:"Please close and select another provider"})),r.createElement("hr",{style:{borderTop:"0.5px solid #D2D2D2"}})),r.createElement("br",null),r.createElement(h.zx,{clicked:function(){window.clearInterval(Ql),fl(!1)},title:"Hide",style:{width:"100%"},loading:to}))),sl&&r.createElement(h.U7,{isOpen:sl,hasCloseIcon:!0,onClose:function(){return Yn?pi("/"):vl(!1)},backdropColor:!0,blured:!1,scrollable:!0,shadowedContainerStyle:{width:"100%",height:"auto"}},r.createElement("div",{style:{textAlign:"center",padding:"20px"}},r.createElement("p",{className:me.modalTitle},null===(En=Pn.processModule.module)||void 0===En?void 0:En.name),r.createElement("p",{className:me.modalSubTitle},null!==(Cn=null===Pn||void 0===Pn||null===(wn=Pn.processModule)||void 0===wn||null===(Mn=wn.module)||void 0===Mn||null===(Zn=Mn.options)||void 0===Zn?void 0:Zn.message)&&void 0!==Cn?Cn:"Transaction saved"))))))}))},59401:function(e,n,o){o.d(n,{sM:function(){return r}});var l=o(29439),i=o(1413),t=o(92957),d="SET_SELECTED_COMPONENT",a=(0,t.Z)((function(e,n){var o=n.action,l=n.value;return o===d?(0,i.Z)((0,i.Z)({},e),{},{selectedComponent:l}):(0,i.Z)({},e)}),{selectedComponent:[]}),u=(0,l.Z)(a,2),r=(u[0],u[1])},143:function(){}}]);
//# sourceMappingURL=827.96e6c2df.chunk.js.map