"use strict";(self.webpackChunkflowhero=self.webpackChunkflowhero||[]).push([[681],{96681:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var l=n(74165),i=n(15861),o=n(29439),a=n(50981),r=n.n(a),c=(n(34665),n(38826)),s=n(84658),d=n(2464),u=n(90536),p=n(67861),m=n(39518),v=n(23280),f=n(18316),g=n.n(f),y=n(79492),x=n.n(y),h=(n(82162),n(41771)),E=n(88827),b=n(88374),C=n(71982),w=n(57417),S=n(89293),Z=n(96189),I=n(40694),k=n(67861),A=n(66918),D=(0,m.$j)((function(e){var t=e.authReducer.sessionSettings;return{onBoardingCompleted:e.flowReducer.onBoardingCompleted,sessionSettings:t}}),(function(e){return{onSetOnBoardingVisible:function(t){return e((0,C.DJ)(t))},onSetOnBoardingComplete:function(t){return e((0,b.fj)(t))},onToggleModalVisibility:function(t){return e((0,C.$6)(t))}}}))((function(e){var t,n=(0,v.s0)(),a=((0,m.I0)(),(0,v.UO)().hash),f=(0,p.useRef)(),y=(0,p.useRef)(),C=(0,p.useState)(""),D=(0,o.Z)(C,2),N=D[0],j=D[1],z=(0,p.useState)(""),F=(0,o.Z)(z,2),H=F[0],T=F[1],Y=(0,p.useState)(""),B=(0,o.Z)(Y,2),P=B[0],M=B[1],O=(0,p.useState)(""),R=(0,o.Z)(O,2),_=R[0],L=R[1],V=(0,p.useState)(""),q=(0,o.Z)(V,2),K=q[0],U=q[1],W=(0,p.useState)("Asia/Hong_Kong"),$=(0,o.Z)(W,2),J=$[0],X=$[1],G=(0,p.useState)(""),Q=(0,o.Z)(G,2),ee=Q[0],te=Q[1],ne=(0,p.useState)(!1),le=(0,o.Z)(ne,2),ie=le[0],oe=le[1],ae=(0,p.useState)(!1),re=(0,o.Z)(ae,2),ce=re[0],se=re[1],de=(0,p.useState)(""),ue=(0,o.Z)(de,2),pe=ue[0],me=ue[1],ve=(0,p.useState)(!1),fe=(0,o.Z)(ve,2),ge=fe[0],ye=fe[1],xe=(0,p.useState)(!0),he=(0,o.Z)(xe,2),Ee=he[0],be=he[1],Ce=e.onToggleModalVisibility,we=e.onSetOnBoardingComplete,Se=e.authenticated;(0,p.useEffect)((function(){if(we(!1),Ce({}),(null===a||void 0===a?void 0:a.length)>0){if(Se)return be(!1),void me("You are currently logged in as another user. Please logout this user and accept the invitation again");var e=(0,w.s7)(a).subscribe({next:function(e){var t,n,l,i,o;se(!1),U(null!==(t=null!==(n=null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.first_name)&&void 0!==n?n:"  "+(null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.last_name))&&void 0!==t?t:" "),j(null===e||void 0===e?void 0:e.email),L(null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:"")},error:function(e){U("Error"),be(!1),me("Not a valid invitation, could have expired or incorrect. Please contact your admin")}});return function(){(0,S.zK)(e)}}}),[a]);var Ze=(0,p.useCallback)((function(e){var t,o,a;if(e.preventDefault(),e.stopPropagation(),f.current.validateAll(),0===(null===y||void 0===y||null===(t=y.current)||void 0===t||null===(o=t.context)||void 0===o||null===(a=o._errors)||void 0===a?void 0:a.length)){se(!0);var c={email:N,password:ee,username:P,invitation_id:_,timezone:J,phone:H,validity:"".concat(r()().add(3,"days").format("YYYY-MM-DD HH:mm:ss"))};(0,w.f0)(c).subscribe({next:function(){var e=(0,i.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(!1),me({success:"You have successfully registered your account. You may now use your credentials in the login page. Thank you"}),E.h.dispatch((0,b.Xc)({noTimeout:!0,show:!0,message:"You have successfully registered your account. Close this message and enter your credentials when the login page appears",color:"var(--app-color-blue)",spinner:!1,bottom:!0,action:function(){(0,w.iC)(),n("/login")}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(e){var t,n,l,i,o,a,r,c,s,d,u,p,m,v,f,g,y;if((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n||null===(l=n.email)||void 0===l?void 0:l.length)>0)me(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(y=g.errors)||void 0===y?void 0:y.email[0]);else if((null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.errors)||void 0===o||null===(a=o.username)||void 0===a?void 0:a.length)>0){var x,h;me(null===e||void 0===e||null===(x=e.data)||void 0===x||null===(h=x.errors)||void 0===h?void 0:h.username[0])}else if((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(c=r.errors)||void 0===c||null===(s=c.password)||void 0===s?void 0:s.length)>0){var E,b;me(null===e||void 0===e||null===(E=e.data)||void 0===E||null===(b=E.errors)||void 0===b?void 0:b.password[0])}else if((null===e||void 0===e||null===(d=e.data)||void 0===d||null===(u=d.errors)||void 0===u||null===(p=u.timezone)||void 0===p?void 0:p.length)>0){var C,w;me(null===e||void 0===e||null===(C=e.data)||void 0===C||null===(w=C.errors)||void 0===w?void 0:w.timezone[0])}else if((null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.errors)||void 0===v||null===(f=v.invitation_id)||void 0===f?void 0:f.length)>0){var S,Z;me(null===e||void 0===e||null===(S=e.data)||void 0===S||null===(Z=S.errors)||void 0===Z?void 0:Z.invitation_id[0])}else me("InvitationAccepted");se(!1)},complete:function(){}})}else se(!1)}),[N,ee,_,J]),Ie=function(){e.onSetOnBoardingVisible(!1),e.onSetOnBoardingComplete(!0),n("/help-center")},ke=(0,d.Z)({"@global":{".MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--app-color-gray-lighter)"},"&:hover fieldset":{borderColor:"var(--app-color-gray-lighter)!important"},"&.Mui-focused fieldset":{borderColor:"var(--app-color-gray-lighter)!important"}}}})((function(){return null}));return k.createElement("div",{className:"main-container",style:{position:"relative",backgroundColor:"white",display:""===K?"none":"flex",flex:1,width:"100%",height:"100vh",justifyContent:"space-evenly",alignItems:"stretch",overflowY:"auto"}},k.createElement("div",{className:"first-container"},k.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}},Ee?k.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},k.createElement("div",{style:{alignSelf:"flex-start",display:"flex",flex:0,flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"}},k.createElement("h1",{style:{padding:0,color:"#4A4A4A",fontSize:"28px",fontWeight:500,letterSpacing:0,lineHeight:"40px"}},"Superadmin"===K?"The request to create your company/or user account has been approved by ".concat(S.iC):"You've been invited by ","Superadmin"!==K&&k.createElement("span",null,k.createElement("i",null,K)," to ".concat(S.iC)))),"Superadmin"===K&&k.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},k.createElement("p",{style:{fontFamily:"var(--app-text-main-font)",fontSize:"1em",lineHeight:"1.5em",color:"var(--app-color-gray-light)"}},"Please provide the details below to finalize the company")),k.createElement("div",{style:{paddingTop:"30px",alignSelf:"flex-start"}},k.createElement(x(),{ref:f},k.createElement("p",{className:"labelTextStyle"},"Account Email:"),k.createElement(u.Z,{id:"my-input",type:"text",variant:"outlined",name:"name",className:"input-style",placeholder:"Company Email",value:N,onChange:function(e){var t=e.target.value;j(t)}}),null!==pe&&void 0!==pe&&pe.email?k.createElement("div",{className:"form-group"},k.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===pe||void 0===pe?void 0:pe.email)):null,k.createElement("br",null),k.createElement("br",null),k.createElement(u.Z,{id:"my-input",type:"text",variant:"outlined",name:"username",className:"input-style",placeholder:"Desired Username",value:P,onChange:function(e){var t=e.target.value;t.length>6&&M(t)}}),null!==pe&&void 0!==pe&&pe.username?k.createElement("div",{className:"form-group"},k.createElement("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb"}},null===pe||void 0===pe?void 0:pe.username)):null,k.createElement("br",null),k.createElement("br",null),k.createElement(u.Z,{id:"my-input",type:"text",variant:"outlined",name:"mobile",className:"input-style",placeholder:"Mobile Number",value:H,onChange:function(e){T(e.target.value)}}),k.createElement("br",null),k.createElement("br",null),k.createElement("p",{className:"labelTextStyle"},"Account Password:"),k.createElement("label",{style:{display:"inline-flex",alignItems:"center"}},k.createElement(ke,null),k.createElement(c.Z,{id:"my-input",className:"input-style",type:ie?"text":"password",name:"password",placeholder:"Password",value:ee,onChange:function(e){var t=e.target.value;te(t)},endAdornment:k.createElement(s.Z,{className:"showHideButton",onClick:function(){return oe(!ie)},position:"end"},ie?"Hide":"Show")})),null!==pe&&void 0!==pe&&pe.password?k.createElement("div",{className:"form-group"},k.createElement("div",{className:"alert alert-danger",role:"alert"},null===pe||void 0===pe?void 0:pe.password)):null,k.createElement("br",null),k.createElement("br",null),k.createElement("p",{className:"labelTextStyle"},"Timezone:"),k.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",width:"100%"}},k.createElement(Z.Ld,{items:S.LY,defaultSelectedItem:A.find(A.propEq("value",J))(S.LY),triggerType:"chevron",placeholder:"Select timezone...",onChange:function(e){X(null===e||void 0===e?void 0:e.value)}})),k.createElement("br",null),k.createElement("br",null),k.createElement("div",{style:{display:"flex",width:"100%",flex:0,justifyContent:"flex-start",alignItems:"center",maxHeight:"30px"}},k.createElement(I.Z,{disabled:ce,loading:ce,clicked:Ze,title:"Super"===K?"Create Company":"Accept Invitation",style:{margin:"0"}})),pe&&k.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:"#721c24",backgroundColor:"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},"InvitationAccepted"===pe?k.createElement("div",null,"Already accepted the invitation, click ",k.createElement("a",{href:"/"},"here")," to login."):pe),k.createElement(g(),{style:{display:"none"},ref:y}))),k.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",margin:"30px 0 0 0 "}},k.createElement("p",null,"".concat("Superadmin"===K?"By creating the company":"By accepting",", you agree with ").concat(S.iC)," ",k.createElement("a",{href:"https://adpgxsoftware.com/".concat(S.iC,"/terms-conditions")},"Terms and Conditions")," and ",k.createElement("a",{href:"https://adpgxsoftware.com/".concat(S.iC,"/privacy-policy")},"Privacy Policy")))):k.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",fontSize:"1em",width:"90%",marginTop:"30px",borderRadius:"3px",color:null!==pe&&void 0!==pe&&pe.success?"gray":"#721c24",backgroundColor:null!==pe&&void 0!==pe&&pe.success?"transparent":"#f8d7da",borderColor:"#f5c6cb",padding:"2px"},role:"alert"},null!==(t=null===pe||void 0===pe?void 0:pe.success)&&void 0!==t?t:pe))),k.createElement("div",{className:"second-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),ye(!1)}}),ge&&k.createElement("div",{style:{width:"300px",flex:1,flexWrap:"wrap",padding:"12px 30px 0px 10px",zIndex:101,position:"absolute",bottom:"0px",right:"50px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",borderRadius:"8px 8px 0 0",backgroundColor:" #FFFFFF",boxShadow:"0 0 40px 0 rgba(0, 0, 0, 0.1)"}},k.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",height:"54px",width:"149px"}},k.createElement("img",{src:h.Pys,style:{height:"24px",width:"24px"},alt:"need-help-icon"}),k.createElement("p",{style:{color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"22px"}},"Need help?")),k.createElement("div",{style:{display:" flex",flex:1,flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},k.createElement("p",{style:{textAlign:"left",color:" #4A4A4A",fontFamily:" var(--app-text-main-font)",fontSize:"16px",lineHeight:"24px"}},"Before requesting to speak to one of our colleagues, we encourage you to explore our ",k.createElement("span",{onClick:Ie,style:{textDecoration:"underline",cursor:"pointer"}},"Help Center")," to find your solution.")),k.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},k.createElement(I.Z,{disabled:ce,loading:ce,clicked:Ie,title:"Help Center",style:{margin:"10px",width:"100%"}})),k.createElement("div",{style:{margin:"20px 10px",display:"flex",width:"100%",flex:0,justifyContent:"center",alignItems:"center",maxHeight:"30px"}},k.createElement(I.Z,{disabled:ce,loading:ce,clicked:function(){alert("Live Chat")},title:"Live Chat",style:{margin:"10px",width:"100%",backgroundColor:"#FFFFFF"},titleStyle:{color:"var(--app-color-gray-light)",fontSize:"16px"}}))))}))}}]);
//# sourceMappingURL=681.61ae24d9.chunk.js.map